{"version":3,"sources":["../src/options.js","../src/constants.js","../src/create-element.js","../src/component.js","../src/render.js","../src/create-context.js","../src/util.js","../src/diff/children.js","../src/diff/props.js","../src/diff/index.js","../src/clone-element.js","../src/diff/catch-error.js","utils/std_overrides.js","utils/init.js","../src/index.js","../node_modules/process/browser.js","../src/index.ts","../src/env.ts","../src/types-internal.ts","../src/extends.ts","../src/common.ts","../src/scope.ts","../src/finalize.ts","../src/proxy.ts","../src/es5.ts","../src/map.ts","../src/set.ts","../src/patches.ts","../node_modules/tslib/tslib.es6.js","../src/immer.ts","utils/productions.js","containers/Link.js","containers/LanguageManager.js","containers/Header.js","components/Route.js","components/LevelButton.js","containers/MenuPage.js","components/Input.js","containers/InputManager.js","../node_modules/marked/src/defaults.js","../node_modules/marked/src/helpers.js","../node_modules/marked/src/rules.js","../node_modules/marked/src/Lexer.js","../node_modules/marked/src/Renderer.js","../node_modules/marked/src/Slugger.js","../node_modules/marked/src/InlineLexer.js","../node_modules/marked/src/TextRenderer.js","../node_modules/marked/src/Parser.js","../node_modules/marked/src/marked.js","components/Markdown.js","test_functions/rps.js","test_functions/palindrom.js","test_functions/xox.js","test_functions/battlefield.js","test_functions/multiplication.js","test_functions/chess.js","test_functions/sudoku.js","test_functions/maze.js","test_functions/turing.js","test_functions/graph.js","test_functions/index.js","components/Interval.js","components/Tape.js","components/TestInstance.js","containers/TestManager.js","containers/LevelPage.js","components/ScrollToTop.js","containers/HelpPage.js","components/Credits.js","containers/App.js","main.js"],"names":["options","isValidElement","q","defer","prevDebounce","IS_HYDRATE","i","EMPTY_OBJ","EMPTY_ARR","IS_NON_DIMENSIONAL","assign","obj","props","removeNode","node","parentNode","removeChild","createElement","type","children","normalizedProps","arguments","length","push","defaultProps","createVNode","key","ref","vnode","_children","_parent","_depth","_dom","_nextDom","_component","constructor","createRef","Fragment","Component","context","getDomSibling","childIndex","indexOf","sibling","updateParentDomPointers","child","base","enqueueRender","c","_dirty","debounceRendering","process","p","component","commitQueue","newDom","oldDom","parentDom","sort","a","b","_vnode","pop","_parentDom","diff","_context","ownerSVGElement","commitRoot","diffChildren","newParentVNode","oldParentVNode","isSvg","excessDomChildren","isHydrating","j","oldVNode","sibDom","firstChildDom","refs","oldChildren","oldChildrenLength","toChildArray","childVNode","undefined","nextDom","outer","appendChild","nextSibling","insertBefore","value","unmount","applyRef","callback","flattened","Array","isArray","diffProps","dom","newProps","oldProps","hydrate","setProperty","setStyle","style","test","name","oldValue","s","useCapture","nameLower","cssText","replace","toLowerCase","slice","addEventListener","eventProxy","_listeners","removeEventListener","removeAttributeNS","setAttributeNS","removeAttribute","setAttribute","e","event","newVNode","tmp","isNew","oldState","snapshot","clearProcessingException","provider","cctx","newType","_diff","contextType","_id","_defaultValue","_processingException","_pendingError","prototype","render","doRender","sub","state","_renderCallbacks","_nextState","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","_force","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","_render","getChildContext","getSnapshotBeforeUpdate","diffElementNodes","diffed","_catchError","root","_commit","some","cb","call","oldHtml","newHtml","nodeType","localName","document","createTextNode","createElementNS","is","data","childNodes","dangerouslySetInnerHTML","attributes","__html","innerHTML","checked","current","parentVNode","skipRemove","r","componentWillUnmount","this","replaceNode","_root","cloneElement","createContext","defaultValue","ctx","Consumer","Provider","subs","_this","_props","old","splice","error","hasCaught","getDerivedStateFromError","setState","componentDidCatch","update","forceUpdate","Promise","then","bind","resolve","setTimeout","toGroups","ar","String","parseProductions","split","filter","swap","index1","index2","temp","shuffle","Math","floor","random","pickRandom","isSameWith","arr","languages","levelCount","currentAppVersion","window","localStorage","version","text","language","urlPrefix","location","hash","history","replaceState","pathname","substring","init","languageUpdateNeeded","lighting","wonLevels","prodMap","initialState","errorMsgInd","JSON","parse","fill","stringify","raw","currentIndex","currentComponent","prevRaf","afterPaintEffects","oldBeforeRender","oldAfterDiff","oldCommit","oldBeforeUnmount","getHookState","index","_hook","hooks","__hooks","_list","_pendingEffects","useState","useReducer","invokeOrReturn","reducer","hookState","_value","action","nextValue","useEffect","args","argsChanged","_args","useLayoutEffect","useRef","initialValue","useMemo","useImperativeHandle","createHandle","concat","factory","_factory","useCallback","useContext","useDebugValue","formatter","useErrorBoundary","errState","err","flushAfterPaintEffects","forEach","invokeCleanup","invokeEffect","hook","_cleanup","result","oldArgs","newArgs","arg","f","requestAnimationFrame","raf","done","clearTimeout","timeout","cancelAnimationFrame","cachedSetTimeout","cachedClearTimeout","module","exports","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","len","run","Item","array","noop","nextTick","apply","title","env","argv","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask","hasSymbol","Symbol","hasMap","Map","hasSet","Set","NOTHING","_a","DRAFTABLE","Archtype","ProxyType","DRAFT_STATE","iteratorSymbol","iterator","extendStatics","d","Object","setPrototypeOf","__proto__","hasOwnProperty","__extends","__","isDraft","isDraftable","isPlainObject","isMap","isSet","proto","getPrototypeOf","original","ownKeys","Reflect","getOwnPropertySymbols","getOwnPropertyNames","each","iter","getArchtype","entry","isEnumerable","prop","desc","getOwnPropertyDescriptor","enumerable","thing","die","ES5Object","ProxyObject","ES5Array","ProxyArray","has","get","set","propOrOldValue","delete","add","x","y","target","latest","copy","shallowCopy","invokeGetters","clone","create","defineProperty","writable","configurable","freeze","deep","isFrozen","clear","dontMutateFrozenCollections","_","createHiddenProperty","parent","immer","drafts","canAutoFreeze","ImmerScope","patchListener","patches","inversePatches","leave","revoke","scope","draft","revoked","processResult","baseDraft","isReplaced","willFinalize","modified","finalize","maybeFreeze","op","path","finalizeTree","finalized","onDelete","useProxies","assigned","exists","copy_1","onCopy","autoFreeze","generatePatches","rootPath","finalizeProperty","rootState","parentValue","childValue","isDraftProp","isSetMember","grandChild","onAssign","createProxy","isManual","traps","objectTraps","arrayTraps","proxy","peek","baseValue","isUnchanged","prepareCopy","markChanged","deleteProperty","owner","willFinalizeES5","finalizing","markChangesSweep","markChangesRecursively","createES5Proxy","clonePotentialDraft","proxyProperty","assertUnrevoked","markChangedES5","fn","isNaN","parseInt","descriptors","hasArrayChanges","hasObjectChanges","object","min","keys","state_1","descriptor","DraftMap","_super","size","thisArg","_map","values","next","entries","proxyMap","DraftSet","proxySet","basePath","generatePatchesFromAssigned","generateArrayPatches","generateSetPatches","_b","delta","start","end","replaceCount","assignedValue","origValue","unshift","applyPatches","patch","join","deepClonePatchValue","map","from","k","v","cloned","verifyMinified","configDefaults","Proxy","revocable","config","setUseProxies","produce","produceWithPatches","Immer","recipe","defaultBase_1","self_1","_i","scope_1","enter","hasError","usePatches","arg1","arg2","arg3","ip","setAutoFreeze","createDraft","finishDraft","castDraft","castImmutable","dummy","toggleLighting","updateLanguage","fetchLanguage","levelComplete","no","updateProductions","initial","Link","href","gg","newLink","handleClick","ev","preventDefault","pushState","prod","LanguageManager","g","selectedIndex","l","Header","moonIcon","setMoonIcon","sunIcon","setSunIcon","fetch","res","svg","catch","console","icon","Route","exec","LevelButton","isComplete","levelNo","MenuPage","tt","Input","isEditable","errorMsg","onInput","isEditMode","setEditMode","textareaRef","parsedInput","focus","handleInput","i1","i2","InputManager","setRaw","locals","localInit","updateProdMap","analyseProductions","parsed","initState","initFound","regex","finalFound","getDefaults","baseUrl","breaks","gfm","headerIds","headerPrefix","highlight","langPrefix","mangle","pedantic","renderer","sanitize","sanitizer","silent","smartLists","smartypants","xhtml","changeDefaults","newDefaults","defaults","escapeTest","escapeReplace","escapeTestNoEncode","escapeReplaceNoEncode","escapeReplacements","getEscapeReplacement","ch","escape","html","encode","unescapeTest","unescape","n","charAt","fromCharCode","caret","edit","opt","source","val","getRegex","RegExp","nonWordAndColonTest","originIndependentUrl","cleanUrl","prot","decodeURIComponent","resolveUrl","encodeURI","baseUrls","justDomain","protocol","domain","rtrim","relativeBase","noopTest","merge","splitCells","tableRow","count","row","cells","match","offset","str","escaped","curr","trim","invert","suffLen","currChar","substr","findClosingBracket","level","checkSanitizeDeprecation","warn","require","block","newline","code","fences","hr","heading","blockquote","list","def","nptable","table","lheading","_paragraph","_label","_title","bullet","item","_tag","_comment","paragraph","normal","inline","autolink","url","tag","link","reflink","nolink","strong","em","br","del","_punctuation","_escapes","_scheme","_email","_attribute","_href","_extended_email","_backpedal","tokens","links","rules","src","token","top","loose","cap","bull","listStart","listItems","t","space","isordered","istask","ischecked","lastToken","trimRight","codeBlockStyle","lang","depth","header","align","ordered","task","pre","charCodeAt","lexer","Lexer","lex","infostring","out","quote","slugger","slug","body","content","flags","seen","originalSlug","Renderer","prevCapZero","inLink","inRawBlock","lastParenIndex","linkLen","outputLink","InlineLexer","escapes","output","codespan","image","toString","Slugger","TextRenderer","inlineText","reverse","tok","cell","tablecell","tablerow","nextToken","checkbox","parseText","listitem","errMsg","log","parser","Parser","marked","pending","message","setOptions","inlineLexer","Markdown","tests","OPTIONS","expected","tape","generate_palindrom","word","char","pickOneFrom","generate_non_palindrom","generate_even_number","generate_odd_number","randomBetween","toExcl","generate_tape","initialize_table","players","randomIndex","randomPlayer","transpose","newTable","is_all_same","every","element","status","check_rows","check_columns","check_diagonals","generate_draw_game","generate_not_draw_game","transposedTable","firstDiagonal","secondDiagonal","generate_test_rules","template","amounts","sizeKey","randomAmountIndex","randomAmount","D","ND","amount","testRules","game","m","generate_dimensions","fill_table","winner","loser","winnerAmount","ceil","max","coordinates","generate_winner_coordinates","generate","n1","n2","mul","defect","number","defectTimes","isToBeDefected","defectedTimes","tuple","indexToDefect","newBoard","copyFrom","getRandomCell","sideOf","piece","getThreatenedCells","board","attacker","attackerSide","cx","cy","attackerType","mask","targetSide","abs","getRandomBoard","nBlacks","nWhites","whiteKingX","whiteKingY","whiteIsChecked","boardIsLegit","listOfWhites","listOfBlacks","blackKingX","blackKingY","piecesPlaced","piecesTotal","totalChecks","WIDTH","goForward","goBackWard","doneAll","generateFilledTable","notAllowed","legit","allowed","setDifference","getLegit","picked","setA","setB","_difference","elem","blockStart","blockLabel","removeNums","nums","except","numsRemoved","findCounterparts","counterparts","column","generateCorruptedTable","nRemove","newVal","remained","cp","tableToTape","dx","dy","generateEmptyGame","ri","ci","startingPoint","iteration","visited","drawMap","getPossibleMoves","pts","moves","fromX","fromY","toX","toY","carveWall","successful","selected","intermPt","findSolution","fromStart","fromEnd","all","longerOne","findPrevious","distance","x1","x2","y1","y2","generateValidMaze","generateInvalidMaze","solution","blockedInd","mapSymbolToTapeSymbol","symbol","LOOP_LIMIT","generateInstruction","instruction","generateMap","generated","acceptingStateExists","generateTape","getNextProduction","tm","currentState","currentSymbol","nextProd","simulate","acceptedCount","currentRow","generate_groups","NODES","groups","single","generate_pairs","pairs","usedOnes","generatedFirstOne","isSingleGroup","isSingle","rps","palindrom","xox","battlefield","multiplication","chess","sudoku","maze","turing","graph","Interval","delay","savedCallback","id","setInterval","tick","clearInterval","Tape","xprev","yprev","widthInPixels","resetFlag","w","h","ox","oy","setTm","ax","ay","handleMoveTape","stopPropagation","TestInstance","initialTape","nextFlag","onEnd","isExpanded","setExpanded","setTape","setCurrentState","tapeContainer","resetCommand","setResetCommand","reset","handleExpand","clientWidth","TestManager","onTestsReady","testResults","setTestResults","setTests","testerStatus","setTesterStatus","resetAllCommand","setResetAllCommand","nextCommand","setNextCommand","test_functions","allRight","allFinished","allUndefined","correctAnswersLen","incorrectAnswersLen","handleRun","handleReset","handleInterval","handleEnd","ind","LevelPage","sampleTest","setSampleTest","ScrollToTop","pageYOffset","isScrolledDown","setScrolledDown","scrollTo","HelpPage","counter","setCounter","Credits","App","ss","onpopstate","onresize","classList","remove"],"mappings":"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","file":"main.0d41a3c3.js","sourceRoot":"../src","sourcesContent":["import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n","export const EMPTY_OBJ = {};\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL = /acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;\n","import options from './options';\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * constructor for this virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\ti;\n\tfor (i in props) {\n\t\tif (i !== 'key' && i !== 'ref') normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 3) {\n\t\tchildren = [children];\n\t\t// https://github.com/preactjs/preact/issues/1916\n\t\tfor (i = 3; i < arguments.length; i++) {\n\t\t\tchildren.push(arguments[i]);\n\t\t}\n\t}\n\tif (children != null) {\n\t\tnormalizedProps.children = children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type === 'function' && type.defaultProps != null) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(\n\t\ttype,\n\t\tnormalizedProps,\n\t\tprops && props.key,\n\t\tprops && props.ref\n\t);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t// _nextDom must be initialized to undefined b/c it will eventually\n\t\t// be set to dom.nextSibling which can return `null` and it is important\n\t\t// to be able to distinguish between an uninitialized _nextDom and\n\t\t// a _nextDom that has been set to `null`\n\t\t_nextDom: undefined,\n\t\t_component: null,\n\t\tconstructor: undefined\n\t};\n\n\tif (options.vnode) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn {};\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is import('./internal').VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != null && vnode.constructor === undefined;\n","import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function Component(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nComponent.prototype.setState = function(update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState !== this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\tupdate = update(s, this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == null) return;\n\n\tif (this._vnode) {\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nComponent.prototype.forceUpdate = function(callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](http://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {import('./index').ComponentChildren | void}\n */\nComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == null) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._parent._children.indexOf(vnode) + 1)\n\t\t\t: null;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != null && sibling._dom != null) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type === 'function' ? getDomSibling(vnode) : null;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet vnode = component._vnode,\n\t\toldDom = vnode._dom,\n\t\tparentDom = component._parentDom;\n\n\tif (parentDom) {\n\t\tlet commitQueue = [];\n\t\tlet newDom = diff(\n\t\t\tparentDom,\n\t\t\tvnode,\n\t\t\tassign({}, vnode),\n\t\t\tcomponent._context,\n\t\t\tparentDom.ownerSVGElement !== undefined,\n\t\t\tnull,\n\t\t\tcommitQueue,\n\t\t\toldDom == null ? getDomSibling(vnode) : oldDom\n\t\t);\n\t\tcommitRoot(commitQueue, vnode);\n\n\t\tif (newDom != oldDom) {\n\t\t\tupdateParentDomPointers(vnode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != null && vnode._component != null) {\n\t\tvnode._dom = vnode._component.base = null;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != null && child._dom != null) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet q = [];\n\n/**\n * Asynchronously schedule a callback\n * @type {(cb: () => void) => void}\n */\n/* istanbul ignore next */\n// Note the following line isn't tree-shaken by rollup cuz of rollup/rollup#2566\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty && (c._dirty = true) && q.push(c) === 1) ||\n\t\tprevDebounce !== options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet p;\n\tq.sort((a, b) => b._vnode._depth - a._vnode._depth);\n\twhile ((p = q.pop())) {\n\t\t// forceUpdate's callback argument is reused here to indicate a non-forced update.\n\t\tif (p._dirty) renderComponent(p);\n\t}\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\n\nconst IS_HYDRATE = EMPTY_OBJ;\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * render into\n * @param {Element | Text} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we\n\t// are in hydration mode or not by passing `IS_HYDRATE` instead of a\n\t// DOM element.\n\tlet isHydrating = replaceNode === IS_HYDRATE;\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? null\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\tvnode = createElement(Fragment, null, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\t((isHydrating ? parentDom : replaceNode || parentDom)._children = vnode),\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.ownerSVGElement !== undefined,\n\t\treplaceNode && !isHydrating\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t? null\n\t\t\t: EMPTY_ARR.slice.call(parentDom.childNodes),\n\t\tcommitQueue,\n\t\treplaceNode || EMPTY_OBJ,\n\t\tisHydrating\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./index').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to\n * update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, IS_HYDRATE);\n}\n","import { enqueueRender } from './component';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tconst ctx = {};\n\n\tconst context = {\n\t\t_id: '__cC' + i++,\n\t\t_defaultValue: defaultValue,\n\t\tConsumer(props, context) {\n\t\t\treturn props.children(context);\n\t\t},\n\t\tProvider(props) {\n\t\t\tif (!this.getChildContext) {\n\t\t\t\tconst subs = [];\n\t\t\t\tthis.getChildContext = () => {\n\t\t\t\t\tctx[context._id] = this;\n\t\t\t\t\treturn ctx;\n\t\t\t\t};\n\t\t\t\tthis.shouldComponentUpdate = _props => {\n\t\t\t\t\tif (props.value !== _props.value) {\n\t\t\t\t\t\tsubs.some(c => {\n\t\t\t\t\t\t\tc.context = _props.value;\n\t\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tthis.sub = c => {\n\t\t\t\t\tsubs.push(c);\n\t\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\t\tsubs.splice(subs.indexOf(c), 1);\n\t\t\t\t\t\told && old.call(c);\n\t\t\t\t\t};\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn props.children;\n\t\t}\n\t};\n\n\tcontext.Consumer.contextType = context;\n\n\treturn context;\n}\n","/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {Node} node The node to remove\n */\nexport function removeNode(node) {\n\tlet parentNode = node.parentNode;\n\tif (parentNode) parentNode.removeChild(node);\n}\n","import { diff, unmount, applyRef } from './index';\nimport { createVNode } from '../create-element';\nimport { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { removeNode } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * Diff the children of a virtual node\n * @param {import('../internal').PreactElement} parentDom The DOM element whose\n * children are being diffed\n * @param {import('../internal').VNode} newParentVNode The new virtual\n * node whose children should be diff'ed against oldParentVNode\n * @param {import('../internal').VNode} oldParentVNode The old virtual\n * node whose children should be diff'ed against newParentVNode\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Node | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n */\nexport function diffChildren(\n\tparentDom,\n\tnewParentVNode,\n\toldParentVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet i, j, oldVNode, newDom, sibDom, firstChildDom, refs;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet oldChildrenLength = oldChildren.length;\n\n\t// Only in very specific places should this logic be invoked (top level `render` and `diffElementNodes`).\n\t// I'm using `EMPTY_OBJ` to signal when `diffChildren` is invoked in these situations. I can't use `null`\n\t// for this purpose, because `null` is a valid value for `oldDom` which can mean to skip to this logic\n\t// (e.g. if mounting a new tree in which the old DOM should be ignored (usually for Fragments).\n\tif (oldDom == EMPTY_OBJ) {\n\t\tif (excessDomChildren != null) {\n\t\t\toldDom = excessDomChildren[0];\n\t\t} else if (oldChildrenLength) {\n\t\t\toldDom = getDomSibling(oldParentVNode, 0);\n\t\t} else {\n\t\t\toldDom = null;\n\t\t}\n\t}\n\n\ti = 0;\n\tnewParentVNode._children = toChildArray(\n\t\tnewParentVNode._children,\n\t\tchildVNode => {\n\t\t\tif (childVNode != null) {\n\t\t\t\tchildVNode._parent = newParentVNode;\n\t\t\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t\t\t// Check if we find a corresponding element in oldChildren.\n\t\t\t\t// If found, delete the array item by setting to `undefined`.\n\t\t\t\t// We use `undefined`, as `null` is reserved for empty placeholders\n\t\t\t\t// (holes).\n\t\t\t\toldVNode = oldChildren[i];\n\n\t\t\t\tif (\n\t\t\t\t\toldVNode === null ||\n\t\t\t\t\t(oldVNode &&\n\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\tchildVNode.type === oldVNode.type)\n\t\t\t\t) {\n\t\t\t\t\toldChildren[i] = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// Either oldVNode === undefined or oldChildrenLength > 0,\n\t\t\t\t\t// so after this loop oldVNode == null or oldVNode is a valid value.\n\t\t\t\t\tfor (j = 0; j < oldChildrenLength; j++) {\n\t\t\t\t\t\toldVNode = oldChildren[j];\n\t\t\t\t\t\t// If childVNode is unkeyed, we only match similarly unkeyed nodes, otherwise we match by key.\n\t\t\t\t\t\t// We always match by type (in either case).\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\toldVNode &&\n\t\t\t\t\t\t\tchildVNode.key == oldVNode.key &&\n\t\t\t\t\t\t\tchildVNode.type === oldVNode.type\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\toldChildren[j] = undefined;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\toldVNode = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toldVNode = oldVNode || EMPTY_OBJ;\n\n\t\t\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\t\t\tnewDom = diff(\n\t\t\t\t\tparentDom,\n\t\t\t\t\tchildVNode,\n\t\t\t\t\toldVNode,\n\t\t\t\t\tcontext,\n\t\t\t\t\tisSvg,\n\t\t\t\t\texcessDomChildren,\n\t\t\t\t\tcommitQueue,\n\t\t\t\t\toldDom,\n\t\t\t\t\tisHydrating\n\t\t\t\t);\n\n\t\t\t\tif ((j = childVNode.ref) && oldVNode.ref != j) {\n\t\t\t\t\tif (!refs) refs = [];\n\t\t\t\t\tif (oldVNode.ref) refs.push(oldVNode.ref, null, childVNode);\n\t\t\t\t\trefs.push(j, childVNode._component || newDom, childVNode);\n\t\t\t\t}\n\n\t\t\t\t// Only proceed if the vnode has not been unmounted by `diff()` above.\n\t\t\t\tif (newDom != null) {\n\t\t\t\t\tif (firstChildDom == null) {\n\t\t\t\t\t\tfirstChildDom = newDom;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet nextDom;\n\t\t\t\t\tif (childVNode._nextDom !== undefined) {\n\t\t\t\t\t\t// Only Fragments or components that return Fragment like VNodes will\n\t\t\t\t\t\t// have a non-undefined _nextDom. Continue the diff from the sibling\n\t\t\t\t\t\t// of last DOM child of this child VNode\n\t\t\t\t\t\tnextDom = childVNode._nextDom;\n\n\t\t\t\t\t\t// Eagerly cleanup _nextDom. We don't need to persist the value because\n\t\t\t\t\t\t// it is only used by `diffChildren` to determine where to resume the diff after\n\t\t\t\t\t\t// diffing Components and Fragments. Once we store it the nextDOM local var, we\n\t\t\t\t\t\t// can clean up the property\n\t\t\t\t\t\tchildVNode._nextDom = undefined;\n\t\t\t\t\t} else if (\n\t\t\t\t\t\texcessDomChildren == oldVNode ||\n\t\t\t\t\t\tnewDom != oldDom ||\n\t\t\t\t\t\tnewDom.parentNode == null\n\t\t\t\t\t) {\n\t\t\t\t\t\t// NOTE: excessDomChildren==oldVNode above:\n\t\t\t\t\t\t// This is a compression of excessDomChildren==null && oldVNode==null!\n\t\t\t\t\t\t// The values only have the same type when `null`.\n\n\t\t\t\t\t\touter: if (oldDom == null || oldDom.parentNode !== parentDom) {\n\t\t\t\t\t\t\tparentDom.appendChild(newDom);\n\t\t\t\t\t\t\tnextDom = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// `j<oldChildrenLength; j+=2` is an alternative to `j++<oldChildrenLength/2`\n\t\t\t\t\t\t\tfor (\n\t\t\t\t\t\t\t\tsibDom = oldDom, j = 0;\n\t\t\t\t\t\t\t\t(sibDom = sibDom.nextSibling) && j < oldChildrenLength;\n\t\t\t\t\t\t\t\tj += 2\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tif (sibDom == newDom) {\n\t\t\t\t\t\t\t\t\tbreak outer;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tparentDom.insertBefore(newDom, oldDom);\n\t\t\t\t\t\t\tnextDom = oldDom;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Browsers will infer an option's `value` from `textContent` when\n\t\t\t\t\t\t// no value is present. This essentially bypasses our code to set it\n\t\t\t\t\t\t// later in `diff()`. It works fine in all browsers except for IE11\n\t\t\t\t\t\t// where it breaks setting `select.value`. There it will be always set\n\t\t\t\t\t\t// to an empty string. Re-applying an options value will fix that, so\n\t\t\t\t\t\t// there are probably some internal data structures that aren't\n\t\t\t\t\t\t// updated properly.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// To fix it we make sure to reset the inferred value, so that our own\n\t\t\t\t\t\t// value check in `diff()` won't be skipped.\n\t\t\t\t\t\tif (newParentVNode.type == 'option') {\n\t\t\t\t\t\t\tparentDom.value = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// If we have pre-calculated the nextDOM node, use it. Else calculate it now\n\t\t\t\t\t// Strictly check for `undefined` here cuz `null` is a valid value of `nextDom`.\n\t\t\t\t\t// See more detail in create-element.js:createVNode\n\t\t\t\t\tif (nextDom !== undefined) {\n\t\t\t\t\t\toldDom = nextDom;\n\t\t\t\t\t} else {\n\t\t\t\t\t\toldDom = newDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (typeof newParentVNode.type == 'function') {\n\t\t\t\t\t\t// Because the newParentVNode is Fragment-like, we need to set it's\n\t\t\t\t\t\t// _nextDom property to the nextSibling of its last child DOM node.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// `oldDom` contains the correct value here because if the last child\n\t\t\t\t\t\t// is a Fragment-like, then oldDom has already been set to that child's _nextDom.\n\t\t\t\t\t\t// If the last child is a DOM VNode, then oldDom will be set to that DOM\n\t\t\t\t\t\t// node's nextSibling.\n\n\t\t\t\t\t\tnewParentVNode._nextDom = oldDom;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ti++;\n\t\t\treturn childVNode;\n\t\t}\n\t);\n\n\tnewParentVNode._dom = firstChildDom;\n\n\t// Remove children that are not part of any vnode.\n\tif (excessDomChildren != null && typeof newParentVNode.type !== 'function') {\n\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\tif (excessDomChildren[i] != null) removeNode(excessDomChildren[i]);\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any.\n\tfor (i = oldChildrenLength; i--; ) {\n\t\tif (oldChildren[i] != null) unmount(oldChildren[i], oldChildren[i]);\n\t}\n\n\t// Set refs only after unmount\n\tif (refs) {\n\t\tfor (i = 0; i < refs.length; i++) {\n\t\t\tapplyRef(refs[i], refs[++i], refs[++i]);\n\t\t}\n\t}\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {import('../index').ComponentChildren} children The unflattened\n * children of a virtual node\n * @param {(vnode: import('../internal').VNode) => import('../internal').VNode} [callback]\n * A function to invoke for each child before it is added to the flattened list.\n * @param {Array<import('../internal').VNode | string | number>} [flattened] An flat array of children to modify\n * @returns {import('../internal').VNode[]}\n */\nexport function toChildArray(children, callback, flattened) {\n\tif (flattened == null) flattened = [];\n\n\tif (children == null || typeof children === 'boolean') {\n\t\tif (callback) flattened.push(callback(null));\n\t} else if (Array.isArray(children)) {\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\ttoChildArray(children[i], callback, flattened);\n\t\t}\n\t} else if (!callback) {\n\t\tflattened.push(children);\n\t} else if (typeof children === 'string' || typeof children === 'number') {\n\t\tflattened.push(callback(createVNode(null, children, null, null)));\n\t} else if (children._dom != null || children._component != null) {\n\t\tflattened.push(\n\t\t\tcallback(createVNode(children.type, children.props, children.key, null))\n\t\t);\n\t} else {\n\t\tflattened.push(callback(children));\n\t}\n\n\treturn flattened;\n}\n","import { IS_NON_DIMENSIONAL } from '../constants';\nimport options from '../options';\n\n/**\n * Diff the old and new properties of a VNode and apply changes to the DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to apply\n * changes to\n * @param {object} newProps The new props\n * @param {object} oldProps The old props\n * @param {boolean} isSvg Whether or not this node is an SVG node\n * @param {boolean} hydrate Whether or not we are in hydration mode\n */\nexport function diffProps(dom, newProps, oldProps, isSvg, hydrate) {\n\tlet i;\n\n\tfor (i in oldProps) {\n\t\tif (!(i in newProps)) {\n\t\t\tsetProperty(dom, i, null, oldProps[i], isSvg);\n\t\t}\n\t}\n\n\tfor (i in newProps) {\n\t\tif (\n\t\t\t(!hydrate || typeof newProps[i] == 'function') &&\n\t\t\ti !== 'value' &&\n\t\t\ti !== 'checked' &&\n\t\t\toldProps[i] !== newProps[i]\n\t\t) {\n\t\t\tsetProperty(dom, i, newProps[i], oldProps[i], isSvg);\n\t\t}\n\t}\n}\n\nfunction setStyle(style, key, value) {\n\tif (key[0] === '-') {\n\t\tstyle.setProperty(key, value);\n\t} else if (\n\t\ttypeof value === 'number' &&\n\t\tIS_NON_DIMENSIONAL.test(key) === false\n\t) {\n\t\tstyle[key] = value + 'px';\n\t} else if (value == null) {\n\t\tstyle[key] = '';\n\t} else {\n\t\tstyle[key] = value;\n\t}\n}\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node or not\n */\nfunction setProperty(dom, name, value, oldValue, isSvg) {\n\tif (isSvg) {\n\t\tif (name === 'className') {\n\t\t\tname = 'class';\n\t\t}\n\t} else if (name === 'class') {\n\t\tname = 'className';\n\t}\n\n\tif (name === 'key' || name === 'children') {\n\t} else if (name === 'style') {\n\t\tconst s = dom.style;\n\n\t\tif (typeof value === 'string') {\n\t\t\ts.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue === 'string') {\n\t\t\t\ts.cssText = '';\n\t\t\t\toldValue = null;\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (let i in oldValue) {\n\t\t\t\t\tif (!(value && i in value)) {\n\t\t\t\t\t\tsetStyle(s, i, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (let i in value) {\n\t\t\t\t\tif (!oldValue || value[i] !== oldValue[i]) {\n\t\t\t\t\t\tsetStyle(s, i, value[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] === 'o' && name[1] === 'n') {\n\t\tlet useCapture = name !== (name = name.replace(/Capture$/, ''));\n\t\tlet nameLower = name.toLowerCase();\n\t\tname = (nameLower in dom ? nameLower : name).slice(2);\n\n\t\tif (value) {\n\t\t\tif (!oldValue) dom.addEventListener(name, eventProxy, useCapture);\n\t\t\t(dom._listeners || (dom._listeners = {}))[name] = value;\n\t\t} else {\n\t\t\tdom.removeEventListener(name, eventProxy, useCapture);\n\t\t}\n\t} else if (\n\t\tname !== 'list' &&\n\t\tname !== 'tagName' &&\n\t\t// HTMLButtonElement.form and HTMLInputElement.form are read-only but can be set using\n\t\t// setAttribute\n\t\tname !== 'form' &&\n\t\tname !== 'type' &&\n\t\tname !== 'size' &&\n\t\t!isSvg &&\n\t\tname in dom\n\t) {\n\t\tdom[name] = value == null ? '' : value;\n\t} else if (\n\t\ttypeof value !== 'function' &&\n\t\tname !== 'dangerouslySetInnerHTML'\n\t) {\n\t\tif (name !== (name = name.replace(/^xlink:?/, ''))) {\n\t\t\tif (value == null || value === false) {\n\t\t\t\tdom.removeAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tdom.setAttributeNS(\n\t\t\t\t\t'http://www.w3.org/1999/xlink',\n\t\t\t\t\tname.toLowerCase(),\n\t\t\t\t\tvalue\n\t\t\t\t);\n\t\t\t}\n\t\t} else if (\n\t\t\tvalue == null ||\n\t\t\t(value === false &&\n\t\t\t\t// ARIA-attributes have a different notion of boolean values.\n\t\t\t\t// The value `false` is different from the attribute not\n\t\t\t\t// existing on the DOM, so we can't remove it. For non-boolean\n\t\t\t\t// ARIA-attributes we could treat false as a removal, but the\n\t\t\t\t// amount of exceptions would cost us too many bytes. On top of\n\t\t\t\t// that other VDOM frameworks also always stringify `false`.\n\t\t\t\t!/^ar/.test(name))\n\t\t) {\n\t\t\tdom.removeAttribute(name);\n\t\t} else {\n\t\t\tdom.setAttribute(name, value);\n\t\t}\n\t}\n}\n\n/**\n * Proxy an event to hooked event handlers\n * @param {Event} e The event object from the browser\n * @private\n */\nfunction eventProxy(e) {\n\tthis._listeners[e.type](options.event ? options.event(e) : e);\n}\n","import { EMPTY_OBJ, EMPTY_ARR } from '../constants';\nimport { Component } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { diffProps } from './props';\nimport { assign, removeNode } from '../util';\nimport options from '../options';\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {import('../internal').PreactElement} parentDom The parent of the DOM element\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this element is an SVG node\n * @param {Array<import('../internal').PreactElement>} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {Element | Text} oldDom The current attached DOM\n * element any new dom elements should be placed around. Likely `null` on first\n * render (except when hydrating). Can be a sibling DOM element when diffing\n * Fragments that have siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} [isHydrating] Whether or not we are in hydration\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating\n) {\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor !== undefined) return null;\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\ttry {\n\t\touter: if (typeof newType === 'function') {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && context[tmp._id];\n\t\t\tlet cctx = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: context;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif ('prototype' in newType && newType.prototype.render) {\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, cctx); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\tnewVNode._component = c = new Component(newProps, cctx);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tc.props = newProps;\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc.context = cctx;\n\t\t\t\tc._context = context;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (c._nextState == null) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\t\t\tif (newType.getDerivedStateFromProps != null) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tc.componentWillMount != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidMount != null) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tnewType.getDerivedStateFromProps == null &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != null\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, cctx);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!c._force &&\n\t\t\t\t\tc.shouldComponentUpdate != null &&\n\t\t\t\t\tc.shouldComponentUpdate(newProps, c._nextState, cctx) === false\n\t\t\t\t) {\n\t\t\t\t\tc.props = newProps;\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tc._vnode = newVNode;\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\t\t\t\t\tfor (tmp = 0; tmp < newVNode._children.length; tmp++) {\n\t\t\t\t\t\tif (newVNode._children[tmp]) {\n\t\t\t\t\t\t\tnewVNode._children[tmp]._parent = newVNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != null) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, cctx);\n\t\t\t\t}\n\n\t\t\t\tif (c.componentDidUpdate != null) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = cctx;\n\t\t\tc.props = newProps;\n\t\t\tc.state = c._nextState;\n\n\t\t\tif ((tmp = options._render)) tmp(newVNode);\n\n\t\t\tc._dirty = false;\n\t\t\tc._vnode = newVNode;\n\t\t\tc._parentDom = parentDom;\n\n\t\t\ttmp = c.render(c.props, c.state, c.context);\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != null && tmp.type == Fragment && tmp.key == null;\n\t\t\tnewVNode._children = isTopLevelFragment ? tmp.props.children : tmp;\n\n\t\t\tif (c.getChildContext != null) {\n\t\t\t\tcontext = assign(assign({}, context), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (!isNew && c.getSnapshotBeforeUpdate != null) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tdiffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = null;\n\t\t\t}\n\n\t\t\tc._force = false;\n\t\t} else {\n\t\t\tnewVNode._dom = diffElementNodes(\n\t\t\t\toldVNode._dom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tisSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\tif ((tmp = options.diffed)) tmp(newVNode);\n\t} catch (e) {\n\t\toptions._catchError(e, newVNode, oldVNode);\n\t}\n\n\treturn newVNode._dom;\n}\n\n/**\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {import('../internal').VNode} root\n */\nexport function commitRoot(commitQueue, root) {\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {import('../internal').PreactElement} dom The DOM element representing\n * the virtual nodes being diffed\n * @param {import('../internal').VNode} newVNode The new virtual node\n * @param {import('../internal').VNode} oldVNode The old virtual node\n * @param {object} context The current context object\n * @param {boolean} isSvg Whether or not this DOM node is an SVG node\n * @param {*} excessDomChildren\n * @param {Array<import('../internal').Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @returns {import('../internal').PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tcontext,\n\tisSvg,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating\n) {\n\tlet i;\n\tlet oldProps = oldVNode.props;\n\tlet newProps = newVNode.props;\n\n\t// Tracks entering and exiting SVG namespace when descending through the tree.\n\tisSvg = newVNode.type === 'svg' || isSvg;\n\n\tif (dom == null && excessDomChildren != null) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tconst child = excessDomChildren[i];\n\n\t\t\tif (\n\t\t\t\tchild != null &&\n\t\t\t\t(newVNode.type === null\n\t\t\t\t\t? child.nodeType === 3\n\t\t\t\t\t: child.localName === newVNode.type)\n\t\t\t) {\n\t\t\t\tdom = child;\n\t\t\t\texcessDomChildren[i] = null;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == null) {\n\t\tif (newVNode.type === null) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = isSvg\n\t\t\t? document.createElementNS('http://www.w3.org/2000/svg', newVNode.type)\n\t\t\t: document.createElement(\n\t\t\t\t\tnewVNode.type,\n\t\t\t\t\tnewProps.is && { is: newProps.is }\n\t\t\t  );\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = null;\n\t}\n\n\tif (newVNode.type === null) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren[excessDomChildren.indexOf(dom)] = null;\n\t\t}\n\n\t\tif (oldProps !== newProps && dom.data != newProps) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else if (newVNode !== oldVNode) {\n\t\tif (excessDomChildren != null) {\n\t\t\texcessDomChildren[excessDomChildren.indexOf(dom)] = null;\n\t\t\texcessDomChildren = EMPTY_ARR.slice.call(dom.childNodes);\n\t\t}\n\n\t\toldProps = oldVNode.props || EMPTY_OBJ;\n\n\t\tlet oldHtml = oldProps.dangerouslySetInnerHTML;\n\t\tlet newHtml = newProps.dangerouslySetInnerHTML;\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tif (!isHydrating) {\n\t\t\tif (oldProps === EMPTY_OBJ) {\n\t\t\t\toldProps = {};\n\t\t\t\tfor (let i = 0; i < dom.attributes.length; i++) {\n\t\t\t\t\toldProps[dom.attributes[i].name] = dom.attributes[i].value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newHtml || oldHtml) {\n\t\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\t\tif (!newHtml || !oldHtml || newHtml.__html != oldHtml.__html) {\n\t\t\t\t\tdom.innerHTML = (newHtml && newHtml.__html) || '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdiffProps(dom, newProps, oldProps, isSvg, isHydrating);\n\n\t\tnewVNode._children = newVNode.props.children;\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (!newHtml) {\n\t\t\tdiffChildren(\n\t\t\t\tdom,\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tcontext,\n\t\t\t\tnewVNode.type === 'foreignObject' ? false : isSvg,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\tEMPTY_OBJ,\n\t\t\t\tisHydrating\n\t\t\t);\n\t\t}\n\n\t\t// (as above, don't diff props during hydration)\n\t\tif (!isHydrating) {\n\t\t\tif (\n\t\t\t\t'value' in newProps &&\n\t\t\t\tnewProps.value !== undefined &&\n\t\t\t\tnewProps.value !== dom.value\n\t\t\t) {\n\t\t\t\tdom.value = newProps.value == null ? '' : newProps.value;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t'checked' in newProps &&\n\t\t\t\tnewProps.checked !== undefined &&\n\t\t\t\tnewProps.checked !== dom.checked\n\t\t\t) {\n\t\t\t\tdom.checked = newProps.checked;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {object|function} ref\n * @param {any} value\n * @param {import('../internal').VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') ref(value);\n\t\telse ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {import('../internal').VNode} vnode The virtual node to unmount\n * @param {import('../internal').VNode} parentVNode The parent of the VNode that\n * initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current === vnode._dom) applyRef(r, null, parentVNode);\n\t}\n\n\tlet dom;\n\tif (!skipRemove && typeof vnode.type !== 'function') {\n\t\tskipRemove = (dom = vnode._dom) != null;\n\t}\n\n\t// Must be set to `undefined` to properly clean up `_nextDom`\n\t// for which `null` is a valid value. See comment in `create-element.js`\n\tvnode._dom = vnode._nextDom = undefined;\n\n\tif ((r = vnode._component) != null) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = null;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) unmount(r[i], parentVNode, skipRemove);\n\t\t}\n\t}\n\n\tif (dom != null) removeNode(dom);\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n","import { assign } from './util';\nimport { EMPTY_ARR } from './constants';\nimport { createVNode } from './create-element';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./index').ComponentChildren>} rest Any additional arguments will be used as replacement children.\n */\nexport function cloneElement(vnode, props) {\n\tprops = assign(assign({}, vnode.props), props);\n\tif (arguments.length > 2) props.children = EMPTY_ARR.slice.call(arguments, 2);\n\treturn createVNode(\n\t\tvnode.type,\n\t\tprops,\n\t\tprops.key || vnode.key,\n\t\tprops.ref || vnode.ref\n\t);\n}\n","import { enqueueRender } from '../component';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw\n * the error that was caught (except for unmounting when this parameter\n * is the highest parent that was being unmounted)\n */\nexport function _catchError(error, vnode) {\n\t/** @type {import('../internal').Component} */\n\tlet component, hasCaught;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tif (\n\t\t\t\t\tcomponent.constructor &&\n\t\t\t\t\tcomponent.constructor.getDerivedStateFromError != null\n\t\t\t\t) {\n\t\t\t\t\thasCaught = true;\n\t\t\t\t\tcomponent.setState(\n\t\t\t\t\t\tcomponent.constructor.getDerivedStateFromError(error)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != null) {\n\t\t\t\t\thasCaught = true;\n\t\t\t\t\tcomponent.componentDidCatch(error);\n\t\t\t\t}\n\n\t\t\t\tif (hasCaught)\n\t\t\t\t\treturn enqueueRender((component._pendingError = component));\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n","\n// [1,2,3,4,5,6,7,8,9,10,11]\n// -> [[1,2,3,4,5], [6,7,8,9,10], [11]]\nArray.prototype.toGroups = function toGroups() {\n\tlet ar = []\n\tfor (let i = 0; i < this.length; i++) {\n\t\tif (i % 5 === 0) ar.push([])\n\t\tar[ar.length - 1].push(this[i])\n\t}\n\tif (ar.length === 0) return [[]]\n\telse return ar\n}\n\n// 'a b c d e f' -> ['a','b','c','d','e','f'] -> [['a','b','c','d','e'], ['f']]\nString.prototype.parseProductions = function parseProductions() {\n\treturn this.split(/\\s+/m).filter(a => a).toGroups()\n}\n\n\n// Array.prototype.shuffle = function shuffle(times) {\n//     for (let i = 0; i<times; i++) {\n//         let first = Math.floor( Math.random() * this.length )\n//         let second = Math.floor( Math.random() * this.length )\n\n//         let temp = this[first]\n//         this[first] = this[second]\n//         this[second] = temp\n//     }\n//     return this\n// }\n\n\nArray.prototype.swap = function (index1, index2) {\n\tconst temp = this[index1];\n\tthis[index1] = this[index2];\n\tthis[index2] = temp;\n\n\treturn this;\n};\n\n// Fisher-Yates shuffle\nArray.prototype.shuffle = function () {\n\tfor (let i = this.length - 1; i >= 1; i--) {\n\t\tconst j = Math.floor(Math.random() * (i + 1));\n\t\tthis.swap(i, j);\n\t}\n\n\treturn this;\n};\n\nArray.prototype.pickRandom = function () {\n\treturn this[Math.floor(Math.random() * this.length)];\n};\n\nArray.prototype.isSameWith = function (arr) {\n\tif (this.length !== arr.length) {\n\t\treturn false;\n\t}\n\tfor (let i = 0; i < this.length; i++) {\n\t\tif (this[i] !== arr[i]) {\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n};\n","\nimport {createContext} from 'preact'\n\nlet context = createContext()\n// this will be used to pass App's local state and state setter down the tree.\n// this will allow any component to read and update the App's state.\n// throughout this code, global state will be abbreviated as g, and its setter as gg.\n\nlet languages = ['EN', 'TR']\n// this will be displayed on the header\n\nlet levelCount = 10\n// this is needed by LevelPage to display correct amount of levels\n\nlet currentAppVersion = '1.2'\n// app's version will always be saved on localStorage.version. This is for integrity\n\n// if current version doesnt match the saved version (last version), make these changes\nif ( +window.localStorage.version !== currentAppVersion) {\n    // changes\n\n    delete window.localStorage.text\n    delete window.localStorage.language\n\n    // update to current version\n    window.localStorage.version = currentAppVersion\n}\n\nlet urlPrefix = '/turing'\n// urlPrefix makes it seamless to run the app on both / and on /turing. It can run on any other url too.\n// please see the important note on main.js.\n// use '' on local, '/turing' on github pages.\n\n\nif ( location.hash ) {\n    history.replaceState({}, '', `${location.pathname}${location.hash.substring(1)}`)\n}\n// this piece of code is important to make it possible to start the app from any url, not just /.\n// for example, you send url denizbasgoren.github.io/turing/2 to your friend to invite them to solve the problem.\n// here the path is /turing/2. What github pages does is, check whether such a file exists or not.\n// in this case, such a file doesnt exist. these are just params. Github pages will redirect to 404.html\n// Note that even though it redirects to 404.html, path remains the same ( /turing/2 ).\n// The js code in 404.html changes /turing/2 to /turing#/2.\n// That is, urlPrefix + params to urlPrefix + # + params.\n// This trick allows to have params untouched, while the app will be redirected to /turing.\n// This is the only way to redirect to the main app.\n// Other solutions would be to use querystrings, which are not employed here, due to bad appearance.\n// Once the 404.html redirects to urlPrefix + # + params, main app sees the path through location.pathname,\n// and it changes it once again to urlPrefix + params, but this time, without triggering redirection.\n// this is possible with history api's replacestate func.\n\n\nlet init = {\n    language: window.localStorage.language,\n    text: window.localStorage.text,\n    languageUpdateNeeded: false,\n    lighting: window.localStorage.lighting || 'dark', // light dark\n    wonLevels: window.localStorage.wonLevels,\n    prodMap: {},\n    initialState: '',\n    errorMsgInd: '',\n}\n// this is the initial global state. This will be available on any component which uses the line\n// let [g,gg] = useContext(context)\n// g = global state, gg = setter\n\n\n\nif (!init.language || !init.text) {\n    init.languageUpdateNeeded = true\n    init.language = languages[ 0 ]\n    init.text = []\n}\nelse {\n    init.text = JSON.parse( init.text )\n}\n// since the app is multilingual, we avoid downloading all the languages on startup. Instead,\n// we keep them under /text/ and fetch them as requested. Once downloaded, we keep the text in\n// localStorage.text, and the lang under localStorage.language\n// this is to save data, and for offline performance of the app.\n// if the lang was not specified, set default to EN.\n// text is an array of strings, which will be kept under g.text.\n\nif (!init.wonLevels) {\n    init.wonLevels = Array( levelCount ).fill(false)\n    window.localStorage.wonLevels = JSON.stringify( init.wonLevels )\n}\nelse {\n    init.wonLevels = JSON.parse( init.wonLevels )\n}\n// wonLevels has is an array of levelCount x booleans. This is also lept in localstorage and also in state,\n// so that user sees which levels have been won.\n\n\nif (!window.localStorage.raw) {\n    window.localStorage.raw = JSON.stringify(Array(levelCount).fill('') )\n}\n// raw denotes \"raw input\". Raw for every level is kept under localstorage, as well as on g.\n// It is an array of strings, one for every level. Index starts at 0.\n// raw input is the instructions entered in the textarea in the level pages.\n\nif (!window.localStorage.initialState) {\n    window.localStorage.initialState = JSON.stringify(Array(levelCount).fill(''))\n}\n// initialState is another part of the input\n\nexport {\n    context,\n    languages,\n    levelCount,\n    currentAppVersion,\n    urlPrefix,\n    init\n}\n","import { options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\n\nconst RAF_TIMEOUT = 100;\nlet prevRaf;\n\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tif (currentComponent.__hooks) {\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\tcurrentComponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\tcurrentComponent.__hooks._pendingEffects = [];\n\t}\n};\n\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\tif (hooks._pendingEffects.length) {\n\t\t\tafterPaint(afterPaintEffects.push(c));\n\t\t}\n\t}\n};\n\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (!c) return;\n\n\tconst hooks = c.__hooks;\n\tif (hooks) {\n\t\ttry {\n\t\t\thooks._list.forEach(hook => hook._cleanup && hook._cleanup());\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @returns {import('./internal').HookState}\n */\nfunction getHookState(index) {\n\tif (options._hook) options._hook(currentComponent);\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = { _list: [], _pendingEffects: [] });\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\treturn hooks._list[index];\n}\n\n/**\n * @param {import('./index').StateUpdater<any>} initialState\n */\nexport function useState(initialState) {\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @param {import('./index').Reducer<any, any>} reducer\n * @param {import('./index').StateUpdater<any>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ any, (state: any) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++);\n\tif (!hookState._component) {\n\t\thookState._component = currentComponent;\n\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst nextValue = reducer(hookState._value[0], action);\n\t\t\t\tif (hookState._value[0] !== nextValue) {\n\t\t\t\t\thookState._value[0] = nextValue;\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\treturn hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {any[]} args\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._args = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\nexport function useRef(initialValue) {\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {any[]} args\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref === 'function') ref(createHandle());\n\t\t\telse if (ref) ref.current = createHandle();\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @param {() => any} factory\n * @param {any[]} args\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState} */\n\tconst state = getHookState(currentIndex++);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t\treturn (state._value = factory());\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {any[]} args\n */\nexport function useCallback(callback, args) {\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\tif (!provider) return context._defaultValue;\n\tconst state = getHookState(currentIndex++);\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(formatter ? formatter(value) : value);\n\t}\n}\n\nexport function useErrorBoundary(cb) {\n\tconst state = getHookState(currentIndex++);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = err => {\n\t\t\tif (state._value) state._value(err);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tafterPaintEffects.some(component => {\n\t\tif (component._parentDom) {\n\t\t\ttry {\n\t\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, component._vnode);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t});\n\tafterPaintEffects = [];\n}\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tcancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (typeof window !== 'undefined') {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeCleanup(hook) {\n\tif (hook._cleanup) hook._cleanup();\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n */\nfunction invokeEffect(hook) {\n\tconst result = hook._value();\n\tif (typeof result === 'function') hook._cleanup = result;\n}\n\n/**\n * @param {any[]} oldArgs\n * @param {any[]} newArgs\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn !oldArgs || newArgs.some((arg, index) => arg !== oldArgs[index]);\n}\n\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f === 'function' ? f(arg) : f;\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import {\n\tIProduce,\n\tIProduceWithPatches,\n\tImmer,\n\tDraft,\n\tImmutable\n} from \"./internal\"\n\nexport {\n\tDraft,\n\tImmutable,\n\tPatch,\n\tPatchListener,\n\toriginal,\n\tisDraft,\n\tisDraftable,\n\tNOTHING as nothing,\n\tDRAFTABLE as immerable\n} from \"./internal\"\n\nconst immer = new Immer()\n\n/**\n * The `produce` function takes a value and a \"recipe function\" (whose\n * return value often depends on the base state). The recipe function is\n * free to mutate its first argument however it wants. All mutations are\n * only ever applied to a __copy__ of the base state.\n *\n * Pass only a function to create a \"curried producer\" which relieves you\n * from passing the recipe function every time.\n *\n * Only plain objects and arrays are made mutable. All other objects are\n * considered uncopyable.\n *\n * Note: This function is __bound__ to its `Immer` instance.\n *\n * @param {any} base - the initial state\n * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n * @param {Function} patchListener - optional function that will be called with all the patches produced here\n * @returns {any} a new state, or the initial state if nothing was modified\n */\nexport const produce: IProduce = immer.produce\nexport default produce\n\n/**\n * Like `produce`, but `produceWithPatches` always returns a tuple\n * [nextState, patches, inversePatches] (instead of just the next state)\n */\nexport const produceWithPatches: IProduceWithPatches = immer.produceWithPatches.bind(\n\timmer\n)\n\n/**\n * Pass true to automatically freeze all copies created by Immer.\n *\n * By default, auto-freezing is disabled in production.\n */\nexport const setAutoFreeze = immer.setAutoFreeze.bind(immer)\n\n/**\n * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n * always faster than using ES5 proxies.\n *\n * By default, feature detection is used, so calling this is rarely necessary.\n */\nexport const setUseProxies = immer.setUseProxies.bind(immer)\n\n/**\n * Apply an array of Immer patches to the first argument.\n *\n * This function is a producer, which means copy-on-write is in effect.\n */\nexport const applyPatches = immer.applyPatches.bind(immer)\n\n/**\n * Create an Immer draft from the given base state, which may be a draft itself.\n * The draft can be modified until you finalize it with the `finishDraft` function.\n */\nexport const createDraft = immer.createDraft.bind(immer)\n\n/**\n * Finalize an Immer draft from a `createDraft` call, returning the base state\n * (if no changes were made) or a modified copy. The draft must *not* be\n * mutated afterwards.\n *\n * Pass a function as the 2nd argument to generate Immer patches based on the\n * changes that were made.\n */\nexport const finishDraft = immer.finishDraft.bind(immer)\n\n/**\n * This function is actually a no-op, but can be used to cast an immutable type\n * to an draft type and make TypeScript happy\n *\n * @param value\n */\nexport function castDraft<T>(value: T): Draft<T> {\n\treturn value as any\n}\n\n/**\n * This function is actually a no-op, but can be used to cast a mutable type\n * to an immutable type and make TypeScript happy\n * @param value\n */\nexport function castImmutable<T>(value: T): Immutable<T> {\n\treturn value as any\n}\n\nexport {Immer}\n","// Should be no imports here!\n\n// SOme things that should be evaluated before all else...\nconst hasSymbol = typeof Symbol !== \"undefined\"\nexport const hasMap = typeof Map !== \"undefined\"\nexport const hasSet = typeof Set !== \"undefined\"\n\n/**\n * The sentinel value returned by producers to replace the draft with undefined.\n */\nexport const NOTHING: Nothing = hasSymbol\n\t? Symbol(\"immer-nothing\")\n\t: ({[\"immer-nothing\"]: true} as any)\n\n/**\n * To let Immer treat your class instances as plain immutable objects\n * (albeit with a custom prototype), you must define either an instance property\n * or a static property on each of your custom classes.\n *\n * Otherwise, your class instance will never be drafted, which means it won't be\n * safe to mutate in a produce callback.\n */\nexport const DRAFTABLE: unique symbol = hasSymbol\n\t? Symbol(\"immer-draftable\")\n\t: (\"__$immer_draftable\" as any)\n\nexport const DRAFT_STATE: unique symbol = hasSymbol\n\t? Symbol(\"immer-state\")\n\t: (\"__$immer_state\" as any)\n\nexport const iteratorSymbol: typeof Symbol.iterator = hasSymbol\n\t? Symbol.iterator\n\t: (\"@@iterator\" as any)\n\n/** Use a class type for `nothing` so its type is unique */\nexport class Nothing {\n\t// This lets us do `Exclude<T, Nothing>`\n\t// @ts-ignore\n\tprivate _!: unique symbol\n}\n","import {\n\tSetState,\n\tImmerScope,\n\tProxyObjectState,\n\tProxyArrayState,\n\tES5ObjectState,\n\tES5ArrayState,\n\tMapState,\n\tDRAFT_STATE\n} from \"./internal\"\n\nexport type Objectish = AnyObject | AnyArray | AnyMap | AnySet\nexport type ObjectishNoSet = AnyObject | AnyArray | AnyMap\n\nexport type AnyObject = {[key: string]: any}\nexport type AnyArray = Array<any>\nexport type AnySet = Set<any>\nexport type AnyMap = Map<any, any>\nexport enum Archtype {\n\tObject,\n\tArray,\n\tMap,\n\tSet\n}\n\nexport enum ProxyType {\n\tProxyObject,\n\tProxyArray,\n\tES5Object,\n\tES5Array,\n\tMap,\n\tSet\n}\n\nexport interface ImmerBaseState {\n\tparent?: ImmerState\n\tscope: ImmerScope\n\tmodified: boolean\n\tfinalized: boolean\n\tisManual: boolean\n}\n\nexport type ImmerState =\n\t| ProxyObjectState\n\t| ProxyArrayState\n\t| ES5ObjectState\n\t| ES5ArrayState\n\t| MapState\n\t| SetState\n\n// The _internal_ type used for drafts (not to be confused with Draft, which is public facing)\nexport type Drafted<Base = any, T extends ImmerState = ImmerState> = {\n\t[DRAFT_STATE]: T\n} & Base\n","/* istanbul ignore next */\nvar extendStatics = function(d: any, b: any): any {\n\textendStatics =\n\t\tObject.setPrototypeOf ||\n\t\t({__proto__: []} instanceof Array &&\n\t\t\tfunction(d, b) {\n\t\t\t\td.__proto__ = b\n\t\t\t}) ||\n\t\tfunction(d, b) {\n\t\t\tfor (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]\n\t\t}\n\treturn extendStatics(d, b)\n}\n\n// Ugly hack to resolve #502 and inherit built in Map / Set\nexport function __extends(d: any, b: any): any {\n\textendStatics(d, b)\n\tfunction __(this: any): any {\n\t\tthis.constructor = d\n\t}\n\td.prototype =\n\t\t// @ts-ignore\n\t\t((__.prototype = b.prototype), new __())\n}\n","import {\n\tDRAFT_STATE,\n\tDRAFTABLE,\n\thasSet,\n\tObjectish,\n\tDrafted,\n\tAnyObject,\n\tAnyArray,\n\tAnyMap,\n\tAnySet,\n\tImmerState,\n\tProxyType,\n\tArchtype,\n\thasMap\n} from \"./internal\"\n\n/** Returns true if the given value is an Immer draft */\nexport function isDraft(value: any): boolean {\n\treturn !!value && !!value[DRAFT_STATE]\n}\n\n/** Returns true if the given value can be drafted by Immer */\nexport function isDraftable(value: any): boolean {\n\tif (!value) return false\n\treturn (\n\t\tisPlainObject(value) ||\n\t\tArray.isArray(value) ||\n\t\t!!value[DRAFTABLE] ||\n\t\t!!value.constructor[DRAFTABLE] ||\n\t\tisMap(value) ||\n\t\tisSet(value)\n\t)\n}\n\nexport function isPlainObject(value: any): boolean {\n\tif (!value || typeof value !== \"object\") return false\n\tconst proto = Object.getPrototypeOf(value)\n\treturn !proto || proto === Object.prototype\n}\n\n/** Get the underlying object that is represented by the given draft */\nexport function original<T>(value: T): T | undefined\nexport function original(value: Drafted<any>): any {\n\tif (value && value[DRAFT_STATE]) {\n\t\treturn value[DRAFT_STATE].base as any\n\t}\n\t// otherwise return undefined\n}\n\nexport const ownKeys: (target: AnyObject) => PropertyKey[] =\n\ttypeof Reflect !== \"undefined\" && Reflect.ownKeys\n\t\t? Reflect.ownKeys\n\t\t: typeof Object.getOwnPropertySymbols !== \"undefined\"\n\t\t? obj =>\n\t\t\t\tObject.getOwnPropertyNames(obj).concat(\n\t\t\t\t\tObject.getOwnPropertySymbols(obj) as any\n\t\t\t\t)\n\t\t: /* istanbul ignore next */ Object.getOwnPropertyNames\n\nexport function each<T extends Objectish>(\n\tobj: T,\n\titer: (key: string | number, value: any, source: T) => void\n): void\nexport function each(obj: any, iter: any) {\n\tif (getArchtype(obj) === Archtype.Object) {\n\t\townKeys(obj).forEach(key => iter(key, obj[key], obj))\n\t} else {\n\t\tobj.forEach((entry: any, index: any) => iter(index, entry, obj))\n\t}\n}\n\nexport function isEnumerable(base: AnyObject, prop: PropertyKey): boolean {\n\tconst desc = Object.getOwnPropertyDescriptor(base, prop)\n\treturn desc && desc.enumerable ? true : false\n}\n\nexport function getArchtype(thing: any): Archtype {\n\t/* istanbul ignore next */\n\tif (!thing) die()\n\tif (thing[DRAFT_STATE]) {\n\t\tswitch ((thing as Drafted)[DRAFT_STATE].type) {\n\t\t\tcase ProxyType.ES5Object:\n\t\t\tcase ProxyType.ProxyObject:\n\t\t\t\treturn Archtype.Object\n\t\t\tcase ProxyType.ES5Array:\n\t\t\tcase ProxyType.ProxyArray:\n\t\t\t\treturn Archtype.Array\n\t\t\tcase ProxyType.Map:\n\t\t\t\treturn Archtype.Map\n\t\t\tcase ProxyType.Set:\n\t\t\t\treturn Archtype.Set\n\t\t}\n\t}\n\treturn Array.isArray(thing)\n\t\t? Archtype.Array\n\t\t: isMap(thing)\n\t\t? Archtype.Map\n\t\t: isSet(thing)\n\t\t? Archtype.Set\n\t\t: Archtype.Object\n}\n\nexport function has(thing: any, prop: PropertyKey): boolean {\n\treturn getArchtype(thing) === Archtype.Map\n\t\t? thing.has(prop)\n\t\t: Object.prototype.hasOwnProperty.call(thing, prop)\n}\n\nexport function get(thing: AnyMap | AnyObject, prop: PropertyKey): any {\n\t// @ts-ignore\n\treturn getArchtype(thing) === Archtype.Map ? thing.get(prop) : thing[prop]\n}\n\nexport function set(thing: any, propOrOldValue: PropertyKey, value: any) {\n\tswitch (getArchtype(thing)) {\n\t\tcase Archtype.Map:\n\t\t\tthing.set(propOrOldValue, value)\n\t\t\tbreak\n\t\tcase Archtype.Set:\n\t\t\tthing.delete(propOrOldValue)\n\t\t\tthing.add(value)\n\t\t\tbreak\n\t\tdefault:\n\t\t\tthing[propOrOldValue] = value\n\t}\n}\n\nexport function is(x: any, y: any): boolean {\n\t// From: https://github.com/facebook/fbjs/blob/c69904a511b900266935168223063dd8772dfc40/packages/fbjs/src/core/shallowEqual.js\n\tif (x === y) {\n\t\treturn x !== 0 || 1 / x === 1 / y\n\t} else {\n\t\treturn x !== x && y !== y\n\t}\n}\n\nexport function isMap(target: any): target is AnyMap {\n\treturn hasMap && target instanceof Map\n}\n\nexport function isSet(target: any): target is AnySet {\n\treturn hasSet && target instanceof Set\n}\n\nexport function latest(state: ImmerState): any {\n\treturn state.copy || state.base\n}\n\nexport function shallowCopy<T extends AnyObject | AnyArray>(\n\tbase: T,\n\tinvokeGetters?: boolean\n): T\nexport function shallowCopy(base: any, invokeGetters = false) {\n\tif (Array.isArray(base)) return base.slice()\n\tconst clone = Object.create(Object.getPrototypeOf(base))\n\townKeys(base).forEach(key => {\n\t\tif (key === DRAFT_STATE) {\n\t\t\treturn // Never copy over draft state.\n\t\t}\n\t\tconst desc = Object.getOwnPropertyDescriptor(base, key)!\n\t\tlet {value} = desc\n\t\tif (desc.get) {\n\t\t\tif (!invokeGetters) {\n\t\t\t\tthrow new Error(\"Immer drafts cannot have computed properties\")\n\t\t\t}\n\t\t\tvalue = desc.get.call(base)\n\t\t}\n\t\tif (desc.enumerable) {\n\t\t\tclone[key] = value\n\t\t} else {\n\t\t\tObject.defineProperty(clone, key, {\n\t\t\t\tvalue,\n\t\t\t\twritable: true,\n\t\t\t\tconfigurable: true\n\t\t\t})\n\t\t}\n\t})\n\treturn clone\n}\n\nexport function freeze(obj: any, deep: boolean): void {\n\tif (!isDraftable(obj) || isDraft(obj) || Object.isFrozen(obj)) return\n\tconst type = getArchtype(obj)\n\tif (type === Archtype.Set) {\n\t\tobj.add = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t} else if (type === Archtype.Map) {\n\t\tobj.set = obj.clear = obj.delete = dontMutateFrozenCollections as any\n\t}\n\tObject.freeze(obj)\n\tif (deep) each(obj, (_, value) => freeze(value, true))\n}\n\nfunction dontMutateFrozenCollections() {\n\tthrow new Error(\"This object has been frozen and should not be mutated\")\n}\n\nexport function createHiddenProperty(\n\ttarget: AnyObject,\n\tprop: PropertyKey,\n\tvalue: any\n) {\n\tObject.defineProperty(target, prop, {\n\t\tvalue: value,\n\t\tenumerable: false,\n\t\twritable: true\n\t})\n}\n\n/* istanbul ignore next */\nexport function die(): never {\n\tthrow new Error(\"Illegal state, please file a bug\")\n}\n","import {\n\tPatch,\n\tPatchListener,\n\tDrafted,\n\tProxyType,\n\tImmer,\n\tDRAFT_STATE\n} from \"./internal\"\n\n/** Each scope represents a `produce` call. */\nexport class ImmerScope {\n\tstatic current?: ImmerScope\n\n\tpatches?: Patch[]\n\tinversePatches?: Patch[]\n\tcanAutoFreeze: boolean\n\tdrafts: any[]\n\tparent?: ImmerScope\n\tpatchListener?: PatchListener\n\timmer: Immer\n\n\tconstructor(parent: ImmerScope | undefined, immer: Immer) {\n\t\tthis.drafts = []\n\t\tthis.parent = parent\n\t\tthis.immer = immer\n\n\t\t// Whenever the modified draft contains a draft from another scope, we\n\t\t// need to prevent auto-freezing so the unowned draft can be finalized.\n\t\tthis.canAutoFreeze = true\n\t}\n\n\tusePatches(patchListener?: PatchListener) {\n\t\tif (patchListener) {\n\t\t\tthis.patches = []\n\t\t\tthis.inversePatches = []\n\t\t\tthis.patchListener = patchListener\n\t\t}\n\t}\n\n\trevoke() {\n\t\tthis.leave()\n\t\tthis.drafts.forEach(revoke)\n\t\t// @ts-ignore\n\t\tthis.drafts = null\n\t}\n\n\tleave() {\n\t\tif (this === ImmerScope.current) {\n\t\t\tImmerScope.current = this.parent\n\t\t}\n\t}\n\n\tstatic enter(immer: Immer) {\n\t\tconst scope = new ImmerScope(ImmerScope.current, immer)\n\t\tImmerScope.current = scope\n\t\treturn scope\n\t}\n}\n\nfunction revoke(draft: Drafted) {\n\tconst state = draft[DRAFT_STATE]\n\tif (\n\t\tstate.type === ProxyType.ProxyObject ||\n\t\tstate.type === ProxyType.ProxyArray\n\t)\n\t\tstate.revoke()\n\telse state.revoked = true\n}\n","import {\n\tImmer,\n\tImmerScope,\n\tDRAFT_STATE,\n\tisDraftable,\n\tNOTHING,\n\tDrafted,\n\tPatchPath,\n\tProxyType,\n\teach,\n\thas,\n\tfreeze,\n\tgeneratePatches,\n\tshallowCopy,\n\tImmerState,\n\tisSet,\n\tisDraft,\n\tSetState,\n\tset,\n\tis,\n\tget\n} from \"./internal\"\n\nexport function processResult(immer: Immer, result: any, scope: ImmerScope) {\n\tconst baseDraft = scope.drafts![0]\n\tconst isReplaced = result !== undefined && result !== baseDraft\n\timmer.willFinalize(scope, result, isReplaced)\n\tif (isReplaced) {\n\t\tif (baseDraft[DRAFT_STATE].modified) {\n\t\t\tscope.revoke()\n\t\t\tthrow new Error(\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\") // prettier-ignore\n\t\t}\n\t\tif (isDraftable(result)) {\n\t\t\t// Finalize the result in case it contains (or is) a subset of the draft.\n\t\t\tresult = finalize(immer, result, scope)\n\t\t\tif (!scope.parent) maybeFreeze(immer, result)\n\t\t}\n\t\tif (scope.patches) {\n\t\t\tscope.patches.push({\n\t\t\t\top: \"replace\",\n\t\t\t\tpath: [],\n\t\t\t\tvalue: result\n\t\t\t})\n\t\t\tscope.inversePatches!.push({\n\t\t\t\top: \"replace\",\n\t\t\t\tpath: [],\n\t\t\t\tvalue: baseDraft[DRAFT_STATE].base\n\t\t\t})\n\t\t}\n\t} else {\n\t\t// Finalize the base draft.\n\t\tresult = finalize(immer, baseDraft, scope, [])\n\t}\n\tscope.revoke()\n\tif (scope.patches) {\n\t\tscope.patchListener!(scope.patches, scope.inversePatches!)\n\t}\n\treturn result !== NOTHING ? result : undefined\n}\n\nfunction finalize(\n\timmer: Immer,\n\tdraft: Drafted,\n\tscope: ImmerScope,\n\tpath?: PatchPath\n) {\n\tconst state = draft[DRAFT_STATE]\n\tif (!state) {\n\t\tif (Object.isFrozen(draft)) return draft\n\t\treturn finalizeTree(immer, draft, scope)\n\t}\n\t// Never finalize drafts owned by another scope.\n\tif (state.scope !== scope) {\n\t\treturn draft\n\t}\n\tif (!state.modified) {\n\t\tmaybeFreeze(immer, state.base, true)\n\t\treturn state.base\n\t}\n\tif (!state.finalized) {\n\t\tstate.finalized = true\n\t\tfinalizeTree(immer, state.draft, scope, path)\n\n\t\t// We cannot really delete anything inside of a Set. We can only replace the whole Set.\n\t\tif (immer.onDelete && state.type !== ProxyType.Set) {\n\t\t\t// The `assigned` object is unreliable with ES5 drafts.\n\t\t\tif (immer.useProxies) {\n\t\t\t\tconst {assigned} = state\n\t\t\t\teach(assigned, (prop, exists) => {\n\t\t\t\t\tif (!exists) immer.onDelete!(state, prop as any)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tconst {base, copy} = state\n\t\t\t\teach(base, prop => {\n\t\t\t\t\tif (!has(copy, prop)) immer.onDelete!(state, prop as any)\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\tif (immer.onCopy) {\n\t\t\timmer.onCopy(state)\n\t\t}\n\n\t\t// At this point, all descendants of `state.copy` have been finalized,\n\t\t// so we can be sure that `scope.canAutoFreeze` is accurate.\n\t\tif (immer.autoFreeze && scope.canAutoFreeze) {\n\t\t\tfreeze(state.copy, false)\n\t\t}\n\n\t\tif (path && scope.patches) {\n\t\t\tgeneratePatches(state, path, scope.patches, scope.inversePatches!)\n\t\t}\n\t}\n\treturn state.copy\n}\n\nfunction finalizeTree(\n\timmer: Immer,\n\troot: Drafted,\n\tscope: ImmerScope,\n\trootPath?: PatchPath\n) {\n\tconst state = root[DRAFT_STATE]\n\tif (state) {\n\t\tif (\n\t\t\tstate.type === ProxyType.ES5Object ||\n\t\t\tstate.type === ProxyType.ES5Array\n\t\t) {\n\t\t\t// Create the final copy, with added keys and without deleted keys.\n\t\t\tstate.copy = shallowCopy(state.draft, true)\n\t\t}\n\t\troot = state.copy\n\t}\n\teach(root, (key, value) =>\n\t\tfinalizeProperty(immer, scope, root, state, root, key, value, rootPath)\n\t)\n\treturn root\n}\n\nfunction finalizeProperty(\n\timmer: Immer,\n\tscope: ImmerScope,\n\troot: Drafted,\n\trootState: ImmerState,\n\tparentValue: Drafted,\n\tprop: string | number,\n\tchildValue: any,\n\trootPath?: PatchPath\n) {\n\tif (childValue === parentValue) {\n\t\tthrow Error(\"Immer forbids circular references\")\n\t}\n\n\t// In the `finalizeTree` method, only the `root` object may be a draft.\n\tconst isDraftProp = !!rootState && parentValue === root\n\tconst isSetMember = isSet(parentValue)\n\n\tif (isDraft(childValue)) {\n\t\tconst path =\n\t\t\trootPath &&\n\t\t\tisDraftProp &&\n\t\t\t!isSetMember && // Set objects are atomic since they have no keys.\n\t\t\t!has((rootState as Exclude<ImmerState, SetState>).assigned!, prop) // Skip deep patches for assigned keys.\n\t\t\t\t? rootPath!.concat(prop)\n\t\t\t\t: undefined\n\n\t\t// Drafts owned by `scope` are finalized here.\n\t\tchildValue = finalize(immer, childValue, scope, path)\n\t\tset(parentValue, prop, childValue)\n\n\t\t// Drafts from another scope must prevent auto-freezing.\n\t\tif (isDraft(childValue)) {\n\t\t\tscope.canAutoFreeze = false\n\t\t}\n\t}\n\t// Unchanged draft properties are ignored.\n\telse if (isDraftProp && is(childValue, get(rootState.base, prop))) {\n\t\treturn\n\t}\n\t// Search new objects for unfinalized drafts. Frozen objects should never contain drafts.\n\t// TODO: the recursion over here looks weird, shouldn't non-draft stuff have it's own recursion?\n\t// especially the passing on of root and rootState doesn't make sense...\n\telse if (isDraftable(childValue)) {\n\t\teach(childValue, (key, grandChild) =>\n\t\t\tfinalizeProperty(\n\t\t\t\timmer,\n\t\t\t\tscope,\n\t\t\t\troot,\n\t\t\t\trootState,\n\t\t\t\tchildValue,\n\t\t\t\tkey,\n\t\t\t\tgrandChild,\n\t\t\t\trootPath\n\t\t\t)\n\t\t)\n\t\tif (!scope.parent) maybeFreeze(immer, childValue)\n\t}\n\n\tif (isDraftProp && immer.onAssign && !isSetMember) {\n\t\timmer.onAssign(rootState, prop, childValue)\n\t}\n}\n\nexport function maybeFreeze(immer: Immer, value: any, deep = false) {\n\tif (immer.autoFreeze && !isDraft(value)) {\n\t\tfreeze(value, deep)\n\t}\n}\n","\"use strict\"\nimport {\n\teach,\n\thas,\n\tis,\n\tisDraftable,\n\tshallowCopy,\n\tlatest,\n\tImmerBaseState,\n\tImmerState,\n\tDrafted,\n\tProxyType,\n\tAnyObject,\n\tAnyArray,\n\tObjectish,\n\tImmerScope,\n\tDRAFT_STATE\n} from \"./internal\"\n\ninterface ProxyBaseState extends ImmerBaseState {\n\tassigned: {\n\t\t[property: string]: boolean\n\t}\n\tparent?: ImmerState\n\tdrafts?: {\n\t\t[property: string]: Drafted<any, any>\n\t}\n\trevoke(): void\n}\n\nexport interface ProxyObjectState extends ProxyBaseState {\n\ttype: ProxyType.ProxyObject\n\tbase: AnyObject\n\tcopy: AnyObject | null\n\tdraft: Drafted<AnyObject, ProxyObjectState>\n}\n\nexport interface ProxyArrayState extends ProxyBaseState {\n\ttype: ProxyType.ProxyArray\n\tbase: AnyArray\n\tcopy: AnyArray | null\n\tdraft: Drafted<AnyArray, ProxyArrayState>\n}\n\ntype ProxyState = ProxyObjectState | ProxyArrayState\n\n/**\n * Returns a new draft of the `base` object.\n *\n * The second argument is the parent draft-state (used internally).\n */\nexport function createProxy<T extends Objectish>(\n\tbase: T,\n\tparent?: ImmerState\n): Drafted<T, ProxyState> {\n\tconst isArray = Array.isArray(base)\n\tconst state: ProxyState = {\n\t\ttype: isArray ? ProxyType.ProxyArray : (ProxyType.ProxyObject as any),\n\t\t// Track which produce call this is associated with.\n\t\tscope: parent ? parent.scope : ImmerScope.current!,\n\t\t// True for both shallow and deep changes.\n\t\tmodified: false,\n\t\t// Used during finalization.\n\t\tfinalized: false,\n\t\t// Track which properties have been assigned (true) or deleted (false).\n\t\tassigned: {},\n\t\t// The parent draft state.\n\t\tparent,\n\t\t// The base state.\n\t\tbase,\n\t\t// The base proxy.\n\t\tdraft: null as any, // set below\n\t\t// Any property proxies.\n\t\tdrafts: {},\n\t\t// The base copy with any updated values.\n\t\tcopy: null,\n\t\t// Called by the `produce` function.\n\t\trevoke: null as any,\n\t\tisManual: false\n\t}\n\n\t// the traps must target something, a bit like the 'real' base.\n\t// but also, we need to be able to determine from the target what the relevant state is\n\t// (to avoid creating traps per instance to capture the state in closure,\n\t// and to avoid creating weird hidden properties as well)\n\t// So the trick is to use 'state' as the actual 'target'! (and make sure we intercept everything)\n\t// Note that in the case of an array, we put the state in an array to have better Reflect defaults ootb\n\tlet target: T = state as any\n\tlet traps: ProxyHandler<object | Array<any>> = objectTraps\n\tif (isArray) {\n\t\ttarget = [state] as any\n\t\ttraps = arrayTraps\n\t}\n\n\t// TODO: optimization: might be faster, cheaper if we created a non-revocable proxy\n\t// and administrate revoking ourselves\n\tconst {revoke, proxy} = Proxy.revocable(target, traps)\n\tstate.draft = proxy as any\n\tstate.revoke = revoke\n\treturn proxy as any\n}\n\n/**\n * Object drafts\n */\nconst objectTraps: ProxyHandler<ProxyState> = {\n\tget(state, prop) {\n\t\tif (prop === DRAFT_STATE) return state\n\t\tlet {drafts} = state\n\n\t\t// Check for existing draft in unmodified state.\n\t\tif (!state.modified && has(drafts, prop)) {\n\t\t\treturn drafts![prop as any]\n\t\t}\n\n\t\tconst value = latest(state)[prop]\n\t\tif (state.finalized || !isDraftable(value)) {\n\t\t\treturn value\n\t\t}\n\n\t\t// Check for existing draft in modified state.\n\t\tif (state.modified) {\n\t\t\t// Assigned values are never drafted. This catches any drafts we created, too.\n\t\t\tif (value !== peek(state.base, prop)) return value\n\t\t\t// Store drafts on the copy (when one exists).\n\t\t\t// @ts-ignore\n\t\t\tdrafts = state.copy\n\t\t}\n\n\t\treturn (drafts![prop as any] = state.scope.immer.createProxy(value, state))\n\t},\n\thas(state, prop) {\n\t\treturn prop in latest(state)\n\t},\n\townKeys(state) {\n\t\treturn Reflect.ownKeys(latest(state))\n\t},\n\tset(state, prop: string /* strictly not, but helps TS */, value) {\n\t\tif (!state.modified) {\n\t\t\tconst baseValue = peek(state.base, prop)\n\t\t\t// Optimize based on value's truthiness. Truthy values are guaranteed to\n\t\t\t// never be undefined, so we can avoid the `in` operator. Lastly, truthy\n\t\t\t// values may be drafts, but falsy values are never drafts.\n\t\t\tconst isUnchanged = value\n\t\t\t\t? is(baseValue, value) || value === state.drafts![prop]\n\t\t\t\t: is(baseValue, value) && prop in state.base\n\t\t\tif (isUnchanged) return true\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t}\n\t\tstate.assigned[prop] = true\n\t\t// @ts-ignore\n\t\tstate.copy![prop] = value\n\t\treturn true\n\t},\n\tdeleteProperty(state, prop: string) {\n\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\tif (peek(state.base, prop) !== undefined || prop in state.base) {\n\t\t\tstate.assigned[prop] = false\n\t\t\tprepareCopy(state)\n\t\t\tmarkChanged(state)\n\t\t} else if (state.assigned[prop]) {\n\t\t\t// if an originally not assigned property was deleted\n\t\t\tdelete state.assigned[prop]\n\t\t}\n\t\t// @ts-ignore\n\t\tif (state.copy) delete state.copy[prop]\n\t\treturn true\n\t},\n\t// Note: We never coerce `desc.value` into an Immer draft, because we can't make\n\t// the same guarantee in ES5 mode.\n\tgetOwnPropertyDescriptor(state, prop) {\n\t\tconst owner = latest(state)\n\t\tconst desc = Reflect.getOwnPropertyDescriptor(owner, prop)\n\t\tif (desc) {\n\t\t\tdesc.writable = true\n\t\t\tdesc.configurable =\n\t\t\t\tstate.type !== ProxyType.ProxyArray || prop !== \"length\"\n\t\t}\n\t\treturn desc\n\t},\n\tdefineProperty() {\n\t\tthrow new Error(\"Object.defineProperty() cannot be used on an Immer draft\") // prettier-ignore\n\t},\n\tgetPrototypeOf(state) {\n\t\treturn Object.getPrototypeOf(state.base)\n\t},\n\tsetPrototypeOf() {\n\t\tthrow new Error(\"Object.setPrototypeOf() cannot be used on an Immer draft\") // prettier-ignore\n\t}\n}\n\n/**\n * Array drafts\n */\n\nconst arrayTraps: ProxyHandler<[ProxyArrayState]> = {}\neach(objectTraps, (key, fn) => {\n\t// @ts-ignore\n\tarrayTraps[key] = function() {\n\t\targuments[0] = arguments[0][0]\n\t\treturn fn.apply(this, arguments)\n\t}\n})\narrayTraps.deleteProperty = function(state, prop) {\n\tif (isNaN(parseInt(prop as any))) {\n\t\tthrow new Error(\"Immer only supports deleting array indices\") // prettier-ignore\n\t}\n\treturn objectTraps.deleteProperty!.call(this, state[0], prop)\n}\narrayTraps.set = function(state, prop, value) {\n\tif (prop !== \"length\" && isNaN(parseInt(prop as any))) {\n\t\tthrow new Error(\"Immer only supports setting array indices and the 'length' property\") // prettier-ignore\n\t}\n\treturn objectTraps.set!.call(this, state[0], prop, value, state[0])\n}\n\n/**\n * Map drafts\n */\n\n// Access a property without creating an Immer draft.\nfunction peek(draft: Drafted, prop: PropertyKey): any {\n\tconst state = draft[DRAFT_STATE]\n\tconst desc = Reflect.getOwnPropertyDescriptor(\n\t\tstate ? latest(state) : draft,\n\t\tprop\n\t)\n\treturn desc && desc.value\n}\n\nexport function markChanged(state: ImmerState) {\n\tif (!state.modified) {\n\t\tstate.modified = true\n\t\tif (\n\t\t\tstate.type === ProxyType.ProxyObject ||\n\t\t\tstate.type === ProxyType.ProxyArray\n\t\t) {\n\t\t\tconst copy = (state.copy = shallowCopy(state.base))\n\t\t\teach(state.drafts!, (key, value) => {\n\t\t\t\t// @ts-ignore\n\t\t\t\tcopy[key] = value\n\t\t\t})\n\t\t\tstate.drafts = undefined\n\t\t}\n\n\t\tif (state.parent) {\n\t\t\tmarkChanged(state.parent)\n\t\t}\n\t}\n}\n\nfunction prepareCopy(state: ProxyState) {\n\tif (!state.copy) {\n\t\tstate.copy = shallowCopy(state.base)\n\t}\n}\n","\"use strict\"\nimport {\n\teach,\n\thas,\n\tis,\n\tisDraft,\n\tisDraftable,\n\tisEnumerable,\n\tshallowCopy,\n\tlatest,\n\tcreateHiddenProperty,\n\tImmerScope,\n\tImmerState,\n\tDrafted,\n\tAnyObject,\n\tObjectish,\n\tImmerBaseState,\n\tAnyArray,\n\tProxyType,\n\tMapState,\n\tSetState,\n\tDRAFT_STATE\n} from \"./internal\"\n\ninterface ES5BaseState extends ImmerBaseState {\n\tfinalizing: boolean\n\tassigned: {[key: string]: any}\n\tparent?: ImmerState\n\trevoked: boolean\n}\n\nexport interface ES5ObjectState extends ES5BaseState {\n\ttype: ProxyType.ES5Object\n\tdraft: Drafted<AnyObject, ES5ObjectState>\n\tbase: AnyObject\n\tcopy: AnyObject | null\n}\n\nexport interface ES5ArrayState extends ES5BaseState {\n\ttype: ProxyType.ES5Array\n\tdraft: Drafted<AnyObject, ES5ArrayState>\n\tbase: AnyArray\n\tcopy: AnyArray | null\n}\n\ntype ES5State = ES5ArrayState | ES5ObjectState\n\nexport function willFinalizeES5(\n\tscope: ImmerScope,\n\tresult: any,\n\tisReplaced: boolean\n) {\n\tscope.drafts!.forEach(draft => {\n\t\tdraft[DRAFT_STATE].finalizing = true\n\t})\n\tif (!isReplaced) {\n\t\tif (scope.patches) {\n\t\t\tmarkChangesRecursively(scope.drafts![0])\n\t\t}\n\t\t// This is faster when we don't care about which attributes changed.\n\t\tmarkChangesSweep(scope.drafts)\n\t}\n\t// When a child draft is returned, look for changes.\n\telse if (isDraft(result) && result[DRAFT_STATE].scope === scope) {\n\t\tmarkChangesSweep(scope.drafts)\n\t}\n}\n\nexport function createES5Proxy<T>(\n\tbase: T,\n\tparent?: ImmerState\n): Drafted<T, ES5ObjectState | ES5ArrayState> {\n\tconst isArray = Array.isArray(base)\n\tconst draft = clonePotentialDraft(base)\n\n\teach(draft, prop => {\n\t\tproxyProperty(draft, prop, isArray || isEnumerable(base, prop))\n\t})\n\n\tconst state: ES5ObjectState | ES5ArrayState = {\n\t\ttype: isArray ? ProxyType.ES5Array : (ProxyType.ES5Object as any),\n\t\tscope: parent ? parent.scope : ImmerScope.current!,\n\t\tmodified: false,\n\t\tfinalizing: false,\n\t\tfinalized: false,\n\t\tassigned: {},\n\t\tparent,\n\t\tbase,\n\t\tdraft,\n\t\tcopy: null,\n\t\trevoked: false,\n\t\tisManual: false\n\t}\n\n\tcreateHiddenProperty(draft, DRAFT_STATE, state)\n\treturn draft\n}\n\n// Access a property without creating an Immer draft.\nfunction peek(draft: Drafted, prop: PropertyKey) {\n\tconst state = draft[DRAFT_STATE]\n\tif (state && !state.finalizing) {\n\t\tstate.finalizing = true\n\t\tconst value = draft[prop]\n\t\tstate.finalizing = false\n\t\treturn value\n\t}\n\treturn draft[prop]\n}\n\nfunction get(state: ES5State, prop: string | number) {\n\tassertUnrevoked(state)\n\tconst value = peek(latest(state), prop)\n\tif (state.finalizing) return value\n\t// Create a draft if the value is unmodified.\n\tif (value === peek(state.base, prop) && isDraftable(value)) {\n\t\tprepareCopy(state)\n\t\t// @ts-ignore\n\t\treturn (state.copy![prop] = state.scope.immer.createProxy(value, state))\n\t}\n\treturn value\n}\n\nfunction set(state: ES5State, prop: string | number, value: any) {\n\tassertUnrevoked(state)\n\tstate.assigned[prop] = true\n\tif (!state.modified) {\n\t\tif (is(value, peek(latest(state), prop))) return\n\t\tmarkChangedES5(state)\n\t\tprepareCopy(state)\n\t}\n\t// @ts-ignore\n\tstate.copy![prop] = value\n}\n\nexport function markChangedES5(state: ImmerState) {\n\tif (!state.modified) {\n\t\tstate.modified = true\n\t\tif (state.parent) markChangedES5(state.parent)\n\t}\n}\n\nfunction prepareCopy(state: ES5State) {\n\tif (!state.copy) state.copy = clonePotentialDraft(state.base)\n}\n\nfunction clonePotentialDraft(base: Objectish) {\n\tconst state = base && (base as any)[DRAFT_STATE]\n\tif (state) {\n\t\tstate.finalizing = true\n\t\tconst draft = shallowCopy(state.draft, true)\n\t\tstate.finalizing = false\n\t\treturn draft\n\t}\n\treturn shallowCopy(base)\n}\n\n// property descriptors are recycled to make sure we don't create a get and set closure per property,\n// but share them all instead\nconst descriptors: {[prop: string]: PropertyDescriptor} = {}\n\nfunction proxyProperty(\n\tdraft: Drafted<any, ES5State>,\n\tprop: string | number,\n\tenumerable: boolean\n) {\n\tlet desc = descriptors[prop]\n\tif (desc) {\n\t\tdesc.enumerable = enumerable\n\t} else {\n\t\tdescriptors[prop] = desc = {\n\t\t\tconfigurable: true,\n\t\t\tenumerable,\n\t\t\tget(this: any) {\n\t\t\t\treturn get(this[DRAFT_STATE], prop)\n\t\t\t},\n\t\t\tset(this: any, value) {\n\t\t\t\tset(this[DRAFT_STATE], prop, value)\n\t\t\t}\n\t\t}\n\t}\n\tObject.defineProperty(draft, prop, desc)\n}\n\nexport function assertUnrevoked(state: ES5State | MapState | SetState) {\n\tif (state.revoked === true)\n\t\tthrow new Error(\n\t\t\t\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \" +\n\t\t\t\tJSON.stringify(latest(state))\n\t\t)\n}\n\n// This looks expensive, but only proxies are visited, and only objects without known changes are scanned.\nfunction markChangesSweep(drafts: Drafted<any, ImmerState>[]) {\n\t// The natural order of drafts in the `scope` array is based on when they\n\t// were accessed. By processing drafts in reverse natural order, we have a\n\t// better chance of processing leaf nodes first. When a leaf node is known to\n\t// have changed, we can avoid any traversal of its ancestor nodes.\n\tfor (let i = drafts.length - 1; i >= 0; i--) {\n\t\tconst state = drafts[i][DRAFT_STATE]\n\t\tif (!state.modified) {\n\t\t\tswitch (state.type) {\n\t\t\t\tcase ProxyType.ES5Array:\n\t\t\t\t\tif (hasArrayChanges(state)) markChangedES5(state)\n\t\t\t\t\tbreak\n\t\t\t\tcase ProxyType.ES5Object:\n\t\t\t\t\tif (hasObjectChanges(state)) markChangedES5(state)\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction markChangesRecursively(object: any) {\n\tif (!object || typeof object !== \"object\") return\n\tconst state = object[DRAFT_STATE]\n\tif (!state) return\n\tconst {base, draft, assigned, type} = state\n\tif (type === ProxyType.ES5Object) {\n\t\t// Look for added keys.\n\t\t// TODO: looks quite duplicate to hasObjectChanges,\n\t\t// probably there is a faster way to detect changes, as sweep + recurse seems to do some\n\t\t// unnecessary work.\n\t\t// also: probably we can store the information we detect here, to speed up tree finalization!\n\t\teach(draft, key => {\n\t\t\tif ((key as any) === DRAFT_STATE) return\n\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\tif (base[key] === undefined && !has(base, key)) {\n\t\t\t\tassigned[key] = true\n\t\t\t\tmarkChangedES5(state)\n\t\t\t} else if (!assigned[key]) {\n\t\t\t\t// Only untouched properties trigger recursion.\n\t\t\t\tmarkChangesRecursively(draft[key])\n\t\t\t}\n\t\t})\n\t\t// Look for removed keys.\n\t\teach(base, key => {\n\t\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\t\tif (draft[key] === undefined && !has(draft, key)) {\n\t\t\t\tassigned[key] = false\n\t\t\t\tmarkChangedES5(state)\n\t\t\t}\n\t\t})\n\t} else if (type === ProxyType.ES5Array) {\n\t\tif (hasArrayChanges(state)) {\n\t\t\tmarkChangedES5(state)\n\t\t\tassigned.length = true\n\t\t}\n\n\t\tif (draft.length < base.length) {\n\t\t\tfor (let i = draft.length; i < base.length; i++) assigned[i] = false\n\t\t} else {\n\t\t\tfor (let i = base.length; i < draft.length; i++) assigned[i] = true\n\t\t}\n\n\t\t// Minimum count is enough, the other parts has been processed.\n\t\tconst min = Math.min(draft.length, base.length)\n\n\t\tfor (let i = 0; i < min; i++) {\n\t\t\t// Only untouched indices trigger recursion.\n\t\t\tif (assigned[i] === undefined) markChangesRecursively(draft[i])\n\t\t}\n\t}\n}\n\nfunction hasObjectChanges(state: ES5ObjectState) {\n\tconst {base, draft} = state\n\n\t// Search for added keys and changed keys. Start at the back, because\n\t// non-numeric keys are ordered by time of definition on the object.\n\tconst keys = Object.keys(draft)\n\tfor (let i = keys.length - 1; i >= 0; i--) {\n\t\tconst key = keys[i]\n\t\tconst baseValue = base[key]\n\t\t// The `undefined` check is a fast path for pre-existing keys.\n\t\tif (baseValue === undefined && !has(base, key)) {\n\t\t\treturn true\n\t\t}\n\t\t// Once a base key is deleted, future changes go undetected, because its\n\t\t// descriptor is erased. This branch detects any missed changes.\n\t\telse {\n\t\t\tconst value = draft[key]\n\t\t\tconst state = value && value[DRAFT_STATE]\n\t\t\tif (state ? state.base !== baseValue : !is(value, baseValue)) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t}\n\n\t// At this point, no keys were added or changed.\n\t// Compare key count to determine if keys were deleted.\n\treturn keys.length !== Object.keys(base).length\n}\n\nfunction hasArrayChanges(state: ES5ArrayState) {\n\tconst {draft} = state\n\tif (draft.length !== state.base.length) return true\n\t// See #116\n\t// If we first shorten the length, our array interceptors will be removed.\n\t// If after that new items are added, result in the same original length,\n\t// those last items will have no intercepting property.\n\t// So if there is no own descriptor on the last position, we know that items were removed and added\n\t// N.B.: splice, unshift, etc only shift values around, but not prop descriptors, so we only have to check\n\t// the last one\n\tconst descriptor = Object.getOwnPropertyDescriptor(draft, draft.length - 1)\n\t// descriptor can be null, but only for newly created sparse arrays, eg. new Array(10)\n\tif (descriptor && !descriptor.get) return true\n\t// For all other cases, we don't have to compare, as they would have been picked up by the index setters\n\treturn false\n}\n","import {\n\t__extends,\n\tImmerBaseState,\n\tProxyType,\n\tAnyMap,\n\tDrafted,\n\tImmerState,\n\tDRAFT_STATE,\n\tImmerScope,\n\tlatest,\n\tassertUnrevoked,\n\tisDraftable,\n\titeratorSymbol\n} from \"./internal\"\n\nexport interface MapState extends ImmerBaseState {\n\ttype: ProxyType.Map\n\tcopy: AnyMap | undefined\n\tassigned: Map<any, boolean> | undefined\n\tbase: AnyMap\n\trevoked: boolean\n\tdraft: Drafted<AnyMap, MapState>\n}\n\nconst DraftMap = (function(_super) {\n\tif (!_super) {\n\t\t/* istanbul ignore next */\n\t\tthrow new Error(\"Map is not polyfilled\")\n\t}\n\t__extends(DraftMap, _super)\n\t// Create class manually, cause #502\n\tfunction DraftMap(this: any, target: AnyMap, parent?: ImmerState): any {\n\t\tthis[DRAFT_STATE] = {\n\t\t\ttype: ProxyType.Map,\n\t\t\tparent,\n\t\t\tscope: parent ? parent.scope : ImmerScope.current!,\n\t\t\tmodified: false,\n\t\t\tfinalized: false,\n\t\t\tcopy: undefined,\n\t\t\tassigned: undefined,\n\t\t\tbase: target,\n\t\t\tdraft: this as any,\n\t\t\tisManual: false,\n\t\t\trevoked: false\n\t\t}\n\t\treturn this\n\t}\n\tconst p = DraftMap.prototype\n\n\t// TODO: smaller build size if we create a util for Object.defineProperty\n\tObject.defineProperty(p, \"size\", {\n\t\tget: function() {\n\t\t\treturn latest(this[DRAFT_STATE]).size\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t})\n\n\tp.has = function(key: any): boolean {\n\t\treturn latest(this[DRAFT_STATE]).has(key)\n\t}\n\n\tp.set = function(key: any, value: any) {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tif (latest(state).get(key) !== value) {\n\t\t\tprepareCopy(state)\n\t\t\tstate.scope.immer.markChanged(state)\n\t\t\tstate.assigned!.set(key, true)\n\t\t\tstate.copy!.set(key, value)\n\t\t\tstate.assigned!.set(key, true)\n\t\t}\n\t\treturn this\n\t}\n\n\tp.delete = function(key: any): boolean {\n\t\tif (!this.has(key)) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\tstate.scope.immer.markChanged(state)\n\t\tstate.assigned!.set(key, false)\n\t\tstate.copy!.delete(key)\n\t\treturn true\n\t}\n\n\tp.clear = function() {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\tstate.scope.immer.markChanged(state)\n\t\tstate.assigned = new Map()\n\t\treturn state.copy!.clear()\n\t}\n\n\tp.forEach = function(\n\t\tcb: (value: any, key: any, self: any) => void,\n\t\tthisArg?: any\n\t) {\n\t\tconst state = this[DRAFT_STATE]\n\t\tlatest(state).forEach((_value: any, key: any, _map: any) => {\n\t\t\tcb.call(thisArg, this.get(key), key, this)\n\t\t})\n\t}\n\n\tp.get = function(key: any): any {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tconst value = latest(state).get(key)\n\t\tif (state.finalized || !isDraftable(value)) {\n\t\t\treturn value\n\t\t}\n\t\tif (value !== state.base.get(key)) {\n\t\t\treturn value // either already drafted or reassigned\n\t\t}\n\t\t// despite what it looks, this creates a draft only once, see above condition\n\t\tconst draft = state.scope.immer.createProxy(value, state)\n\t\tprepareCopy(state)\n\t\tstate.copy!.set(key, draft)\n\t\treturn draft\n\t}\n\n\tp.keys = function(): IterableIterator<any> {\n\t\treturn latest(this[DRAFT_STATE]).keys()\n\t}\n\n\tp.values = function(): IterableIterator<any> {\n\t\tconst iterator = this.keys()\n\t\treturn {\n\t\t\t[iteratorSymbol]: () => this.values(),\n\t\t\tnext: () => {\n\t\t\t\tconst r = iterator.next()\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif (r.done) return r\n\t\t\t\tconst value = this.get(r.value)\n\t\t\t\treturn {\n\t\t\t\t\tdone: false,\n\t\t\t\t\tvalue\n\t\t\t\t}\n\t\t\t}\n\t\t} as any\n\t}\n\n\tp.entries = function(): IterableIterator<[any, any]> {\n\t\tconst iterator = this.keys()\n\t\treturn {\n\t\t\t[iteratorSymbol]: () => this.entries(),\n\t\t\tnext: () => {\n\t\t\t\tconst r = iterator.next()\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif (r.done) return r\n\t\t\t\tconst value = this.get(r.value)\n\t\t\t\treturn {\n\t\t\t\t\tdone: false,\n\t\t\t\t\tvalue: [r.value, value]\n\t\t\t\t}\n\t\t\t}\n\t\t} as any\n\t}\n\n\tp[iteratorSymbol] = function() {\n\t\treturn this.entries()\n\t}\n\n\treturn DraftMap\n})(Map)\n\nexport function proxyMap<T extends AnyMap>(\n\ttarget: T,\n\tparent?: ImmerState\n): T & {[DRAFT_STATE]: MapState} {\n\t// @ts-ignore\n\treturn new DraftMap(target, parent)\n}\n\nfunction prepareCopy(state: MapState) {\n\tif (!state.copy) {\n\t\tstate.assigned = new Map()\n\t\tstate.copy = new Map(state.base)\n\t}\n}\n","import {\n\t__extends,\n\tImmerBaseState,\n\tProxyType,\n\tAnySet,\n\tDrafted,\n\tImmerState,\n\tDRAFT_STATE,\n\tImmerScope,\n\tlatest,\n\tassertUnrevoked,\n\titeratorSymbol,\n\tisDraftable\n} from \"./internal\"\n\nexport interface SetState extends ImmerBaseState {\n\ttype: ProxyType.Set\n\tcopy: AnySet | undefined\n\tbase: AnySet\n\tdrafts: Map<any, Drafted> // maps the original value to the draft value in the new set\n\trevoked: boolean\n\tdraft: Drafted<AnySet, SetState>\n}\n\nconst DraftSet = (function(_super) {\n\tif (!_super) {\n\t\t/* istanbul ignore next */\n\t\tthrow new Error(\"Set is not polyfilled\")\n\t}\n\t__extends(DraftSet, _super)\n\t// Create class manually, cause #502\n\tfunction DraftSet(this: any, target: AnySet, parent?: ImmerState) {\n\t\tthis[DRAFT_STATE] = {\n\t\t\ttype: ProxyType.Set,\n\t\t\tparent,\n\t\t\tscope: parent ? parent.scope : ImmerScope.current!,\n\t\t\tmodified: false,\n\t\t\tfinalized: false,\n\t\t\tcopy: undefined,\n\t\t\tbase: target,\n\t\t\tdraft: this,\n\t\t\tdrafts: new Map(),\n\t\t\trevoked: false,\n\t\t\tisManual: false\n\t\t}\n\t\treturn this\n\t}\n\tconst p = DraftSet.prototype\n\n\tObject.defineProperty(p, \"size\", {\n\t\tget: function() {\n\t\t\treturn latest(this[DRAFT_STATE]).size\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t})\n\n\tp.has = function(value: any): boolean {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\t// bit of trickery here, to be able to recognize both the value, and the draft of its value\n\t\tif (!state.copy) {\n\t\t\treturn state.base.has(value)\n\t\t}\n\t\tif (state.copy.has(value)) return true\n\t\tif (state.drafts.has(value) && state.copy.has(state.drafts.get(value)))\n\t\t\treturn true\n\t\treturn false\n\t}\n\n\tp.add = function(value: any): any {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tif (state.copy) {\n\t\t\tstate.copy.add(value)\n\t\t} else if (!state.base.has(value)) {\n\t\t\tprepareCopy(state)\n\t\t\tstate.scope.immer.markChanged(state)\n\t\t\tstate.copy!.add(value)\n\t\t}\n\t\treturn this\n\t}\n\n\tp.delete = function(value: any): any {\n\t\tif (!this.has(value)) {\n\t\t\treturn false\n\t\t}\n\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\tstate.scope.immer.markChanged(state)\n\t\treturn (\n\t\t\tstate.copy!.delete(value) ||\n\t\t\t(state.drafts.has(value)\n\t\t\t\t? state.copy!.delete(state.drafts.get(value))\n\t\t\t\t: /* istanbul ignore next */ false)\n\t\t)\n\t}\n\n\tp.clear = function() {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\tstate.scope.immer.markChanged(state)\n\t\treturn state.copy!.clear()\n\t}\n\n\tp.values = function(): IterableIterator<any> {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\treturn state.copy!.values()\n\t}\n\n\tp.entries = function entries(): IterableIterator<[any, any]> {\n\t\tconst state = this[DRAFT_STATE]\n\t\tassertUnrevoked(state)\n\t\tprepareCopy(state)\n\t\treturn state.copy!.entries()\n\t}\n\n\tp.keys = function(): IterableIterator<any> {\n\t\treturn this.values()\n\t}\n\n\tp[iteratorSymbol] = function() {\n\t\treturn this.values()\n\t}\n\n\tp.forEach = function forEach(cb: any, thisArg?: any) {\n\t\tconst iterator = this.values()\n\t\tlet result = iterator.next()\n\t\twhile (!result.done) {\n\t\t\tcb.call(thisArg, result.value, result.value, this)\n\t\t\tresult = iterator.next()\n\t\t}\n\t}\n\n\treturn DraftSet\n})(Set)\n\nexport function proxySet<T extends AnySet>(\n\ttarget: T,\n\tparent?: ImmerState\n): T & {[DRAFT_STATE]: SetState} {\n\t// @ts-ignore\n\treturn new DraftSet(target, parent)\n}\n\nfunction prepareCopy(state: SetState) {\n\tif (!state.copy) {\n\t\t// create drafts for all entries to preserve insertion order\n\t\tstate.copy = new Set()\n\t\tstate.base.forEach(value => {\n\t\t\tif (isDraftable(value)) {\n\t\t\t\tconst draft = state.scope.immer.createProxy(value, state)\n\t\t\t\tstate.drafts.set(value, draft)\n\t\t\t\tstate.copy!.add(draft)\n\t\t\t} else {\n\t\t\t\tstate.copy!.add(value)\n\t\t\t}\n\t\t})\n\t}\n}\n","import {\n\tget,\n\teach,\n\thas,\n\tdie,\n\tgetArchtype,\n\tImmerState,\n\tPatch,\n\tProxyType,\n\tSetState,\n\tES5ArrayState,\n\tProxyArrayState,\n\tMapState,\n\tES5ObjectState,\n\tProxyObjectState,\n\tArchtype,\n\tisMap,\n\tisSet\n} from \"./internal\"\n\nexport type PatchPath = (string | number)[]\n\nexport function generatePatches(\n\tstate: ImmerState,\n\tbasePath: PatchPath,\n\tpatches: Patch[],\n\tinversePatches: Patch[]\n): void {\n\tswitch (state.type) {\n\t\tcase ProxyType.ProxyObject:\n\t\tcase ProxyType.ES5Object:\n\t\tcase ProxyType.Map:\n\t\t\treturn generatePatchesFromAssigned(\n\t\t\t\tstate,\n\t\t\t\tbasePath,\n\t\t\t\tpatches,\n\t\t\t\tinversePatches\n\t\t\t)\n\t\tcase ProxyType.ES5Array:\n\t\tcase ProxyType.ProxyArray:\n\t\t\treturn generateArrayPatches(state, basePath, patches, inversePatches)\n\t\tcase ProxyType.Set:\n\t\t\treturn generateSetPatches(\n\t\t\t\t(state as any) as SetState,\n\t\t\t\tbasePath,\n\t\t\t\tpatches,\n\t\t\t\tinversePatches\n\t\t\t)\n\t}\n}\n\nfunction generateArrayPatches(\n\tstate: ES5ArrayState | ProxyArrayState,\n\tbasePath: PatchPath,\n\tpatches: Patch[],\n\tinversePatches: Patch[]\n) {\n\tlet {base, assigned, copy} = state\n\t/* istanbul ignore next */\n\tif (!copy) die()\n\n\t// Reduce complexity by ensuring `base` is never longer.\n\tif (copy.length < base.length) {\n\t\t// @ts-ignore\n\t\t;[base, copy] = [copy, base]\n\t\t;[patches, inversePatches] = [inversePatches, patches]\n\t}\n\n\tconst delta = copy.length - base.length\n\n\t// Find the first replaced index.\n\tlet start = 0\n\twhile (base[start] === copy[start] && start < base.length) {\n\t\t++start\n\t}\n\n\t// Find the last replaced index. Search from the end to optimize splice patches.\n\tlet end = base.length\n\twhile (end > start && base[end - 1] === copy[end + delta - 1]) {\n\t\t--end\n\t}\n\n\t// Process replaced indices.\n\tfor (let i = start; i < end; ++i) {\n\t\tif (assigned[i] && copy[i] !== base[i]) {\n\t\t\tconst path = basePath.concat([i])\n\t\t\tpatches.push({\n\t\t\t\top: \"replace\",\n\t\t\t\tpath,\n\t\t\t\tvalue: copy[i]\n\t\t\t})\n\t\t\tinversePatches.push({\n\t\t\t\top: \"replace\",\n\t\t\t\tpath,\n\t\t\t\tvalue: base[i]\n\t\t\t})\n\t\t}\n\t}\n\n\tconst replaceCount = patches.length\n\n\t// Process added indices.\n\tfor (let i = end + delta - 1; i >= end; --i) {\n\t\tconst path = basePath.concat([i])\n\t\tpatches[replaceCount + i - end] = {\n\t\t\top: \"add\",\n\t\t\tpath,\n\t\t\tvalue: copy[i]\n\t\t}\n\t\tinversePatches.push({\n\t\t\top: \"remove\",\n\t\t\tpath\n\t\t})\n\t}\n}\n\n// This is used for both Map objects and normal objects.\nfunction generatePatchesFromAssigned(\n\tstate: MapState | ES5ObjectState | ProxyObjectState,\n\tbasePath: PatchPath,\n\tpatches: Patch[],\n\tinversePatches: Patch[]\n) {\n\tconst {base, copy} = state\n\teach(state.assigned!, (key, assignedValue) => {\n\t\tconst origValue = get(base, key)\n\t\tconst value = get(copy!, key)\n\t\tconst op = !assignedValue ? \"remove\" : has(base, key) ? \"replace\" : \"add\"\n\t\tif (origValue === value && op === \"replace\") return\n\t\tconst path = basePath.concat(key as any)\n\t\tpatches.push(op === \"remove\" ? {op, path} : {op, path, value})\n\t\tinversePatches.push(\n\t\t\top === \"add\"\n\t\t\t\t? {op: \"remove\", path}\n\t\t\t\t: op === \"remove\"\n\t\t\t\t? {op: \"add\", path, value: origValue}\n\t\t\t\t: {op: \"replace\", path, value: origValue}\n\t\t)\n\t})\n}\n\nfunction generateSetPatches(\n\tstate: SetState,\n\tbasePath: PatchPath,\n\tpatches: Patch[],\n\tinversePatches: Patch[]\n) {\n\tlet {base, copy} = state\n\n\tlet i = 0\n\tbase.forEach(value => {\n\t\tif (!copy!.has(value)) {\n\t\t\tconst path = basePath.concat([i])\n\t\t\tpatches.push({\n\t\t\t\top: \"remove\",\n\t\t\t\tpath,\n\t\t\t\tvalue\n\t\t\t})\n\t\t\tinversePatches.unshift({\n\t\t\t\top: \"add\",\n\t\t\t\tpath,\n\t\t\t\tvalue\n\t\t\t})\n\t\t}\n\t\ti++\n\t})\n\ti = 0\n\tcopy!.forEach(value => {\n\t\tif (!base.has(value)) {\n\t\t\tconst path = basePath.concat([i])\n\t\t\tpatches.push({\n\t\t\t\top: \"add\",\n\t\t\t\tpath,\n\t\t\t\tvalue\n\t\t\t})\n\t\t\tinversePatches.unshift({\n\t\t\t\top: \"remove\",\n\t\t\t\tpath,\n\t\t\t\tvalue\n\t\t\t})\n\t\t}\n\t\ti++\n\t})\n}\n\nexport function applyPatches<T>(draft: T, patches: Patch[]): T {\n\tpatches.forEach(patch => {\n\t\tconst {path, op} = patch\n\n\t\t/* istanbul ignore next */\n\t\tif (!path.length) die()\n\n\t\tlet base: any = draft\n\t\tfor (let i = 0; i < path.length - 1; i++) {\n\t\t\tbase = get(base, path[i])\n\t\t\tif (!base || typeof base !== \"object\")\n\t\t\t\tthrow new Error(\"Cannot apply patch, path doesn't resolve: \" + path.join(\"/\")) // prettier-ignore\n\t\t}\n\n\t\tconst type = getArchtype(base)\n\t\tconst value = deepClonePatchValue(patch.value) // used to clone patch to ensure original patch is not modified, see #411\n\t\tconst key = path[path.length - 1]\n\t\tswitch (op) {\n\t\t\tcase \"replace\":\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase Archtype.Map:\n\t\t\t\t\t\treturn base.set(key, value)\n\t\t\t\t\t/* istanbul ignore next */\n\t\t\t\t\tcase Archtype.Set:\n\t\t\t\t\t\tthrow new Error('Sets cannot have \"replace\" patches.')\n\t\t\t\t\tdefault:\n\t\t\t\t\t\t// if value is an object, then it's assigned by reference\n\t\t\t\t\t\t// in the following add or remove ops, the value field inside the patch will also be modifyed\n\t\t\t\t\t\t// so we use value from the cloned patch\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\treturn (base[key] = value)\n\t\t\t\t}\n\t\t\tcase \"add\":\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase Archtype.Array:\n\t\t\t\t\t\treturn base.splice(key as any, 0, value)\n\t\t\t\t\tcase Archtype.Map:\n\t\t\t\t\t\treturn base.set(key, value)\n\t\t\t\t\tcase Archtype.Set:\n\t\t\t\t\t\treturn base.add(value)\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn (base[key] = value)\n\t\t\t\t}\n\t\t\tcase \"remove\":\n\t\t\t\tswitch (type) {\n\t\t\t\t\tcase Archtype.Array:\n\t\t\t\t\t\treturn base.splice(key as any, 1)\n\t\t\t\t\tcase Archtype.Map:\n\t\t\t\t\t\treturn base.delete(key)\n\t\t\t\t\tcase Archtype.Set:\n\t\t\t\t\t\treturn base.delete(patch.value)\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn delete base[key]\n\t\t\t\t}\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"Unsupported patch operation: \" + op)\n\t\t}\n\t})\n\n\treturn draft\n}\n\n// TODO: optimize: this is quite a performance hit, can we detect intelligently when it is needed?\n// E.g. auto-draft when new objects from outside are assigned and modified?\n// (See failing test when deepClone just returns obj)\nfunction deepClonePatchValue<T>(obj: T): T\nfunction deepClonePatchValue(obj: any) {\n\tif (!obj || typeof obj !== \"object\") return obj\n\tif (Array.isArray(obj)) return obj.map(deepClonePatchValue)\n\tif (isMap(obj))\n\t\treturn new Map(\n\t\t\tArray.from(obj.entries()).map(([k, v]) => [k, deepClonePatchValue(v)])\n\t\t)\n\tif (isSet(obj)) return new Set(Array.from(obj).map(deepClonePatchValue))\n\tconst cloned = Object.create(Object.getPrototypeOf(obj))\n\tfor (const key in obj) cloned[key] = deepClonePatchValue(obj[key])\n\treturn cloned\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import {\n\tcreateES5Proxy,\n\twillFinalizeES5,\n\tmarkChangedES5,\n\tIProduceWithPatches,\n\tIProduce,\n\tImmerState,\n\teach,\n\tDrafted,\n\tisDraftable,\n\tImmerScope,\n\tprocessResult,\n\tNOTHING,\n\tmaybeFreeze,\n\tdie,\n\tPatch,\n\tObjectish,\n\tDRAFT_STATE,\n\tDraft,\n\tPatchListener,\n\tisDraft,\n\tapplyPatches,\n\tisMap,\n\tproxyMap,\n\tisSet,\n\tproxySet,\n\tcreateProxy,\n\tmarkChanged\n} from \"./internal\"\n\n/* istanbul ignore next */\nfunction verifyMinified() {}\n\nconst configDefaults = {\n\tuseProxies:\n\t\ttypeof Proxy !== \"undefined\" &&\n\t\ttypeof Proxy.revocable !== \"undefined\" &&\n\t\ttypeof Reflect !== \"undefined\",\n\tautoFreeze:\n\t\ttypeof process !== \"undefined\"\n\t\t\t? process.env.NODE_ENV !== \"production\"\n\t\t\t: /* istanbul ignore next */\n\t\t\t  verifyMinified.name === \"verifyMinified\",\n\tonAssign: null,\n\tonDelete: null,\n\tonCopy: null\n} as const\n\ninterface ProducersFns {\n\tproduce: IProduce\n\tproduceWithPatches: IProduceWithPatches\n}\n\nexport class Immer implements ProducersFns {\n\tuseProxies: boolean = false\n\tautoFreeze: boolean = false\n\tonAssign?: (state: ImmerState, prop: string | number, value: unknown) => void\n\tonDelete?: (state: ImmerState, prop: string | number) => void\n\tonCopy?: (state: ImmerState) => void\n\n\tconstructor(config?: {\n\t\tuseProxies?: boolean\n\t\tautoFreeze?: boolean\n\t\tonAssign?: (\n\t\t\tstate: ImmerState,\n\t\t\tprop: string | number,\n\t\t\tvalue: unknown\n\t\t) => void\n\t\tonDelete?: (state: ImmerState, prop: string | number) => void\n\t\tonCopy?: (state: ImmerState) => void\n\t}) {\n\t\teach(configDefaults, (key, value) => {\n\t\t\t// @ts-ignore\n\t\t\tthis[key] = config?.[key] ?? value\n\t\t})\n\t\tthis.setUseProxies(this.useProxies)\n\t\tthis.produce = this.produce.bind(this)\n\t\tthis.produceWithPatches = this.produceWithPatches.bind(this)\n\t}\n\n\t/**\n\t * The `produce` function takes a value and a \"recipe function\" (whose\n\t * return value often depends on the base state). The recipe function is\n\t * free to mutate its first argument however it wants. All mutations are\n\t * only ever applied to a __copy__ of the base state.\n\t *\n\t * Pass only a function to create a \"curried producer\" which relieves you\n\t * from passing the recipe function every time.\n\t *\n\t * Only plain objects and arrays are made mutable. All other objects are\n\t * considered uncopyable.\n\t *\n\t * Note: This function is __bound__ to its `Immer` instance.\n\t *\n\t * @param {any} base - the initial state\n\t * @param {Function} producer - function that receives a proxy of the base state as first argument and which can be freely modified\n\t * @param {Function} patchListener - optional function that will be called with all the patches produced here\n\t * @returns {any} a new state, or the initial state if nothing was modified\n\t */\n\tproduce(base: any, recipe?: any, patchListener?: any) {\n\t\t// curried invocation\n\t\tif (typeof base === \"function\" && typeof recipe !== \"function\") {\n\t\t\tconst defaultBase = recipe\n\t\t\trecipe = base\n\n\t\t\tconst self = this\n\t\t\treturn function curriedProduce(\n\t\t\t\tthis: any,\n\t\t\t\tbase = defaultBase,\n\t\t\t\t...args: any[]\n\t\t\t) {\n\t\t\t\treturn self.produce(base, (draft: Drafted) => recipe.call(this, draft, ...args)) // prettier-ignore\n\t\t\t}\n\t\t}\n\n\t\t// prettier-ignore\n\t\t{\n\t\t\tif (typeof recipe !== \"function\") {\n\t\t\t\tthrow new Error(\"The first or second argument to `produce` must be a function\")\n\t\t\t}\n\t\t\tif (patchListener !== undefined && typeof patchListener !== \"function\") {\n\t\t\t\tthrow new Error(\"The third argument to `produce` must be a function or undefined\")\n\t\t\t}\n\t\t}\n\n\t\tlet result\n\n\t\t// Only plain objects, arrays, and \"immerable classes\" are drafted.\n\t\tif (isDraftable(base)) {\n\t\t\tconst scope = ImmerScope.enter(this)\n\t\t\tconst proxy = this.createProxy(base, undefined)\n\t\t\tlet hasError = true\n\t\t\ttry {\n\t\t\t\tresult = recipe(proxy)\n\t\t\t\thasError = false\n\t\t\t} finally {\n\t\t\t\t// finally instead of catch + rethrow better preserves original stack\n\t\t\t\tif (hasError) scope.revoke()\n\t\t\t\telse scope.leave()\n\t\t\t}\n\t\t\tif (typeof Promise !== \"undefined\" && result instanceof Promise) {\n\t\t\t\treturn result.then(\n\t\t\t\t\tresult => {\n\t\t\t\t\t\tscope.usePatches(patchListener)\n\t\t\t\t\t\treturn processResult(this, result, scope)\n\t\t\t\t\t},\n\t\t\t\t\terror => {\n\t\t\t\t\t\tscope.revoke()\n\t\t\t\t\t\tthrow error\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t\tscope.usePatches(patchListener)\n\t\t\treturn processResult(this, result, scope)\n\t\t} else {\n\t\t\tresult = recipe(base)\n\t\t\tif (result === NOTHING) return undefined\n\t\t\tif (result === undefined) result = base\n\t\t\tmaybeFreeze(this, result, true)\n\t\t\treturn result\n\t\t}\n\t}\n\n\tproduceWithPatches(arg1: any, arg2?: any, arg3?: any): any {\n\t\tif (typeof arg1 === \"function\") {\n\t\t\treturn (state: any, ...args: any[]) =>\n\t\t\t\tthis.produceWithPatches(state, (draft: any) => arg1(draft, ...args))\n\t\t}\n\t\t// non-curried form\n\t\t/* istanbul ignore next */\n\t\tif (arg3) die()\n\t\tlet patches: Patch[], inversePatches: Patch[]\n\t\tconst nextState = this.produce(arg1, arg2, (p: Patch[], ip: Patch[]) => {\n\t\t\tpatches = p\n\t\t\tinversePatches = ip\n\t\t})\n\t\treturn [nextState, patches!, inversePatches!]\n\t}\n\n\tcreateDraft<T extends Objectish>(base: T): Draft<T> {\n\t\tif (!isDraftable(base)) {\n\t\t\tthrow new Error(\"First argument to `createDraft` must be a plain object, an array, or an immerable object\") // prettier-ignore\n\t\t}\n\t\tconst scope = ImmerScope.enter(this)\n\t\tconst proxy = this.createProxy(base, undefined)\n\t\tproxy[DRAFT_STATE].isManual = true\n\t\tscope.leave()\n\t\treturn proxy as any\n\t}\n\n\tfinishDraft<D extends Draft<any>>(\n\t\tdraft: D,\n\t\tpatchListener?: PatchListener\n\t): D extends Draft<infer T> ? T : never {\n\t\tconst state: ImmerState = draft && draft[DRAFT_STATE]\n\t\tif (!state || !state.isManual) {\n\t\t\tthrow new Error(\"First argument to `finishDraft` must be a draft returned by `createDraft`\") // prettier-ignore\n\t\t}\n\t\tif (state.finalized) {\n\t\t\tthrow new Error(\"The given draft is already finalized\") // prettier-ignore\n\t\t}\n\t\tconst {scope} = state\n\t\tscope.usePatches(patchListener)\n\t\treturn processResult(this, undefined, scope)\n\t}\n\n\t/**\n\t * Pass true to automatically freeze all copies created by Immer.\n\t *\n\t * By default, auto-freezing is disabled in production.\n\t */\n\tsetAutoFreeze(value: boolean) {\n\t\tthis.autoFreeze = value\n\t}\n\n\t/**\n\t * Pass true to use the ES2015 `Proxy` class when creating drafts, which is\n\t * always faster than using ES5 proxies.\n\t *\n\t * By default, feature detection is used, so calling this is rarely necessary.\n\t */\n\tsetUseProxies(value: boolean) {\n\t\tthis.useProxies = value\n\t}\n\n\tapplyPatches(base: Objectish, patches: Patch[]) {\n\t\t// If a patch replaces the entire state, take that replacement as base\n\t\t// before applying patches\n\t\tlet i: number\n\t\tfor (i = patches.length - 1; i >= 0; i--) {\n\t\t\tconst patch = patches[i]\n\t\t\tif (patch.path.length === 0 && patch.op === \"replace\") {\n\t\t\t\tbase = patch.value\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\n\t\tif (isDraft(base)) {\n\t\t\t// N.B: never hits if some patch a replacement, patches are never drafts\n\t\t\treturn applyPatches(base, patches)\n\t\t}\n\t\t// Otherwise, produce a copy of the base state.\n\t\treturn this.produce(base, (draft: Drafted) =>\n\t\t\tapplyPatches(draft, patches.slice(i + 1))\n\t\t)\n\t}\n\n\tcreateProxy<T extends Objectish>(\n\t\tvalue: T,\n\t\tparent?: ImmerState\n\t): Drafted<T, ImmerState> {\n\t\t// precondition: createProxy should be guarded by isDraftable, so we know we can safely draft\n\t\tconst draft: Drafted = isMap(value)\n\t\t\t? proxyMap(value, parent)\n\t\t\t: isSet(value)\n\t\t\t? proxySet(value, parent)\n\t\t\t: this.useProxies\n\t\t\t? createProxy(value, parent)\n\t\t\t: createES5Proxy(value, parent)\n\n\t\tconst scope = parent ? parent.scope : ImmerScope.current!\n\t\tscope.drafts.push(draft)\n\t\treturn draft\n\t}\n\n\twillFinalize(scope: ImmerScope, thing: any, isReplaced: boolean) {\n\t\tif (!this.useProxies) willFinalizeES5(scope, thing, isReplaced)\n\t}\n\n\tmarkChanged(state: ImmerState) {\n\t\tif (this.useProxies) {\n\t\t\tmarkChanged(state)\n\t\t} else {\n\t\t\tmarkChangedES5(state)\n\t\t}\n\t}\n}\n","\nimport { produce } from 'immer'\n\n// these are functions to be used only on global state (g). An example:\n\n/*\n    Without produce:\n    gg( {...otherProps, someProp: g.someProp+1 })\n\n    With produce:\n    gg( produce( s => {\n        s.someProp++\n    }))\n\n    With produce, seperated\n    let prod = produce( s => {\n        s.someProp++\n    })\n    gg( prod )\n\n\n\n    Another example\n    Without produce:\n    gg( {...otherProps, someProp: g.someProp+k})\n    \n    With produce:\n    gg( produce( s => {\n        s.someProp += k\n    }))\n\n    With produce, seperated\n    let prod = k => produce(s => {\n        s.someProp += k\n    })\n    gg( prod(k) )\n\n\n    Note that when there are no parameters like k, production doesnt have to be seperated.\n    This pattern is seen on TestManager and on TestInstance.\n*/\n\n\n\nexport default {\n\n    forceUpdate: () => produce(s => {\n        s.dummy = Math.random()\n    }),\n    // changing a dummy variable triggers App re-render.\n\n    toggleLighting: () => produce(s => {\n        if (s.lighting === 'light') {\n            window.localStorage.lighting = 'dark'\n            s.lighting = 'dark'\n        }\n        else {\n            window.localStorage.lighting = 'light'\n            s.lighting = 'light'\n        }\n    }),\n    updateLanguage: (text, language) => produce(s => {\n        s.text = text\n        s.language = language\n        s.languageUpdateNeeded = false\n    }),\n    fetchLanguage: language => produce(s => {\n        s.language = language\n        s.languageUpdateNeeded = true\n    }),\n    levelComplete: no => produce(s => {\n        s.wonLevels[no-1] = true\n        window.localStorage.wonLevels = JSON.stringify( s.wonLevels )\n    }),\n    updateProductions: (map, initial, errorMsgInd) => produce(s => {\n        s.prodMap = map\n        s.initialState = initial\n        s.errorMsgInd = errorMsgInd\n    })\n}\n","\n\nimport {render, h, Fragment} from 'preact'\nimport {useContext} from 'preact/hooks'\nimport {context, urlPrefix} from '../utils/init'\nimport prod from '../utils/productions'\n\n// NOTE: please omit urlPrefix while using. prefixes are added here, to avoid clutter\nexport default function Link({href, title, children}) {\n\n    let [g,gg] = useContext(context)\n    let newLink = `${urlPrefix}${href}`\n    return <a\n        href={newLink}\n        class='Link'\n        title={title}\n        onClick={handleClick}\n    >\n        {children}\n    </a>\n\n\n    function handleClick(ev) {\n        ev.preventDefault()\n        history.pushState( {}, '', newLink)\n        gg( prod.forceUpdate() )\n    }\n}\n","\nimport {useContext} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\nimport {context, languages} from '../utils/init'\nimport prod from '../utils/productions'\n\n\nexport default function LanguageManager() {\n    let [g,gg] = useContext(context)\n\n    return <div>\n        <select\n        title={g.text[45]}\n        onInput={ev => gg( prod.fetchLanguage( languages[ev.target.selectedIndex]))}>\n            {\n                languages.map((l,i) => <option\n                    key={i}\n                    selected={ g.language === l }\n                    value={l}>\n                        {l}\n                    </option>)\n            }\n        </select>\n    </div>\n\n}\n","\nimport {useState, useEffect, useContext} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\nimport {context, urlPrefix} from '../utils/init'\nimport prod from '../utils/productions'\nimport Link from './Link'\nimport LanguageManager from './LanguageManager'\n\nexport default function Header () {\n    let [g,gg] = useContext(context)\n    let [moonIcon, setMoonIcon] = useState('')\n    let [sunIcon, setSunIcon] = useState('')\n\n    useEffect(() => {\n        fetch(`${urlPrefix}/img/moon.svg`)\n        .then(res => res.text())\n        .then(svg => {\n            setMoonIcon(svg)\n        })\n        .catch(console.error)\n\n        fetch(`${urlPrefix}/img/sun.svg`)\n        .then(res => res.text())\n        .then(svg => {\n            setSunIcon(svg)\n        })\n        .catch(console.error)\n    }, [])\n\n    let icon = g.lighting === 'light' ? sunIcon : moonIcon\n\n    return <div className=\"Header\">\n        <div>\n            <Link href='/' title={g.text[42]}>\n                {g.text[0]}\n            </Link>\n        </div>\n        <div\n            title={g.lighting === 'light' ? g.text[44] : g.text[43]}\n            onClick={() => gg( prod.toggleLighting() )}\n            dangerouslySetInnerHTML={{__html: icon}}>\n        </div>\n        <LanguageManager />\n        <Link href='/help' title={g.text[46]}>\n            ?\n        </Link>\n        <a href='https://github.com/denizbasgoren/turing'>\n            Github\n        </a>\n    </div>\n}\n","\nimport {urlPrefix} from '../utils/init'\n\n// href: regex (urlPrefix must be omitted!)\n// children will be rendered conditionally\n// children will be passed href prop, which is what is returned from exec\nexport default function Route({href, children}) {\n    \n    let result = href.exec( location.pathname.substring( urlPrefix.length ) )\n    // substring will skip the urlPrefix\n\n\n    if (result) {\n        if (children instanceof Array) return children.map( c => {\n            c.props.href = result\n            return c\n        })\n        else {\n            children.props.href = result\n            return children\n        }\n    }\n}\n","\nimport {render, h, Fragment} from 'preact'\n\n// used only on MenuPage\nexport default function LevelButton({isComplete, levelNo, title }) {\n    return <div\n        className={`LevelButton ${isComplete && 'complete'}`}\n        title={title}    \n    >\n        <div>\n            {levelNo}\n        </div>\n        <div>\n            <div className='title'>\n                {title}\n            </div>\n            {\n                isComplete && <span className='tick'></span>\n            }\n        </div>\n    </div>\n}\n","\nimport {useContext, useEffect} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\nimport {context, levelCount} from '../utils/init'\nimport prod from '../utils/productions'\nimport Link from './Link'\nimport LevelButton from '../components/LevelButton'\n\n\n// note that level numbers start from 1, while indexes on state and localStorage start from 0.\nexport default function MenuPage() {\n    let [g,gg] = useContext(context)\n\n    useEffect(() => {\n        document.title = g.text[0]\n    }, [g.languageUpdateNeeded])\n\n    return <div className=\"MenuPage\">\n        {\n            Array(levelCount).fill(true).map( (tt,i) => <Link href={`/${i+1}`}>\n                <LevelButton title={g.text[i+1]} levelNo={i+1}\n                isComplete={g.wonLevels[i]}\n                onClick={handleClick.bind(this, i+1)} />\n            </Link>)\n        }\n    </div>\n\n    function handleClick (no, ev) {\n        gg( prod.levelComplete(no) )\n    }\n}\n","\nimport {useState, useRef, useEffect} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\n\n\n// onInput -> onInput(bindings, rawInput)\nexport default function Input({text, raw, isEditable, errorMsg, onInput}) {\n    let [isEditMode, setEditMode] = useState(false)\n    let textareaRef = useRef()\n    let parsedInput = raw.parseProductions()\n    \n    useEffect(() => {\n        if (isEditMode) {\n            textareaRef.current.focus()\n        }\n    }, [isEditMode])\n\n    return <div className='Input'>\n        {\n            isEditable ?\n                <div className='navbar'>\n                    <button className={!isEditMode && 'selected'} onClick={() => setEditMode(false)}>\n                        {text[47]}\n                    </button>\n                    <button className={isEditMode && 'selected'} onClick={() => setEditMode(true)}>\n                        {text[48]}\n                    </button>\n                </div> : null\n        }\n        \n        <div className=\"errorMessage\">\n            <p className='red'> {errorMsg} </p>\n        </div>\n        {\n            isEditMode\n            ? <textarea\n                // onBlur={handleSwitchMode}\n                onInput={handleInput}\n                cols=\"25\"\n                rows=\"10\"\n                spellcheck={false}\n                ref={textareaRef}\n            >\n                {raw}\n            </textarea>\n            : <table>\n                <thead>\n                    <tr>\n                        <td>{text[11]}</td>\n                        <td>{text[12]}</td>\n                        <td>{text[13]}</td>\n                        <td>{text[14]}</td>\n                        <td>{text[15]}</td>\n                    </tr>\n                </thead>\n                <tbody className={errorMsg ? 'red' : null}>\n                    {\n                        parsedInput.map((r,i1) => <tr key={6*i1}>\n                            {\n                                r.map((c,i2) => <td key={6*i1+i2+1}>\n                                    {c}\n                                </td>)\n                            }\n                        </tr>)\n                    }\n                </tbody>\n            </table>\n        }   \n    </div>\n\n\n\n    // triggers on every keystroke\n    function handleInput (ev) {\n        onInput && onInput( ev.target.value )\n    }\n}\n","\n\nimport {useState, useEffect, useContext} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\nimport {context} from '../utils/init'\nimport prod from '../utils/productions'\nimport Input from '../components/Input'\n\n\nexport default function InputManager({levelNo}) {\n    let [g,gg] = useContext(context)\n    let [raw, setRaw] = useState('')\n\n    useEffect(() => {\n        let locals = JSON.parse(window.localStorage.raw)\n        let localInit = JSON.parse(window.localStorage.initialState)\n        gg( prod.updateProductions({}, localInit[levelNo-1]) )\n        updateProdMap(locals[levelNo-1], localInit[levelNo-1])\n    }, [levelNo])\n    // onmount and when level changes, get raw from localStorage.\n    // see the interfaces at main.js\n\n    return <div className='InputManager'>\n        <Input \n            text={g.text}\n            isEditable={true}\n            raw={raw}\n            errorMsg={g.text[g.errorMsgInd]}\n            onInput={raw => updateProdMap(raw, g.initialState)}\n        />\n        <div className='InitialState'>\n            <span> {g.text[16]} </span>\n            <input type=\"text\" value={g.initialState} onInput={ev => updateProdMap(raw, ev.target.value)}/>\n        </div>\n    </div>\n\n    function updateProdMap (raw, initialState) {\n        let result = analyseProductions(raw.parseProductions(), initialState)\n\n        setRaw(raw)\n        gg( prod.updateProductions(result.map, initialState, result.errorMsgInd) )\n\n        // Save to localStorage\n        let locals = JSON.parse(window.localStorage.raw)\n        let localInit = JSON.parse(window.localStorage.initialState)\n        locals[levelNo-1] = raw\n        localInit[levelNo-1] = initialState\n        window.localStorage.raw = JSON.stringify(locals)\n        window.localStorage.initialState = JSON.stringify(localInit)\n    }\n\n    function analyseProductions (parsed, initState) {\n        let result = {map: {}, errorMsgInd: undefined}\n    \n        // empty?\n        if (parsed[parsed.length-1].length === 0) {\n            result.errorMsgInd = 17\n            return result\n        }\n    \n        // not mod 5?\n        if ( parsed[parsed.length-1].length % 5 !== 0) {\n            result.errorMsgInd = 18\n            return result\n        }\n    \n        // no init?\n        let initFound = false\n        for (let i = 0; i<parsed.length; i++) {\n            if (parsed[i][0] === initState) {\n                initFound = true\n                break\n            }\n        }\n    \n        if (!initFound) {\n            result.errorMsgInd = 19\n            return result\n        }\n    \n        // movement symbol illegal?\n        for (let i = 0; i<parsed.length; i++) {\n            if (/^[UDRLN]$/.test(parsed[i][4]) !== true ) {\n                result.errorMsgInd = 20\n                return result\n            }\n        }\n    \n        // state names illegal?\n        for (let i = 0; i<parsed.length; i++) {\n            let regex = /^.{1,10}$/i\n            if (!regex.test(parsed[i][0]) ||\n            !regex.test(parsed[i][2]) ) {\n                result.errorMsgInd = 21\n                return result\n            }\n        }\n    \n        // tape values illegal?\n        for (let i = 0; i<parsed.length; i++) {\n            let regex = /^.{1,2}$/i\n            if (!regex.test(parsed[i][1]) ||\n            !regex.test(parsed[i][3]) ) {\n                result.errorMsgInd = 22\n                return result\n            }\n        }\n    \n        // no final?\n        let finalFound = false\n        for (let i = 0; i<parsed.length; i++) {\n            if (parsed[i][2] === 'ACCEPT') {\n                finalFound = true\n                break\n            }\n        }\n    \n        if (!finalFound) {\n            result.errorMsgInd = 23\n            return result\n        }\n    \n        // all is well\n        // form the map (see interface of ProdMap on main.js)\n        for (let i = 0; i<parsed.length; i++) {\n            let key = `${parsed[i][0]} ${parsed[i][1]}`\n            if ( !result.map[key] ) {\n                result.map[key] = [ ...parsed[i] ]\n            }\n        }\n\n        return result\n    }\n}\n","function getDefaults() {\n  return {\n    baseUrl: null,\n    breaks: false,\n    gfm: true,\n    headerIds: true,\n    headerPrefix: '',\n    highlight: null,\n    langPrefix: 'language-',\n    mangle: true,\n    pedantic: false,\n    renderer: null,\n    sanitize: false,\n    sanitizer: null,\n    silent: false,\n    smartLists: false,\n    smartypants: false,\n    xhtml: false\n  };\n}\n\nfunction changeDefaults(newDefaults) {\n  module.exports.defaults = newDefaults;\n}\n\nmodule.exports = {\n  defaults: getDefaults(),\n  getDefaults,\n  changeDefaults\n};\n","/**\n * Helpers\n */\nconst escapeTest = /[&<>\"']/;\nconst escapeReplace = /[&<>\"']/g;\nconst escapeTestNoEncode = /[<>\"']|&(?!#?\\w+;)/;\nconst escapeReplaceNoEncode = /[<>\"']|&(?!#?\\w+;)/g;\nconst escapeReplacements = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;'\n};\nconst getEscapeReplacement = (ch) => escapeReplacements[ch];\nfunction escape(html, encode) {\n  if (encode) {\n    if (escapeTest.test(html)) {\n      return html.replace(escapeReplace, getEscapeReplacement);\n    }\n  } else {\n    if (escapeTestNoEncode.test(html)) {\n      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);\n    }\n  }\n\n  return html;\n}\n\nconst unescapeTest = /&(#(?:\\d+)|(?:#x[0-9A-Fa-f]+)|(?:\\w+));?/ig;\n\nfunction unescape(html) {\n  // explicitly match decimal, hex, and named HTML entities\n  return html.replace(unescapeTest, (_, n) => {\n    n = n.toLowerCase();\n    if (n === 'colon') return ':';\n    if (n.charAt(0) === '#') {\n      return n.charAt(1) === 'x'\n        ? String.fromCharCode(parseInt(n.substring(2), 16))\n        : String.fromCharCode(+n.substring(1));\n    }\n    return '';\n  });\n}\n\nconst caret = /(^|[^\\[])\\^/g;\nfunction edit(regex, opt) {\n  regex = regex.source || regex;\n  opt = opt || '';\n  const obj = {\n    replace: (name, val) => {\n      val = val.source || val;\n      val = val.replace(caret, '$1');\n      regex = regex.replace(name, val);\n      return obj;\n    },\n    getRegex: () => {\n      return new RegExp(regex, opt);\n    }\n  };\n  return obj;\n}\n\nconst nonWordAndColonTest = /[^\\w:]/g;\nconst originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;\nfunction cleanUrl(sanitize, base, href) {\n  if (sanitize) {\n    let prot;\n    try {\n      prot = decodeURIComponent(unescape(href))\n        .replace(nonWordAndColonTest, '')\n        .toLowerCase();\n    } catch (e) {\n      return null;\n    }\n    if (prot.indexOf('javascript:') === 0 || prot.indexOf('vbscript:') === 0 || prot.indexOf('data:') === 0) {\n      return null;\n    }\n  }\n  if (base && !originIndependentUrl.test(href)) {\n    href = resolveUrl(base, href);\n  }\n  try {\n    href = encodeURI(href).replace(/%25/g, '%');\n  } catch (e) {\n    return null;\n  }\n  return href;\n}\n\nconst baseUrls = {};\nconst justDomain = /^[^:]+:\\/*[^/]*$/;\nconst protocol = /^([^:]+:)[\\s\\S]*$/;\nconst domain = /^([^:]+:\\/*[^/]*)[\\s\\S]*$/;\n\nfunction resolveUrl(base, href) {\n  if (!baseUrls[' ' + base]) {\n    // we can ignore everything in base after the last slash of its path component,\n    // but we might need to add _that_\n    // https://tools.ietf.org/html/rfc3986#section-3\n    if (justDomain.test(base)) {\n      baseUrls[' ' + base] = base + '/';\n    } else {\n      baseUrls[' ' + base] = rtrim(base, '/', true);\n    }\n  }\n  base = baseUrls[' ' + base];\n  const relativeBase = base.indexOf(':') === -1;\n\n  if (href.substring(0, 2) === '//') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(protocol, '$1') + href;\n  } else if (href.charAt(0) === '/') {\n    if (relativeBase) {\n      return href;\n    }\n    return base.replace(domain, '$1') + href;\n  } else {\n    return base + href;\n  }\n}\n\nconst noopTest = { exec: function noopTest() {} };\n\nfunction merge(obj) {\n  let i = 1,\n    target,\n    key;\n\n  for (; i < arguments.length; i++) {\n    target = arguments[i];\n    for (key in target) {\n      if (Object.prototype.hasOwnProperty.call(target, key)) {\n        obj[key] = target[key];\n      }\n    }\n  }\n\n  return obj;\n}\n\nfunction splitCells(tableRow, count) {\n  // ensure that every cell-delimiting pipe has a space\n  // before it to distinguish it from an escaped pipe\n  const row = tableRow.replace(/\\|/g, (match, offset, str) => {\n      let escaped = false,\n        curr = offset;\n      while (--curr >= 0 && str[curr] === '\\\\') escaped = !escaped;\n      if (escaped) {\n        // odd number of slashes means | is escaped\n        // so we leave it alone\n        return '|';\n      } else {\n        // add space before unescaped |\n        return ' |';\n      }\n    }),\n    cells = row.split(/ \\|/);\n  let i = 0;\n\n  if (cells.length > count) {\n    cells.splice(count);\n  } else {\n    while (cells.length < count) cells.push('');\n  }\n\n  for (; i < cells.length; i++) {\n    // leading or trailing whitespace is ignored per the gfm spec\n    cells[i] = cells[i].trim().replace(/\\\\\\|/g, '|');\n  }\n  return cells;\n}\n\n// Remove trailing 'c's. Equivalent to str.replace(/c*$/, '').\n// /c*$/ is vulnerable to REDOS.\n// invert: Remove suffix of non-c chars instead. Default falsey.\nfunction rtrim(str, c, invert) {\n  const l = str.length;\n  if (l === 0) {\n    return '';\n  }\n\n  // Length of suffix matching the invert condition.\n  let suffLen = 0;\n\n  // Step left until we fail to match the invert condition.\n  while (suffLen < l) {\n    const currChar = str.charAt(l - suffLen - 1);\n    if (currChar === c && !invert) {\n      suffLen++;\n    } else if (currChar !== c && invert) {\n      suffLen++;\n    } else {\n      break;\n    }\n  }\n\n  return str.substr(0, l - suffLen);\n}\n\nfunction findClosingBracket(str, b) {\n  if (str.indexOf(b[1]) === -1) {\n    return -1;\n  }\n  const l = str.length;\n  let level = 0,\n    i = 0;\n  for (; i < l; i++) {\n    if (str[i] === '\\\\') {\n      i++;\n    } else if (str[i] === b[0]) {\n      level++;\n    } else if (str[i] === b[1]) {\n      level--;\n      if (level < 0) {\n        return i;\n      }\n    }\n  }\n  return -1;\n}\n\nfunction checkSanitizeDeprecation(opt) {\n  if (opt && opt.sanitize && !opt.silent) {\n    console.warn('marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options');\n  }\n}\n\nmodule.exports = {\n  escape,\n  unescape,\n  edit,\n  cleanUrl,\n  resolveUrl,\n  noopTest,\n  merge,\n  splitCells,\n  rtrim,\n  findClosingBracket,\n  checkSanitizeDeprecation\n};\n","const {\n  noopTest,\n  edit,\n  merge\n} = require('./helpers.js');\n\n/**\n * Block-Level Grammar\n */\nconst block = {\n  newline: /^\\n+/,\n  code: /^( {4}[^\\n]+\\n*)+/,\n  fences: /^ {0,3}(`{3,}|~{3,})([^`~\\n]*)\\n(?:|([\\s\\S]*?)\\n)(?: {0,3}\\1[~`]* *(?:\\n+|$)|$)/,\n  hr: /^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)/,\n  heading: /^ {0,3}(#{1,6}) +([^\\n]*?)(?: +#+)? *(?:\\n+|$)/,\n  blockquote: /^( {0,3}> ?(paragraph|[^\\n]*)(?:\\n|$))+/,\n  list: /^( {0,3})(bull) [\\s\\S]+?(?:hr|def|\\n{2,}(?! )(?!\\1bull )\\n*|\\s*$)/,\n  html: '^ {0,3}(?:' // optional indentation\n    + '<(script|pre|style)[\\\\s>][\\\\s\\\\S]*?(?:</\\\\1>[^\\\\n]*\\\\n+|$)' // (1)\n    + '|comment[^\\\\n]*(\\\\n+|$)' // (2)\n    + '|<\\\\?[\\\\s\\\\S]*?\\\\?>\\\\n*' // (3)\n    + '|<![A-Z][\\\\s\\\\S]*?>\\\\n*' // (4)\n    + '|<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>\\\\n*' // (5)\n    + '|</?(tag)(?: +|\\\\n|/?>)[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (6)\n    + '|<(?!script|pre|style)([a-z][\\\\w-]*)(?:attribute)*? */?>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) open tag\n    + '|</(?!script|pre|style)[a-z][\\\\w-]*\\\\s*>(?=[ \\\\t]*(?:\\\\n|$))[\\\\s\\\\S]*?(?:\\\\n{2,}|$)' // (7) closing tag\n    + ')',\n  def: /^ {0,3}\\[(label)\\]: *\\n? *<?([^\\s>]+)>?(?:(?: +\\n? *| *\\n *)(title))? *(?:\\n+|$)/,\n  nptable: noopTest,\n  table: noopTest,\n  lheading: /^([^\\n]+)\\n {0,3}(=+|-+) *(?:\\n+|$)/,\n  // regex template, placeholders will be replaced according to different paragraph\n  // interruption rules of commonmark and the original markdown spec:\n  _paragraph: /^([^\\n]+(?:\\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\\n]+)*)/,\n  text: /^[^\\n]+/\n};\n\nblock._label = /(?!\\s*\\])(?:\\\\[\\[\\]]|[^\\[\\]])+/;\nblock._title = /(?:\"(?:\\\\\"?|[^\"\\\\])*\"|'[^'\\n]*(?:\\n[^'\\n]+)*\\n?'|\\([^()]*\\))/;\nblock.def = edit(block.def)\n  .replace('label', block._label)\n  .replace('title', block._title)\n  .getRegex();\n\nblock.bullet = /(?:[*+-]|\\d{1,9}\\.)/;\nblock.item = /^( *)(bull) ?[^\\n]*(?:\\n(?!\\1bull ?)[^\\n]*)*/;\nblock.item = edit(block.item, 'gm')\n  .replace(/bull/g, block.bullet)\n  .getRegex();\n\nblock.list = edit(block.list)\n  .replace(/bull/g, block.bullet)\n  .replace('hr', '\\\\n+(?=\\\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\\\* *){3,})(?:\\\\n+|$))')\n  .replace('def', '\\\\n+(?=' + block.def.source + ')')\n  .getRegex();\n\nblock._tag = 'address|article|aside|base|basefont|blockquote|body|caption'\n  + '|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption'\n  + '|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe'\n  + '|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option'\n  + '|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr'\n  + '|track|ul';\nblock._comment = /<!--(?!-?>)[\\s\\S]*?-->/;\nblock.html = edit(block.html, 'i')\n  .replace('comment', block._comment)\n  .replace('tag', block._tag)\n  .replace('attribute', / +[a-zA-Z:_][\\w.:-]*(?: *= *\"[^\"\\n]*\"| *= *'[^'\\n]*'| *= *[^\\s\"'=<>`]+)?/)\n  .getRegex();\n\nblock.paragraph = edit(block._paragraph)\n  .replace('hr', block.hr)\n  .replace('heading', ' {0,3}#{1,6} +')\n  .replace('|lheading', '') // setex headings don't interrupt commonmark paragraphs\n  .replace('blockquote', ' {0,3}>')\n  .replace('fences', ' {0,3}(?:`{3,}|~{3,})[^`\\\\n]*\\\\n')\n  .replace('list', ' {0,3}(?:[*+-]|1[.)]) ') // only lists starting from 1 can interrupt\n  .replace('html', '</?(?:tag)(?: +|\\\\n|/?>)|<(?:script|pre|style|!--)')\n  .replace('tag', block._tag) // pars can be interrupted by type (6) html blocks\n  .getRegex();\n\nblock.blockquote = edit(block.blockquote)\n  .replace('paragraph', block.paragraph)\n  .getRegex();\n\n/**\n * Normal Block Grammar\n */\n\nblock.normal = merge({}, block);\n\n/**\n * GFM Block Grammar\n */\n\nblock.gfm = merge({}, block.normal, {\n  nptable: /^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:.*[^>\\n ].*(?:\\n|$))*)\\n*|$)/,\n  table: /^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n((?: *[^>\\n ].*(?:\\n|$))*)\\n*|$)/\n});\n\n/**\n * Pedantic grammar (original John Gruber's loose markdown specification)\n */\n\nblock.pedantic = merge({}, block.normal, {\n  html: edit(\n    '^ *(?:comment *(?:\\\\n|\\\\s*$)'\n    + '|<(tag)[\\\\s\\\\S]+?</\\\\1> *(?:\\\\n{2,}|\\\\s*$)' // closed tag\n    + '|<tag(?:\"[^\"]*\"|\\'[^\\']*\\'|\\\\s[^\\'\"/>\\\\s]*)*?/?> *(?:\\\\n{2,}|\\\\s*$))')\n    .replace('comment', block._comment)\n    .replace(/tag/g, '(?!(?:'\n      + 'a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub'\n      + '|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)'\n      + '\\\\b)\\\\w+(?!:|[^\\\\w\\\\s@]*@)\\\\b')\n    .getRegex(),\n  def: /^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +([\"(][^\\n]+[\")]))? *(?:\\n+|$)/,\n  heading: /^ *(#{1,6}) *([^\\n]+?) *(?:#+ *)?(?:\\n+|$)/,\n  fences: noopTest, // fences not supported\n  paragraph: edit(block.normal._paragraph)\n    .replace('hr', block.hr)\n    .replace('heading', ' *#{1,6} *[^\\n]')\n    .replace('lheading', block.lheading)\n    .replace('blockquote', ' {0,3}>')\n    .replace('|fences', '')\n    .replace('|list', '')\n    .replace('|html', '')\n    .getRegex()\n});\n\n/**\n * Inline-Level Grammar\n */\nconst inline = {\n  escape: /^\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/,\n  autolink: /^<(scheme:[^\\s\\x00-\\x1f<>]*|email)>/,\n  url: noopTest,\n  tag: '^comment'\n    + '|^</[a-zA-Z][\\\\w:-]*\\\\s*>' // self-closing tag\n    + '|^<[a-zA-Z][\\\\w-]*(?:attribute)*?\\\\s*/?>' // open tag\n    + '|^<\\\\?[\\\\s\\\\S]*?\\\\?>' // processing instruction, e.g. <?php ?>\n    + '|^<![a-zA-Z]+\\\\s[\\\\s\\\\S]*?>' // declaration, e.g. <!DOCTYPE html>\n    + '|^<!\\\\[CDATA\\\\[[\\\\s\\\\S]*?\\\\]\\\\]>', // CDATA section\n  link: /^!?\\[(label)\\]\\(\\s*(href)(?:\\s+(title))?\\s*\\)/,\n  reflink: /^!?\\[(label)\\]\\[(?!\\s*\\])((?:\\\\[\\[\\]]?|[^\\[\\]\\\\])+)\\]/,\n  nolink: /^!?\\[(?!\\s*\\])((?:\\[[^\\[\\]]*\\]|\\\\[\\[\\]]|[^\\[\\]])*)\\](?:\\[\\])?/,\n  strong: /^__([^\\s_])__(?!_)|^\\*\\*([^\\s*])\\*\\*(?!\\*)|^__([^\\s][\\s\\S]*?[^\\s])__(?!_)|^\\*\\*([^\\s][\\s\\S]*?[^\\s])\\*\\*(?!\\*)/,\n  em: /^_([^\\s_])_(?!_)|^\\*([^\\s*<\\[])\\*(?!\\*)|^_([^\\s<][\\s\\S]*?[^\\s_])_(?!_|[^\\spunctuation])|^_([^\\s_<][\\s\\S]*?[^\\s])_(?!_|[^\\spunctuation])|^\\*([^\\s<\"][\\s\\S]*?[^\\s\\*])\\*(?!\\*|[^\\spunctuation])|^\\*([^\\s*\"<\\[][\\s\\S]*?[^\\s])\\*(?!\\*)/,\n  code: /^(`+)([^`]|[^`][\\s\\S]*?[^`])\\1(?!`)/,\n  br: /^( {2,}|\\\\)\\n(?!\\s*$)/,\n  del: noopTest,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*]|\\b_|$)|[^ ](?= {2,}\\n))|(?= {2,}\\n))/\n};\n\n// list of punctuation marks from common mark spec\n// without ` and ] to workaround Rule 17 (inline code blocks/links)\ninline._punctuation = '!\"#$%&\\'()*+,\\\\-./:;<=>?@\\\\[^_{|}~';\ninline.em = edit(inline.em).replace(/punctuation/g, inline._punctuation).getRegex();\n\ninline._escapes = /\\\\([!\"#$%&'()*+,\\-./:;<=>?@\\[\\]\\\\^_`{|}~])/g;\n\ninline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;\ninline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;\ninline.autolink = edit(inline.autolink)\n  .replace('scheme', inline._scheme)\n  .replace('email', inline._email)\n  .getRegex();\n\ninline._attribute = /\\s+[a-zA-Z:_][\\w.:-]*(?:\\s*=\\s*\"[^\"]*\"|\\s*=\\s*'[^']*'|\\s*=\\s*[^\\s\"'=<>`]+)?/;\n\ninline.tag = edit(inline.tag)\n  .replace('comment', block._comment)\n  .replace('attribute', inline._attribute)\n  .getRegex();\n\ninline._label = /(?:\\[[^\\[\\]]*\\]|\\\\.|`[^`]*`|[^\\[\\]\\\\`])*?/;\ninline._href = /<(?:\\\\[<>]?|[^\\s<>\\\\])*>|[^\\s\\x00-\\x1f]*/;\ninline._title = /\"(?:\\\\\"?|[^\"\\\\])*\"|'(?:\\\\'?|[^'\\\\])*'|\\((?:\\\\\\)?|[^)\\\\])*\\)/;\n\ninline.link = edit(inline.link)\n  .replace('label', inline._label)\n  .replace('href', inline._href)\n  .replace('title', inline._title)\n  .getRegex();\n\ninline.reflink = edit(inline.reflink)\n  .replace('label', inline._label)\n  .getRegex();\n\n/**\n * Normal Inline Grammar\n */\n\ninline.normal = merge({}, inline);\n\n/**\n * Pedantic Inline Grammar\n */\n\ninline.pedantic = merge({}, inline.normal, {\n  strong: /^__(?=\\S)([\\s\\S]*?\\S)__(?!_)|^\\*\\*(?=\\S)([\\s\\S]*?\\S)\\*\\*(?!\\*)/,\n  em: /^_(?=\\S)([\\s\\S]*?\\S)_(?!_)|^\\*(?=\\S)([\\s\\S]*?\\S)\\*(?!\\*)/,\n  link: edit(/^!?\\[(label)\\]\\((.*?)\\)/)\n    .replace('label', inline._label)\n    .getRegex(),\n  reflink: edit(/^!?\\[(label)\\]\\s*\\[([^\\]]*)\\]/)\n    .replace('label', inline._label)\n    .getRegex()\n});\n\n/**\n * GFM Inline Grammar\n */\n\ninline.gfm = merge({}, inline.normal, {\n  escape: edit(inline.escape).replace('])', '~|])').getRegex(),\n  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,\n  url: /^((?:ftp|https?):\\/\\/|www\\.)(?:[a-zA-Z0-9\\-]+\\.?)+[^\\s<]*|^email/,\n  _backpedal: /(?:[^?!.,:;*_~()&]+|\\([^)]*\\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,\n  del: /^~+(?=\\S)([\\s\\S]*?\\S)~+/,\n  text: /^(`+|[^`])(?:[\\s\\S]*?(?:(?=[\\\\<!\\[`*~]|\\b_|https?:\\/\\/|ftp:\\/\\/|www\\.|$)|[^ ](?= {2,}\\n)|[^a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-](?=[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))|(?= {2,}\\n|[a-zA-Z0-9.!#$%&'*+\\/=?_`{\\|}~-]+@))/\n});\n\ninline.gfm.url = edit(inline.gfm.url, 'i')\n  .replace('email', inline.gfm._extended_email)\n  .getRegex();\n/**\n * GFM + Line Breaks Inline Grammar\n */\n\ninline.breaks = merge({}, inline.gfm, {\n  br: edit(inline.br).replace('{2,}', '*').getRegex(),\n  text: edit(inline.gfm.text)\n    .replace('\\\\b_', '\\\\b_| {2,}\\\\n')\n    .replace(/\\{2,\\}/g, '*')\n    .getRegex()\n});\n\nmodule.exports = {\n  block,\n  inline\n};\n","const { defaults } = require('./defaults.js');\nconst { block } = require('./rules.js');\nconst {\n  rtrim,\n  splitCells,\n  escape\n} = require('./helpers.js');\n\n/**\n * Block Lexer\n */\nmodule.exports = class Lexer {\n  constructor(options) {\n    this.tokens = [];\n    this.tokens.links = Object.create(null);\n    this.options = options || defaults;\n    this.rules = block.normal;\n\n    if (this.options.pedantic) {\n      this.rules = block.pedantic;\n    } else if (this.options.gfm) {\n      this.rules = block.gfm;\n    }\n  }\n\n  /**\n   * Expose Block Rules\n   */\n  static get rules() {\n    return block;\n  }\n\n  /**\n   * Static Lex Method\n   */\n  static lex(src, options) {\n    const lexer = new Lexer(options);\n    return lexer.lex(src);\n  };\n\n  /**\n   * Preprocessing\n   */\n  lex(src) {\n    src = src\n      .replace(/\\r\\n|\\r/g, '\\n')\n      .replace(/\\t/g, '    ');\n\n    return this.token(src, true);\n  };\n\n  /**\n   * Lexing\n   */\n  token(src, top) {\n    src = src.replace(/^ +$/gm, '');\n    let next,\n      loose,\n      cap,\n      bull,\n      b,\n      item,\n      listStart,\n      listItems,\n      t,\n      space,\n      i,\n      tag,\n      l,\n      isordered,\n      istask,\n      ischecked;\n\n    while (src) {\n      // newline\n      if (cap = this.rules.newline.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (cap[0].length > 1) {\n          this.tokens.push({\n            type: 'space'\n          });\n        }\n      }\n\n      // code\n      if (cap = this.rules.code.exec(src)) {\n        const lastToken = this.tokens[this.tokens.length - 1];\n        src = src.substring(cap[0].length);\n        // An indented code block cannot interrupt a paragraph.\n        if (lastToken && lastToken.type === 'paragraph') {\n          lastToken.text += '\\n' + cap[0].trimRight();\n        } else {\n          cap = cap[0].replace(/^ {4}/gm, '');\n          this.tokens.push({\n            type: 'code',\n            codeBlockStyle: 'indented',\n            text: !this.options.pedantic\n              ? rtrim(cap, '\\n')\n              : cap\n          });\n        }\n        continue;\n      }\n\n      // fences\n      if (cap = this.rules.fences.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'code',\n          lang: cap[2] ? cap[2].trim() : cap[2],\n          text: cap[3] || ''\n        });\n        continue;\n      }\n\n      // heading\n      if (cap = this.rules.heading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[1].length,\n          text: cap[2]\n        });\n        continue;\n      }\n\n      // table no leading pipe (gfm)\n      if (cap = this.rules.nptable.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(item.cells[i], item.header.length);\n          }\n\n          this.tokens.push(item);\n\n          continue;\n        }\n      }\n\n      // hr\n      if (cap = this.rules.hr.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'hr'\n        });\n        continue;\n      }\n\n      // blockquote\n      if (cap = this.rules.blockquote.exec(src)) {\n        src = src.substring(cap[0].length);\n\n        this.tokens.push({\n          type: 'blockquote_start'\n        });\n\n        cap = cap[0].replace(/^ *> ?/gm, '');\n\n        // Pass `top` to keep the current\n        // \"toplevel\" state. This is exactly\n        // how markdown.pl works.\n        this.token(cap, top);\n\n        this.tokens.push({\n          type: 'blockquote_end'\n        });\n\n        continue;\n      }\n\n      // list\n      if (cap = this.rules.list.exec(src)) {\n        src = src.substring(cap[0].length);\n        bull = cap[2];\n        isordered = bull.length > 1;\n\n        listStart = {\n          type: 'list_start',\n          ordered: isordered,\n          start: isordered ? +bull : '',\n          loose: false\n        };\n\n        this.tokens.push(listStart);\n\n        // Get each top-level item.\n        cap = cap[0].match(this.rules.item);\n\n        listItems = [];\n        next = false;\n        l = cap.length;\n        i = 0;\n\n        for (; i < l; i++) {\n          item = cap[i];\n\n          // Remove the list item's bullet\n          // so it is seen as the next token.\n          space = item.length;\n          item = item.replace(/^ *([*+-]|\\d+\\.) */, '');\n\n          // Outdent whatever the\n          // list item contains. Hacky.\n          if (~item.indexOf('\\n ')) {\n            space -= item.length;\n            item = !this.options.pedantic\n              ? item.replace(new RegExp('^ {1,' + space + '}', 'gm'), '')\n              : item.replace(/^ {1,4}/gm, '');\n          }\n\n          // Determine whether the next list item belongs here.\n          // Backpedal if it does not belong in this list.\n          if (i !== l - 1) {\n            b = block.bullet.exec(cap[i + 1])[0];\n            if (bull.length > 1 ? b.length === 1\n              : (b.length > 1 || (this.options.smartLists && b !== bull))) {\n              src = cap.slice(i + 1).join('\\n') + src;\n              i = l - 1;\n            }\n          }\n\n          // Determine whether item is loose or not.\n          // Use: /(^|\\n)(?! )[^\\n]+\\n\\n(?!\\s*$)/\n          // for discount behavior.\n          loose = next || /\\n\\n(?!\\s*$)/.test(item);\n          if (i !== l - 1) {\n            next = item.charAt(item.length - 1) === '\\n';\n            if (!loose) loose = next;\n          }\n\n          if (loose) {\n            listStart.loose = true;\n          }\n\n          // Check for task list items\n          istask = /^\\[[ xX]\\] /.test(item);\n          ischecked = undefined;\n          if (istask) {\n            ischecked = item[1] !== ' ';\n            item = item.replace(/^\\[[ xX]\\] +/, '');\n          }\n\n          t = {\n            type: 'list_item_start',\n            task: istask,\n            checked: ischecked,\n            loose: loose\n          };\n\n          listItems.push(t);\n          this.tokens.push(t);\n\n          // Recurse.\n          this.token(item, false);\n\n          this.tokens.push({\n            type: 'list_item_end'\n          });\n        }\n\n        if (listStart.loose) {\n          l = listItems.length;\n          i = 0;\n          for (; i < l; i++) {\n            listItems[i].loose = true;\n          }\n        }\n\n        this.tokens.push({\n          type: 'list_end'\n        });\n\n        continue;\n      }\n\n      // html\n      if (cap = this.rules.html.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: this.options.sanitize\n            ? 'paragraph'\n            : 'html',\n          pre: !this.options.sanitizer\n            && (cap[1] === 'pre' || cap[1] === 'script' || cap[1] === 'style'),\n          text: this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0]\n        });\n        continue;\n      }\n\n      // def\n      if (top && (cap = this.rules.def.exec(src))) {\n        src = src.substring(cap[0].length);\n        if (cap[3]) cap[3] = cap[3].substring(1, cap[3].length - 1);\n        tag = cap[1].toLowerCase().replace(/\\s+/g, ' ');\n        if (!this.tokens.links[tag]) {\n          this.tokens.links[tag] = {\n            href: cap[2],\n            title: cap[3]\n          };\n        }\n        continue;\n      }\n\n      // table (gfm)\n      if (cap = this.rules.table.exec(src)) {\n        item = {\n          type: 'table',\n          header: splitCells(cap[1].replace(/^ *| *\\| *$/g, '')),\n          align: cap[2].replace(/^ *|\\| *$/g, '').split(/ *\\| */),\n          cells: cap[3] ? cap[3].replace(/\\n$/, '').split('\\n') : []\n        };\n\n        if (item.header.length === item.align.length) {\n          src = src.substring(cap[0].length);\n\n          for (i = 0; i < item.align.length; i++) {\n            if (/^ *-+: *$/.test(item.align[i])) {\n              item.align[i] = 'right';\n            } else if (/^ *:-+: *$/.test(item.align[i])) {\n              item.align[i] = 'center';\n            } else if (/^ *:-+ *$/.test(item.align[i])) {\n              item.align[i] = 'left';\n            } else {\n              item.align[i] = null;\n            }\n          }\n\n          for (i = 0; i < item.cells.length; i++) {\n            item.cells[i] = splitCells(\n              item.cells[i].replace(/^ *\\| *| *\\| *$/g, ''),\n              item.header.length);\n          }\n\n          this.tokens.push(item);\n\n          continue;\n        }\n      }\n\n      // lheading\n      if (cap = this.rules.lheading.exec(src)) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'heading',\n          depth: cap[2].charAt(0) === '=' ? 1 : 2,\n          text: cap[1]\n        });\n        continue;\n      }\n\n      // top-level paragraph\n      if (top && (cap = this.rules.paragraph.exec(src))) {\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'paragraph',\n          text: cap[1].charAt(cap[1].length - 1) === '\\n'\n            ? cap[1].slice(0, -1)\n            : cap[1]\n        });\n        continue;\n      }\n\n      // text\n      if (cap = this.rules.text.exec(src)) {\n        // Top-level should never reach here.\n        src = src.substring(cap[0].length);\n        this.tokens.push({\n          type: 'text',\n          text: cap[0]\n        });\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return this.tokens;\n  };\n};\n","const { defaults } = require('./defaults.js');\nconst {\n  cleanUrl,\n  escape\n} = require('./helpers.js');\n\n/**\n * Renderer\n */\nmodule.exports = class Renderer {\n  constructor(options) {\n    this.options = options || defaults;\n  }\n\n  code(code, infostring, escaped) {\n    const lang = (infostring || '').match(/\\S*/)[0];\n    if (this.options.highlight) {\n      const out = this.options.highlight(code, lang);\n      if (out != null && out !== code) {\n        escaped = true;\n        code = out;\n      }\n    }\n\n    if (!lang) {\n      return '<pre><code>'\n        + (escaped ? code : escape(code, true))\n        + '</code></pre>';\n    }\n\n    return '<pre><code class=\"'\n      + this.options.langPrefix\n      + escape(lang, true)\n      + '\">'\n      + (escaped ? code : escape(code, true))\n      + '</code></pre>\\n';\n  };\n\n  blockquote(quote) {\n    return '<blockquote>\\n' + quote + '</blockquote>\\n';\n  };\n\n  html(html) {\n    return html;\n  };\n\n  heading(text, level, raw, slugger) {\n    if (this.options.headerIds) {\n      return '<h'\n        + level\n        + ' id=\"'\n        + this.options.headerPrefix\n        + slugger.slug(raw)\n        + '\">'\n        + text\n        + '</h'\n        + level\n        + '>\\n';\n    }\n    // ignore IDs\n    return '<h' + level + '>' + text + '</h' + level + '>\\n';\n  };\n\n  hr() {\n    return this.options.xhtml ? '<hr/>\\n' : '<hr>\\n';\n  };\n\n  list(body, ordered, start) {\n    const type = ordered ? 'ol' : 'ul',\n      startatt = (ordered && start !== 1) ? (' start=\"' + start + '\"') : '';\n    return '<' + type + startatt + '>\\n' + body + '</' + type + '>\\n';\n  };\n\n  listitem(text) {\n    return '<li>' + text + '</li>\\n';\n  };\n\n  checkbox(checked) {\n    return '<input '\n      + (checked ? 'checked=\"\" ' : '')\n      + 'disabled=\"\" type=\"checkbox\"'\n      + (this.options.xhtml ? ' /' : '')\n      + '> ';\n  };\n\n  paragraph(text) {\n    return '<p>' + text + '</p>\\n';\n  };\n\n  table(header, body) {\n    if (body) body = '<tbody>' + body + '</tbody>';\n\n    return '<table>\\n'\n      + '<thead>\\n'\n      + header\n      + '</thead>\\n'\n      + body\n      + '</table>\\n';\n  };\n\n  tablerow(content) {\n    return '<tr>\\n' + content + '</tr>\\n';\n  };\n\n  tablecell(content, flags) {\n    const type = flags.header ? 'th' : 'td';\n    const tag = flags.align\n      ? '<' + type + ' align=\"' + flags.align + '\">'\n      : '<' + type + '>';\n    return tag + content + '</' + type + '>\\n';\n  };\n\n  // span level renderer\n  strong(text) {\n    return '<strong>' + text + '</strong>';\n  };\n\n  em(text) {\n    return '<em>' + text + '</em>';\n  };\n\n  codespan(text) {\n    return '<code>' + text + '</code>';\n  };\n\n  br() {\n    return this.options.xhtml ? '<br/>' : '<br>';\n  };\n\n  del(text) {\n    return '<del>' + text + '</del>';\n  };\n\n  link(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n    let out = '<a href=\"' + escape(href) + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += '>' + text + '</a>';\n    return out;\n  };\n\n  image(href, title, text) {\n    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);\n    if (href === null) {\n      return text;\n    }\n\n    let out = '<img src=\"' + href + '\" alt=\"' + text + '\"';\n    if (title) {\n      out += ' title=\"' + title + '\"';\n    }\n    out += this.options.xhtml ? '/>' : '>';\n    return out;\n  };\n\n  text(text) {\n    return text;\n  };\n};\n","/**\n * Slugger generates header id\n */\nmodule.exports = class Slugger {\n  constructor() {\n    this.seen = {};\n  }\n\n  /**\n   * Convert string to unique id\n   */\n  slug(value) {\n    let slug = value\n      .toLowerCase()\n      .trim()\n      .replace(/[\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,./:;<=>?@[\\]^`{|}~]/g, '')\n      .replace(/\\s/g, '-');\n\n    if (this.seen.hasOwnProperty(slug)) {\n      const originalSlug = slug;\n      do {\n        this.seen[originalSlug]++;\n        slug = originalSlug + '-' + this.seen[originalSlug];\n      } while (this.seen.hasOwnProperty(slug));\n    }\n    this.seen[slug] = 0;\n\n    return slug;\n  };\n};\n","const Renderer = require('./Renderer.js');\nconst { defaults } = require('./defaults.js');\nconst { inline } = require('./rules.js');\nconst {\n  findClosingBracket,\n  escape\n} = require('./helpers.js');\n\n/**\n * Inline Lexer & Compiler\n */\nmodule.exports = class InlineLexer {\n  constructor(links, options) {\n    this.options = options || defaults;\n    this.links = links;\n    this.rules = inline.normal;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n\n    if (!this.links) {\n      throw new Error('Tokens array requires a `links` property.');\n    }\n\n    if (this.options.pedantic) {\n      this.rules = inline.pedantic;\n    } else if (this.options.gfm) {\n      if (this.options.breaks) {\n        this.rules = inline.breaks;\n      } else {\n        this.rules = inline.gfm;\n      }\n    }\n  }\n\n  /**\n   * Expose Inline Rules\n   */\n  static get rules() {\n    return inline;\n  }\n\n  /**\n   * Static Lexing/Compiling Method\n   */\n  static output(src, links, options) {\n    const inline = new InlineLexer(links, options);\n    return inline.output(src);\n  }\n\n  /**\n   * Lexing/Compiling\n   */\n  output(src) {\n    let out = '',\n      link,\n      text,\n      href,\n      title,\n      cap,\n      prevCapZero;\n\n    while (src) {\n      // escape\n      if (cap = this.rules.escape.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += escape(cap[1]);\n        continue;\n      }\n\n      // tag\n      if (cap = this.rules.tag.exec(src)) {\n        if (!this.inLink && /^<a /i.test(cap[0])) {\n          this.inLink = true;\n        } else if (this.inLink && /^<\\/a>/i.test(cap[0])) {\n          this.inLink = false;\n        }\n        if (!this.inRawBlock && /^<(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = true;\n        } else if (this.inRawBlock && /^<\\/(pre|code|kbd|script)(\\s|>)/i.test(cap[0])) {\n          this.inRawBlock = false;\n        }\n\n        src = src.substring(cap[0].length);\n        out += this.options.sanitize\n          ? this.options.sanitizer\n            ? this.options.sanitizer(cap[0])\n            : escape(cap[0])\n          : cap[0];\n        continue;\n      }\n\n      // link\n      if (cap = this.rules.link.exec(src)) {\n        const lastParenIndex = findClosingBracket(cap[2], '()');\n        if (lastParenIndex > -1) {\n          const start = cap[0].indexOf('!') === 0 ? 5 : 4;\n          const linkLen = start + cap[1].length + lastParenIndex;\n          cap[2] = cap[2].substring(0, lastParenIndex);\n          cap[0] = cap[0].substring(0, linkLen).trim();\n          cap[3] = '';\n        }\n        src = src.substring(cap[0].length);\n        this.inLink = true;\n        href = cap[2];\n        if (this.options.pedantic) {\n          link = /^([^'\"]*[^\\s])\\s+(['\"])(.*)\\2/.exec(href);\n\n          if (link) {\n            href = link[1];\n            title = link[3];\n          } else {\n            title = '';\n          }\n        } else {\n          title = cap[3] ? cap[3].slice(1, -1) : '';\n        }\n        href = href.trim().replace(/^<([\\s\\S]*)>$/, '$1');\n        out += this.outputLink(cap, {\n          href: InlineLexer.escapes(href),\n          title: InlineLexer.escapes(title)\n        });\n        this.inLink = false;\n        continue;\n      }\n\n      // reflink, nolink\n      if ((cap = this.rules.reflink.exec(src))\n          || (cap = this.rules.nolink.exec(src))) {\n        src = src.substring(cap[0].length);\n        link = (cap[2] || cap[1]).replace(/\\s+/g, ' ');\n        link = this.links[link.toLowerCase()];\n        if (!link || !link.href) {\n          out += cap[0].charAt(0);\n          src = cap[0].substring(1) + src;\n          continue;\n        }\n        this.inLink = true;\n        out += this.outputLink(cap, link);\n        this.inLink = false;\n        continue;\n      }\n\n      // strong\n      if (cap = this.rules.strong.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.strong(this.output(cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      }\n\n      // em\n      if (cap = this.rules.em.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.em(this.output(cap[6] || cap[5] || cap[4] || cap[3] || cap[2] || cap[1]));\n        continue;\n      }\n\n      // code\n      if (cap = this.rules.code.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.codespan(escape(cap[2].trim(), true));\n        continue;\n      }\n\n      // br\n      if (cap = this.rules.br.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.br();\n        continue;\n      }\n\n      // del (gfm)\n      if (cap = this.rules.del.exec(src)) {\n        src = src.substring(cap[0].length);\n        out += this.renderer.del(this.output(cap[1]));\n        continue;\n      }\n\n      // autolink\n      if (cap = this.rules.autolink.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (cap[2] === '@') {\n          text = escape(this.mangle(cap[1]));\n          href = 'mailto:' + text;\n        } else {\n          text = escape(cap[1]);\n          href = text;\n        }\n        out += this.renderer.link(href, null, text);\n        continue;\n      }\n\n      // url (gfm)\n      if (!this.inLink && (cap = this.rules.url.exec(src))) {\n        if (cap[2] === '@') {\n          text = escape(cap[0]);\n          href = 'mailto:' + text;\n        } else {\n          // do extended autolink path validation\n          do {\n            prevCapZero = cap[0];\n            cap[0] = this.rules._backpedal.exec(cap[0])[0];\n          } while (prevCapZero !== cap[0]);\n          text = escape(cap[0]);\n          if (cap[1] === 'www.') {\n            href = 'http://' + text;\n          } else {\n            href = text;\n          }\n        }\n        src = src.substring(cap[0].length);\n        out += this.renderer.link(href, null, text);\n        continue;\n      }\n\n      // text\n      if (cap = this.rules.text.exec(src)) {\n        src = src.substring(cap[0].length);\n        if (this.inRawBlock) {\n          out += this.renderer.text(this.options.sanitize ? (this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0])) : cap[0]);\n        } else {\n          out += this.renderer.text(escape(this.smartypants(cap[0])));\n        }\n        continue;\n      }\n\n      if (src) {\n        throw new Error('Infinite loop on byte: ' + src.charCodeAt(0));\n      }\n    }\n\n    return out;\n  }\n\n  static escapes(text) {\n    return text ? text.replace(InlineLexer.rules._escapes, '$1') : text;\n  }\n\n  /**\n   * Compile Link\n   */\n  outputLink(cap, link) {\n    const href = link.href,\n      title = link.title ? escape(link.title) : null;\n\n    return cap[0].charAt(0) !== '!'\n      ? this.renderer.link(href, title, this.output(cap[1]))\n      : this.renderer.image(href, title, escape(cap[1]));\n  }\n\n  /**\n   * Smartypants Transformations\n   */\n  smartypants(text) {\n    if (!this.options.smartypants) return text;\n    return text\n      // em-dashes\n      .replace(/---/g, '\\u2014')\n      // en-dashes\n      .replace(/--/g, '\\u2013')\n      // opening singles\n      .replace(/(^|[-\\u2014/(\\[{\"\\s])'/g, '$1\\u2018')\n      // closing singles & apostrophes\n      .replace(/'/g, '\\u2019')\n      // opening doubles\n      .replace(/(^|[-\\u2014/(\\[{\\u2018\\s])\"/g, '$1\\u201c')\n      // closing doubles\n      .replace(/\"/g, '\\u201d')\n      // ellipses\n      .replace(/\\.{3}/g, '\\u2026');\n  }\n\n  /**\n   * Mangle Links\n   */\n  mangle(text) {\n    if (!this.options.mangle) return text;\n    const l = text.length;\n    let out = '',\n      i = 0,\n      ch;\n\n    for (; i < l; i++) {\n      ch = text.charCodeAt(i);\n      if (Math.random() > 0.5) {\n        ch = 'x' + ch.toString(16);\n      }\n      out += '&#' + ch + ';';\n    }\n\n    return out;\n  }\n};\n","/**\n * TextRenderer\n * returns only the textual part of the token\n */\nmodule.exports = class TextRenderer {\n  // no need for block level renderers\n  strong(text) {\n    return text;\n  }\n\n  em(text) {\n    return text;\n  }\n\n  codespan(text) {\n    return text;\n  }\n\n  del(text) {\n    return text;\n  }\n\n  text(text) {\n    return text;\n  }\n\n  link(href, title, text) {\n    return '' + text;\n  }\n\n  image(href, title, text) {\n    return '' + text;\n  }\n\n  br() {\n    return '';\n  }\n};\n","const Renderer = require('./Renderer.js');\nconst Slugger = require('./Slugger.js');\nconst InlineLexer = require('./InlineLexer.js');\nconst TextRenderer = require('./TextRenderer.js');\nconst { defaults } = require('./defaults.js');\nconst {\n  merge,\n  unescape\n} = require('./helpers.js');\n\n/**\n * Parsing & Compiling\n */\nmodule.exports = class Parser {\n  constructor(options) {\n    this.tokens = [];\n    this.token = null;\n    this.options = options || defaults;\n    this.options.renderer = this.options.renderer || new Renderer();\n    this.renderer = this.options.renderer;\n    this.renderer.options = this.options;\n    this.slugger = new Slugger();\n  }\n\n  /**\n   * Static Parse Method\n   */\n  static parse(tokens, options) {\n    const parser = new Parser(options);\n    return parser.parse(tokens);\n  };\n\n  /**\n   * Parse Loop\n   */\n  parse(tokens) {\n    this.inline = new InlineLexer(tokens.links, this.options);\n    // use an InlineLexer with a TextRenderer to extract pure text\n    this.inlineText = new InlineLexer(\n      tokens.links,\n      merge({}, this.options, { renderer: new TextRenderer() })\n    );\n    this.tokens = tokens.reverse();\n\n    let out = '';\n    while (this.next()) {\n      out += this.tok();\n    }\n\n    return out;\n  };\n\n  /**\n   * Next Token\n   */\n  next() {\n    this.token = this.tokens.pop();\n    return this.token;\n  };\n\n  /**\n   * Preview Next Token\n   */\n  peek() {\n    return this.tokens[this.tokens.length - 1] || 0;\n  };\n\n  /**\n   * Parse Text Tokens\n   */\n  parseText() {\n    let body = this.token.text;\n\n    while (this.peek().type === 'text') {\n      body += '\\n' + this.next().text;\n    }\n\n    return this.inline.output(body);\n  };\n\n  /**\n   * Parse Current Token\n   */\n  tok() {\n    let body = '';\n    switch (this.token.type) {\n      case 'space': {\n        return '';\n      }\n      case 'hr': {\n        return this.renderer.hr();\n      }\n      case 'heading': {\n        return this.renderer.heading(\n          this.inline.output(this.token.text),\n          this.token.depth,\n          unescape(this.inlineText.output(this.token.text)),\n          this.slugger);\n      }\n      case 'code': {\n        return this.renderer.code(this.token.text,\n          this.token.lang,\n          this.token.escaped);\n      }\n      case 'table': {\n        let header = '',\n          i,\n          row,\n          cell,\n          j;\n\n        // header\n        cell = '';\n        for (i = 0; i < this.token.header.length; i++) {\n          cell += this.renderer.tablecell(\n            this.inline.output(this.token.header[i]),\n            { header: true, align: this.token.align[i] }\n          );\n        }\n        header += this.renderer.tablerow(cell);\n\n        for (i = 0; i < this.token.cells.length; i++) {\n          row = this.token.cells[i];\n\n          cell = '';\n          for (j = 0; j < row.length; j++) {\n            cell += this.renderer.tablecell(\n              this.inline.output(row[j]),\n              { header: false, align: this.token.align[j] }\n            );\n          }\n\n          body += this.renderer.tablerow(cell);\n        }\n        return this.renderer.table(header, body);\n      }\n      case 'blockquote_start': {\n        body = '';\n\n        while (this.next().type !== 'blockquote_end') {\n          body += this.tok();\n        }\n\n        return this.renderer.blockquote(body);\n      }\n      case 'list_start': {\n        body = '';\n        const ordered = this.token.ordered,\n          start = this.token.start;\n\n        while (this.next().type !== 'list_end') {\n          body += this.tok();\n        }\n\n        return this.renderer.list(body, ordered, start);\n      }\n      case 'list_item_start': {\n        body = '';\n        const loose = this.token.loose;\n        const checked = this.token.checked;\n        const task = this.token.task;\n\n        if (this.token.task) {\n          if (loose) {\n            if (this.peek().type === 'text') {\n              const nextToken = this.peek();\n              nextToken.text = this.renderer.checkbox(checked) + ' ' + nextToken.text;\n            } else {\n              this.tokens.push({\n                type: 'text',\n                text: this.renderer.checkbox(checked)\n              });\n            }\n          } else {\n            body += this.renderer.checkbox(checked);\n          }\n        }\n\n        while (this.next().type !== 'list_item_end') {\n          body += !loose && this.token.type === 'text'\n            ? this.parseText()\n            : this.tok();\n        }\n        return this.renderer.listitem(body, task, checked);\n      }\n      case 'html': {\n        // TODO parse inline content if parameter markdown=1\n        return this.renderer.html(this.token.text);\n      }\n      case 'paragraph': {\n        return this.renderer.paragraph(this.inline.output(this.token.text));\n      }\n      case 'text': {\n        return this.renderer.paragraph(this.parseText());\n      }\n      default: {\n        const errMsg = 'Token with \"' + this.token.type + '\" type was not found.';\n        if (this.options.silent) {\n          console.log(errMsg);\n        } else {\n          throw new Error(errMsg);\n        }\n      }\n    }\n  };\n};\n","const Lexer = require('./Lexer.js');\nconst Parser = require('./Parser.js');\nconst Renderer = require('./Renderer.js');\nconst TextRenderer = require('./TextRenderer.js');\nconst InlineLexer = require('./InlineLexer.js');\nconst Slugger = require('./Slugger.js');\nconst {\n  merge,\n  checkSanitizeDeprecation,\n  escape\n} = require('./helpers.js');\nconst {\n  getDefaults,\n  changeDefaults,\n  defaults\n} = require('./defaults.js');\n\n/**\n * Marked\n */\nfunction marked(src, opt, callback) {\n  // throw error in case of non string input\n  if (typeof src === 'undefined' || src === null) {\n    throw new Error('marked(): input parameter is undefined or null');\n  }\n  if (typeof src !== 'string') {\n    throw new Error('marked(): input parameter is of type '\n      + Object.prototype.toString.call(src) + ', string expected');\n  }\n\n  if (callback || typeof opt === 'function') {\n    if (!callback) {\n      callback = opt;\n      opt = null;\n    }\n\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n    const highlight = opt.highlight;\n    let tokens,\n      pending,\n      i = 0;\n\n    try {\n      tokens = Lexer.lex(src, opt);\n    } catch (e) {\n      return callback(e);\n    }\n\n    pending = tokens.length;\n\n    const done = function(err) {\n      if (err) {\n        opt.highlight = highlight;\n        return callback(err);\n      }\n\n      let out;\n\n      try {\n        out = Parser.parse(tokens, opt);\n      } catch (e) {\n        err = e;\n      }\n\n      opt.highlight = highlight;\n\n      return err\n        ? callback(err)\n        : callback(null, out);\n    };\n\n    if (!highlight || highlight.length < 3) {\n      return done();\n    }\n\n    delete opt.highlight;\n\n    if (!pending) return done();\n\n    for (; i < tokens.length; i++) {\n      (function(token) {\n        if (token.type !== 'code') {\n          return --pending || done();\n        }\n        return highlight(token.text, token.lang, function(err, code) {\n          if (err) return done(err);\n          if (code == null || code === token.text) {\n            return --pending || done();\n          }\n          token.text = code;\n          token.escaped = true;\n          --pending || done();\n        });\n      })(tokens[i]);\n    }\n\n    return;\n  }\n  try {\n    opt = merge({}, marked.defaults, opt || {});\n    checkSanitizeDeprecation(opt);\n    return Parser.parse(Lexer.lex(src, opt), opt);\n  } catch (e) {\n    e.message += '\\nPlease report this to https://github.com/markedjs/marked.';\n    if ((opt || marked.defaults).silent) {\n      return '<p>An error occurred:</p><pre>'\n        + escape(e.message + '', true)\n        + '</pre>';\n    }\n    throw e;\n  }\n}\n\n/**\n * Options\n */\n\nmarked.options =\nmarked.setOptions = function(opt) {\n  merge(marked.defaults, opt);\n  changeDefaults(marked.defaults);\n  return marked;\n};\n\nmarked.getDefaults = getDefaults;\n\nmarked.defaults = defaults;\n\n/**\n * Expose\n */\n\nmarked.Parser = Parser;\nmarked.parser = Parser.parse;\n\nmarked.Renderer = Renderer;\nmarked.TextRenderer = TextRenderer;\n\nmarked.Lexer = Lexer;\nmarked.lexer = Lexer.lex;\n\nmarked.InlineLexer = InlineLexer;\nmarked.inlineLexer = InlineLexer.output;\n\nmarked.Slugger = Slugger;\n\nmarked.parse = marked;\n\nmodule.exports = marked;\n","\nimport marked from 'marked'\nimport {render, h, Fragment} from 'preact'\n\n// text: markdown string. outputs html.\nexport default function Markdown ({text}) {\n    return <div\n        className=\"Markdown\"\n        dangerouslySetInnerHTML={{\n            __html: marked(text || '')\n        }}    \n    >\n    </div>\n}\n","module.exports = function () {\n  let tests = [];\n  const OPTIONS = [\"R\", \"S\", \"P\"];\n  for (let i = 0; i < OPTIONS.length; i++) {\n    for (let j = 0; j < OPTIONS.length; j++) {\n      let expected;\n      if (\n        (i === 0 && j === 1) ||\n        (i === 1 && j === 2) ||\n        (i === 2 && j === 0)\n      )\n        expected = true;\n      else expected = false;\n      tests.push({\n        tape: {\n          \"0 0\": OPTIONS[i],\n          \"1 0\": OPTIONS[j],\n        },\n        expected\n      });\n    }\n  }\n  return tests;\n};","module.exports = function () {\n  let tests = [];\n\n  // Even length palindrom\n  for (let i = 0; i < 25; i++) {\n    const length = generate_even_number();\n    const word = generate_palindrom(length);\n    const tape = generate_tape(word);\n\n    tests.push({\n      tape,\n      expected: true\n    });\n  }\n\n  // Odd length palindrom\n  for (let i = 0; i < 25; i++) {\n    const length = generate_odd_number();\n    const word = generate_palindrom(length);\n    const tape = generate_tape(word);\n\n    tests.push({\n      tape,\n      expected: true\n    });\n  }\n\n  // Even length not palindrom\n  for (let i = 0; i < 25; i++) {\n    const length = generate_even_number();\n    const word = generate_non_palindrom(length);\n    const tape = generate_tape(word);\n\n    tests.push({\n      tape,\n      expected: false\n    });\n  }\n\n  // Odd length not palindrom\n  for (let i = 0; i < 25; i++) {\n    let length = generate_odd_number();\n    if (length === 1) {\n      do {\n        length = generate_odd_number();\n      } while (length === 1);\n    }\n\n    const word = generate_non_palindrom(length);\n    const tape = generate_tape(word);\n\n    tests.push({\n      tape,\n      expected: false\n    });\n  }\n\n  return tests;\n};\n\nfunction generate_palindrom(length) {\n  let word = [];\n\n  for (let i = 0; i < length; i++) {\n    const char = pickOneFrom('Y', 'E', 'A');\n    word[i] = char;\n    word[length - 1 - i] = char;\n  }\n\n  return word;\n}\n\nfunction generate_non_palindrom(length) {\n  let word = [];\n  for (let i = 0; i < length; i++) {\n    let char = pickOneFrom('Y', 'E', 'A');\n    if (char === word[length - 1 - i]) {\n      do {\n        char = pickOneFrom('Y', 'E', 'A');\n      } while (char === word[length - 1 - i]);\n    }\n    word[i] = char;\n  }\n\n  return word;\n}\n\n// 2,4,6,8\nfunction generate_even_number() {\n  return Math.floor(Math.random() * 4) * 2 + 2;\n}\n\n// 1,3,5,7\nfunction generate_odd_number() {\n  return Math.floor(Math.random() * 4) * 2 + 1;\n}\n\n\nfunction pickOneFrom(...arr) {\n  return arr[ randomBetween(0, arr.length) ]\n}\n\nfunction randomBetween( from, toExcl) {\n  return Math.floor( Math.random() * (toExcl - from) + from)\n}\n\nfunction generate_tape(word) {\n  const tape = {};\n  for (let i = 0; i < word.length; i++) {\n    tape[`${i} 0`] = word[i];\n  }\n\n  return tape;\n}","module.exports = function () {\r\n    let tests = [];\r\n\r\n    const testRules = {\r\n        3: {},\r\n        4: {},\r\n        5: {},\r\n        6: {}\r\n    }\r\n\r\n    generate_test_rules(testRules);\r\n\r\n    for (const key in testRules) {\r\n\r\n        // bugfix: if inherited, skip\r\n        if ( !testRules.hasOwnProperty(key) ) continue\r\n\r\n        for (let i = 0; i < testRules[key].D; i++) {\r\n            const game = generate_draw_game(key);\r\n            const tape = generate_tape(game);\r\n            tests.push({\r\n                tape,\r\n                expected: true\r\n            })\r\n        }\r\n        for (let i = 0; i < testRules[key].ND; i++) {\r\n            const game = generate_not_draw_game(key);\r\n            const tape = generate_tape(game);\r\n            tests.push({\r\n                tape,\r\n                expected: false\r\n            })\r\n        }\r\n    }\r\n\r\n    return tests;\r\n}\r\n\r\nfunction initialize_table(size) {\r\n    const players = [\"X\", \"O\"];\r\n    let table = new Array(size);\r\n    for (let i = 0; i < size; i++) {\r\n        table[i] = new Array(size);\r\n    }\r\n\r\n    for (let i = 0; i < size; i++) {\r\n        for (let j = 0; j < size; j++) {\r\n            const randomIndex = Math.floor(Math.random() * 2)\r\n            const randomPlayer = players[randomIndex];\r\n            table[i][j] = randomPlayer;\r\n        }\r\n    }\r\n\r\n    return table;\r\n}\r\n\r\nfunction transpose(table) {\r\n    let newTable = initialize_table(table.length);\r\n    for (let i = 0; i < table.length; i++) {\r\n        for (let j = 0; j < table.length; j++) {\r\n            newTable[j][i] = table[i][j];\r\n        }\r\n    }\r\n\r\n    return newTable;\r\n}\r\n\r\nfunction is_all_same(array) {\r\n    return array.every(element => element === array[0]);\r\n}\r\n\r\n// true: draw\r\n// false: not draw\r\nfunction status(table) {\r\n    return (\r\n        check_rows(table) &&\r\n        check_columns(table) &&\r\n        check_diagonals(table))\r\n}\r\n\r\nfunction generate_draw_game(size) {\r\n    let table;\r\n    do {\r\n        table = initialize_table(size);\r\n    } while (!status(table));\r\n\r\n    return table;\r\n}\r\n\r\nfunction generate_not_draw_game(size) {\r\n    let table;\r\n    do {\r\n        table = initialize_table(size);\r\n    } while (status(table));\r\n\r\n    return table;\r\n}\r\n\r\nfunction check_rows(table) {\r\n    let error = false;\r\n    for (let i = 0; i < table.length; i++) {\r\n        if (is_all_same(table[i])) {\r\n            error = true;\r\n            break;\r\n        }\r\n    }\r\n\r\n    return !error;\r\n}\r\n\r\nfunction check_columns(table) {\r\n    let error = false;\r\n    const transposedTable = transpose(table);\r\n    for (let i = 0; i < transposedTable.length; i++) {\r\n        if (is_all_same(transposedTable[i])) {\r\n            error = true;\r\n            break;\r\n        }\r\n    }\r\n\r\n    return !error;\r\n}\r\n\r\nfunction check_diagonals(table) {\r\n    let firstDiagonal = [];\r\n    let secondDiagonal = [];\r\n\r\n    for (let i = 0; i < table.length; i++) {\r\n        for (let j = 0; j < table.length; j++) {\r\n            if (i === j)\r\n                firstDiagonal.push(table[i][j]);\r\n        }\r\n    }\r\n\r\n    for (let i = 0; i < table.length; i++) {\r\n        for (let j = 0; j < table.length; j++) {\r\n            if (i + j === table.length - 1) {\r\n                secondDiagonal.push(table[i][j]);\r\n            }\r\n        }\r\n    }\r\n    return !(is_all_same(firstDiagonal) || is_all_same(secondDiagonal));\r\n}\r\n\r\nfunction generate_test_rules(template) {\r\n    const amounts = [12, 13];\r\n    for (const sizeKey in template) {\r\n\r\n        // bugfix: if inherited, skip\r\n        if ( !template.hasOwnProperty(sizeKey) ) continue\r\n\r\n        const status = template[sizeKey];\r\n        const randomAmountIndex = Math.floor(Math.random() * 2);\r\n        const randomAmount = amounts[randomAmountIndex];\r\n        status.D = randomAmount;\r\n        status.ND = amounts.filter(amount => amount !== randomAmount)[0];\r\n    }\r\n}\r\n\r\nfunction generate_tape(table) {\r\n    const tape = {};\r\n    for (let i = 0; i < table.length; i++) {\r\n        for (let j = 0; j < table.length; j++) {\r\n            tape[`${i} ${j}`] = table[i][j];\r\n        }\r\n    }\r\n\r\n    return tape;\r\n}","module.exports = function() {\n  let tests = [];\n\n  for (let i = 0; i < 50; i++) {\n    const table = fill_table(\"Y\", \"E\");\n    const tape = generate_tape(table);\n\n    tests.push({\n      tape,\n      expected: true\n    });\n  }\n\n  for (let i = 0; i < 50; i++) {\n    const table = fill_table(\"E\", \"Y\");\n    const tape = generate_tape(table);\n\n    tests.push({\n      tape,\n      expected: false\n    });\n  }\n\n  return tests;\n};\n\nfunction initialize_table(n, m) {\n  let table = new Array(n);\n\n  for (let i = 0; i < n; i++) {\n    table[i] = new Array(m);\n  }\n\n  return table;\n}\n\nfunction generate_dimensions() {\n  let n, m;\n  n = Math.floor(Math.random() * 10) + 1;\n  m = Math.floor(Math.random() * 10) + 1;\n\n  return { n, m };\n}\n\n// winner: \"Y\" or \"E\"\nfunction fill_table(winner, loser) {\n  const { n, m } = generate_dimensions();\n  const size = n * m;\n  let table = initialize_table(n, m);\n\n  const min = Math.ceil(size / 2);\n  const max = size;\n\n  let winnerAmount;\n  do {\n    winnerAmount = Math.floor(Math.random() * (max - min + 1)) + min;\n  } while (winnerAmount === size / 2);\n\n  const coordinates = generate_winner_coordinates(winnerAmount, n, m);\n\n  for (let i = 0; i < winnerAmount; i++) {\n    const { x, y } = coordinates[i];\n    table[x][y] = winner;\n  }\n\n  for (let i = 0; i < n; i++) {\n    for (let j = 0; j < m; j++) {\n      if (table[i][j] === undefined) {\n        table[i][j] = loser;\n      }\n    }\n  }\n\n  return table;\n}\n\nfunction generate_winner_coordinates(winnerAmount, n, m) {\n  let coordinates = [];\n\n  for (let i = 0; i < winnerAmount; i++) {\n    let x, y;\n    do {\n      x = Math.floor(Math.random() * n);\n      y = Math.floor(Math.random() * m);\n    } while (coordinates.some(c => x === c.x && y === c.y));\n\n    coordinates.push({ x, y });\n  }\n\n  return coordinates;\n}\n\nfunction generate_tape(table) {\n  const tape = {};\n  for (let i = 0; i < table.length; i++) {\n    const row = table[i];\n    for (let j = 0; j < row.length; j++) {\n      tape[`${i} ${j}`] = table[i][j];\n    }\n  }\n\n  return tape;\n}\n","\n\n\nfunction pickOneFrom(...arr) {\n\treturn arr[randomBetween(0, arr.length)]\n}\n\nfunction randomBetween(from, toExcl) {\n\treturn Math.floor(Math.random() * (toExcl - from) + from)\n}\n\n\nfunction generate() {\n\tlet n1 = randomBetween(2, 16)\n\tlet n2 = randomBetween(2, 16)\n\tlet mul = n1 * n2\n\treturn [n1.toString(2), n2.toString(2), mul.toString(2)]\n}\n\n\nfunction defect(number) {\n\tlet isToBeDefected = Array(number.length).fill(false)\n\n\tlet defectedTimes = 0, defectTimes = randomBetween(1, number.length)\n\n\twhile (defectTimes !== defectedTimes) {\n\n\t\tlet index = randomBetween(1, number.length)\n\t\tif (isToBeDefected[index]) {\n\t\t\tcontinue\n\t\t}\n\t\telse {\n\t\t\tisToBeDefected[index] = true\n\t\t\tdefectedTimes++\n\t\t}\n\t}\n\n\tnumber = number.split('')\n\n\tfor (let i = 0; i < number.length; i++) {\n\t\tif (isToBeDefected[i]) {\n\t\t\tnumber[i] = number[i] === '1' ? '0' : '1'\n\t\t}\n\t}\n\n\treturn number.join('')\n}\n\n\nmodule.exports = function multiplication() {\n\n\tlet tests = []\n\n\twhile ( tests.length !== 100 ) {\n\t\tlet test = { tape: {}, expected: pickOneFrom(true, false) }\n\n\t\tlet tuple = generate()\n\n\t\tif ( !test.expected ) {\n\t\t\tlet indexToDefect = pickOneFrom(0,1,2)\n\n\t\t\ttuple[indexToDefect] = defect( tuple[indexToDefect] )\n\t\t}\n\n\t\t\n\t\tfor (let j = 0; j<tuple.length; j++) {\n\t\t\tfor (let i = 0; i<tuple[j].length; i++) {\n\t\t\t\ttest.tape[`${i} ${j}`] = tuple[j][i]\n\t\t\t}\n\t\t}\n\t\t\n\t\ttests.push( test )\n\n\t}\n\n\treturn tests\n}","\nmodule.exports = function chess() {\n    let tests = []\n\n    for (let i = 0; i<100; i++) {\n        let b = getRandomBoard( randomBetween(3,9), randomBetween(3,9) )\n    \n        let test = {tape: {}, expected: !!b.whiteIsChecked }\n    \n        for ( let y = 0; y<8; y++) {\n            for (let x = 0; x<8; x++) {\n                test.tape[`${x} ${y}`] = b.board[y][x] || '.'\n            }\n        }\n    \n        tests.push( test )\n    }\n\n    return tests\n}\n\n\nfunction newBoard(copyFrom) {\n    let arr = Array(8).fill('').map(row => {\n        return new Proxy( Array(8).fill('') , {\n            get(target, prop) {\n                if (prop >= 0 && prop < 8) {\n                    return target[prop]\n                }\n                else return ''\n            },\n            set(target, prop, val) {\n                if (prop >= 0 && prop < 8) {\n                    target[prop] = val\n                }\n            }\n        })\n    })\n\n    let p = new Proxy( arr, {\n        get(target,prop) {\n            if (prop >= 0 && prop < 8) {\n                return target[prop]\n            }\n            else {\n                return new Proxy( [], {\n                    get(target,prop) {\n                        return ''\n                    },\n                    set(target,prop,val) {\n                        return\n                    }\n                })\n            }\n        }\n    })\n\n    if (copyFrom) {\n        for (let i = 0; i<8; i++) {\n            for (let j = 0; j<8; j++) {\n                p[i][j] = copyFrom[i][j]\n            }\n        }\n    }\n\n    return p\n}\n\n\nfunction getRandomCell() {\n    return [randomBetween(0,8), randomBetween(0,8) ]\n}\n\nfunction pickOneFrom(...arr) {\n    return arr[ randomBetween(0, arr.length) ]\n}\n\nfunction randomBetween( from, toExcl) {\n    return Math.floor( Math.random() * (toExcl - from) + from)\n}\n\nfunction sideOf (piece) {\n    if ( !piece ) return ''\n    else return piece.charCodeAt() > 96 ? 'black' : 'white'\n}\n\nfunction getThreatenedCells (board, x, y) {\n    \n    let attacker = board[y][x]\n    if ( !attacker ) throw new Error ('No attacker piece found on given coords')\n    let attackerSide = sideOf(attacker)\n\n    let attackerType = attacker.toLowerCase()\n    let mask = newBoard()\n\n    let cx,cy\n\n    if (attackerType === 'p') {\n            if (attackerSide === 'black') {\n                [-1,1].forEach(i => {\n                    let targetSide = sideOf(board[y+1][x+i])\n                    if (targetSide !== attackerSide) {\n                        mask[y+1][x+i] = true\n                    }\n                })\n            }\n            else {\n                [-1,1].forEach(i => {\n                    let targetSide = sideOf(board[y-1][x+i])\n                    if (targetSide !== attackerSide) {\n                        mask[y-1][x+i] = true\n                    }\n                })\n            }\n    }\n\n    if (attackerType === 'r' || attackerType === 'q') {\n        cx = x+1\n        cy = y\n        while (cx < 8) {\n            let targetSide = sideOf(board[cy][cx])\n            if ( targetSide === '' ) {\n                mask[cy][cx] = true\n            }\n            else if (targetSide === attackerSide) {\n                break\n            }\n            else {\n                mask[cy][cx] = true\n                break\n            }\n            cx++\n        }\n\n        cx = x-1\n        cy = y\n        while (cx >= 0) {\n            let targetSide = sideOf(board[cy][cx])\n            if ( targetSide === '' ) {\n                mask[cy][cx] = true\n            }\n            else if (targetSide === attackerSide) {\n                break\n            }\n            else {\n                mask[cy][cx] = true\n                break\n            }\n            cx--\n        }\n\n        cx = x\n        cy = y+1\n        while (cy < 8) {\n            let targetSide = sideOf(board[cy][cx])\n            if ( targetSide === '' ) {\n                mask[cy][cx] = true\n            }\n            else if (targetSide === attackerSide) {\n                break\n            }\n            else {\n                mask[cy][cx] = true\n                break\n            }\n            cy++\n        }\n\n        cx = x\n        cy = y-1\n        while (cy >= 0) {\n            let targetSide = sideOf(board[cy][cx])\n            if ( targetSide === '' ) {\n                mask[cy][cx] = true\n            }\n            else if (targetSide === attackerSide) {\n                break\n            }\n            else {\n                mask[cy][cx] = true\n                break\n            }\n            cy--\n        }\n    }\n\n\n    if (attackerType === 'b' || attackerType === 'q') {\n        cx = x+1\n        cy = y+1\n        while (cx < 8 && cy < 8) {\n            let targetSide = sideOf(board[cy][cx])\n            if ( targetSide === '' ) {\n                mask[cy][cx] = true\n            }\n            else if (targetSide === attackerSide) {\n                break\n            }\n            else {\n                mask[cy][cx] = true\n                break\n            }\n            cx++\n            cy++\n        }\n\n        cx = x+1\n        cy = y-1\n        while (cx < 8 && cy >= 0) {\n            let targetSide = sideOf(board[cy][cx])\n            if ( targetSide === '' ) {\n                mask[cy][cx] = true\n            }\n            else if (targetSide === attackerSide) {\n                break\n            }\n            else {\n                mask[cy][cx] = true\n                break\n            }\n            cx++\n            cy--\n        }\n\n        cx = x-1\n        cy = y+1\n        while (cx >= 0 && cy < 8) {\n            let targetSide = sideOf(board[cy][cx])\n            if ( targetSide === '' ) {\n                mask[cy][cx] = true\n            }\n            else if (targetSide === attackerSide) {\n                break\n            }\n            else {\n                mask[cy][cx] = true\n                break\n            }\n            cx--\n            cy++\n        }\n\n        cx = x-1\n        cy = y-1\n        while (cx >= 0 && cy >= 0) {\n            let targetSide = sideOf(board[cy][cx])\n            if ( targetSide === '' ) {\n                mask[cy][cx] = true\n            }\n            else if (targetSide === attackerSide) {\n                break\n            }\n            else {\n                mask[cy][cx] = true\n                break\n            }\n            cx--\n            cy--\n        }\n    }\n\n    if (attackerType === 'n') {\n        [-2,-1,1,2].forEach(i => {\n            [-2,-1,1,2].forEach(j => {\n                if ( Math.abs(i) === Math.abs(j)) return\n\n                let targetSide = sideOf(board[y+i][x+j])\n                if ( targetSide !== attackerSide ) {\n                    mask[y+i][x+j] = true\n                }\n            })\n        })\n    }\n        \n    if (attackerType === 'k') {\n        [-1,0,1].forEach(i => {\n            [-1,0,1].forEach(j => {\n                if (i===0 && j===0) return\n\n                let targetSide = sideOf(board[y+i][x+j])\n                if ( targetSide !== attackerSide ) {\n                    mask[y+i][x+j] = true\n                }\n            })\n        })\n    }\n\n    return mask\n}\n\n\nfunction getRandomBoard ( nBlacks, nWhites ) {\n\n    let board, whiteKingX, whiteKingY, whiteIsChecked\n\n\n    boardIsLegit:\n    while (true) {\n\n        whiteIsChecked = false\n        board = newBoard()\n\n        let listOfWhites = [], listOfBlacks = []\n\n        let [blackKingX, blackKingY] = getRandomCell()\n        board[blackKingY][blackKingX] = 'k'\n        listOfBlacks.push([blackKingX, blackKingY])\n        \n        do {\n            [whiteKingX, whiteKingY] = getRandomCell()\n        } while ( Math.abs(blackKingX-whiteKingX) < 2 && Math.abs(blackKingY-whiteKingY) < 2)\n        board[whiteKingY][whiteKingX] = 'K'\n        listOfWhites.push([whiteKingX, whiteKingY])\n        \n        \n        let piecesPlaced = 0, piecesTotal = nWhites\n        \n        // placing white pieces\n        while ( piecesPlaced !== piecesTotal ) {\n        \n            // find a new place\n            let [x, y] = getRandomCell()\n        \n            // not empty?\n            if ( board[y][x] !== '' ) continue\n        \n            // place\n            board[y][x] = pickOneFrom('R', 'N', 'B', 'Q', 'P')\n            listOfWhites.push([x, y])\n            piecesPlaced++\n        }\n    \n        piecesPlaced = 0\n        piecesTotal = nBlacks\n        \n        // placing black pieces\n        while ( piecesPlaced !== piecesTotal ) {\n        \n            // find a new place\n            let [x, y] = getRandomCell()\n        \n            // not empty?\n            if ( board[y][x] !== '' ) continue\n        \n            // place\n            board[y][x] = pickOneFrom('r', 'n', 'b', 'q', 'p')\n            listOfBlacks.push([x, y])\n            piecesPlaced++\n        }\n\n        let totalChecks = 0\n        \n        for (let i = 0; i< listOfWhites.length; i++) {\n            if ( getThreatenedCells(board, listOfWhites[i][0], listOfWhites[i][1])[blackKingY][blackKingX] ) {\n                totalChecks++\n\n                if (totalChecks > 1) {\n                    continue boardIsLegit\n                }\n            }\n        }\n\n        for (let i = 0; i< listOfBlacks.length; i++) {\n            if ( getThreatenedCells(board, listOfBlacks[i][0], listOfBlacks[i][1])[whiteKingY][whiteKingX] ) {\n                totalChecks++\n                whiteIsChecked = true\n\n                if (totalChecks > 1) {\n                    continue boardIsLegit\n                }\n\n            }\n        }\n\n        break\n    }\n\n    return { board, whiteIsChecked }\n}\n","\nconst WIDTH = 2 // width of a block. regular sudokus have width=3\n\nfunction goForward(current) {\n    if (current.x === WIDTH*WIDTH-1) {\n        current.x = 0\n        current.y++\n    }\n    else {\n        current.x++\n    }\n}\n\nfunction goBackWard(current) {\n    if (current.x === 0) {\n        current.x = WIDTH*WIDTH-1\n        current.y--\n    }\n    else {\n        current.x--\n    }\n}\n\nfunction doneAll(current) {\n    return current.y === WIDTH*WIDTH\n}\n\n\nfunction generateFilledTable() {\n    let table = Array(WIDTH*WIDTH).fill(true).map( r => {\n        return Array(WIDTH*WIDTH).fill('')\n    })\n    \n    for (let i = 0; i<WIDTH*WIDTH; i++) {\n        for (let j = 0; j<WIDTH*WIDTH; j++) {\n            table[i][j] = {\n                value: 0,\n                notAllowed: new Set()\n            }\n        }\n    }\n    \n    let current = {y: 0, x: 0}\n    \n    while (true) {\n\n        if ( doneAll(current) ) {\n            break\n        }\n    \n        let cell = table[current.y][current.x]\n        cell.value = 0\n    \n        let legit = getLegit(table, current)\n        let allowed = setDifference(legit, cell.notAllowed)\n    \n        if (allowed.size === 0) {\n            cell.notAllowed.clear()\n            goBackWard(current)\n            \n            continue\n        }\n        \n        allowed = [ ...allowed ]\n    \n        let picked = allowed[ randomBetween(0, allowed.length) ]\n    \n        cell.value = picked\n        cell.notAllowed.add( picked )\n    \n        goForward(current)\n    \n    }\n\n    return table\n    \n}\n\n\n\n\nfunction setDifference(setA, setB) {\n    let _difference = new Set(setA)\n    for (let elem of setB) {\n        _difference.delete(elem)\n    }\n    return _difference\n}\n\nfunction getLegit(table, current) {\n    let legit = new Set( Array(WIDTH*WIDTH).fill(true).map( (v,i) => i+1) ) // [1,2,3,4]\n\n    // same col\n    for (let i = 0; i<current.y; i++) {\n        legit.delete( table[i][current.x].value )\n    }\n\n    // same row\n    for (let i = 0; i<current.x; i++) {\n        legit.delete( table[current.y][i].value )\n    }\n\n    // same block\n    let blockStart = {\n        x: current.x - current.x % WIDTH,\n        y: current.y - current.y % WIDTH\n    }\n\n    blockLabel:\n    for (let y = blockStart.y; y<blockStart.y+WIDTH; y++) {\n        for (let x = blockStart.x; x<blockStart.x+WIDTH; x++) {\n            if (x === current.x && y === current.y) break blockLabel\n\n            legit.delete( table[y][x].value )\n        }\n    }\n\n    return legit\n}\n\n\n\n\nfunction randomBetween( from, toExcl) {\n    return Math.floor( Math.random() * (toExcl - from) + from)\n}\n\nfunction pickOneFrom(...arr) {\n    return arr[ randomBetween(0, arr.length) ]\n}\n\nfunction removeNums( table, nums, except ) {\n\n    let numsRemoved = 0\n\n    while( numsRemoved !== nums) {\n        let x = randomBetween(0, WIDTH*WIDTH)\n        let y = randomBetween(0, WIDTH*WIDTH)\n\n        let cell = table[y][x]\n        if ( !cell.value ) continue\n\n        if ( except.filter(i => i.x === x && i.y === y).length ) continue\n\n        cell.value = 0\n        numsRemoved++\n    }\n\n    return table\n}\n\n// group: 'row', 'column', 'block'\nfunction findCounterparts( table, x, y) {\n    let counterparts = { row: null, column: null, block: null}\n\n    // row\n    for (let i = 0; i<WIDTH*WIDTH; i++) {\n        if ( i === x) continue\n        if ( table[y][i].value === table[y][x].value ) {\n            counterparts.row = { x: i, y }\n            break\n        }\n    }\n\n    // column\n    for (let i = 0; i<WIDTH*WIDTH; i++) {\n        if ( i === y) continue\n        if ( table[i][x].value === table[y][x].value ) {\n            counterparts.column = { x, y: i }\n            break\n        }\n    }\n\n    // block\n    let blockStart = {\n        x: x - x % WIDTH,\n        y: y - y % WIDTH\n    }\n\n    blockLabel:\n    for (let i = blockStart.y; i<blockStart.y+WIDTH; i++) {\n        for (let j = blockStart.x; j<blockStart.x+WIDTH; j++) {\n            if ( i === y && j === x) continue\n            if ( table[i][j].value === table[y][x].value ) {\n                counterparts.block = { x: j, y: i}\n                break blockLabel\n            }\n        }\n    }\n\n    return counterparts\n}\n\nfunction generateCorruptedTable( nRemove ) {\n    let table = generateFilledTable()\n    let cell = {\n        x: randomBetween(0,WIDTH*WIDTH),\n        y: randomBetween(0,WIDTH*WIDTH)\n    }\n\n    let newVal\n    do {\n        newVal = randomBetween(1,WIDTH*WIDTH+1)\n    } while ( newVal === table[cell.y][cell.x].value )\n\n    table[cell.y][cell.x].value = newVal\n\n    let counterparts = findCounterparts(table, cell.x, cell.y)\n    let remained = pickOneFrom('row', 'column', 'block')\n\n    for (let cp = 0; cp<counterparts.length; cp++) {\n        if (cp !== remained\n            && counterparts[cp].x !== counterparts[remained].x\n            && counterparts[cp].y !== counterparts[remained].y\n            ) {\n            table[ counterparts[cp].y ][ counterparts[cp].x ].value = 0\n        }\n    }\n\n    return removeNums( table, nRemove, [cell, counterparts[remained] ])\n}\n\n\nfunction tableToTape (table) {\n    let tape = {}\n    for (let x = 0; x<WIDTH*WIDTH; x++) {\n        for (let y = 0; y<WIDTH*WIDTH; y++) {\n\n            let dx = Math.floor( x/WIDTH )\n            let dy = Math.floor( y/WIDTH )\n            tape[`${x+dx} ${y+dy}`] = table[y][x].value ? table[y][x].value.toString() : '.'\n        }\n    }\n\n    return tape\n}\n\nmodule.exports = function sudoku() {\n    let tests = []\n\n    for (let i = 0; i<100; i++) {\n    \n        let table, test = {}\n    \n        if ( randomBetween(0,2) ) {\n            table = generateCorruptedTable( randomBetween(8,12) ) // if width=3, randomBetween(50,70)\n            test.expected = false\n        }\n        else {\n            table = removeNums( generateFilledTable(), randomBetween(8,12), [])\n            test.expected = true\n        }\n    \n        test.tape = tableToTape( table )\n    \n        tests.push(test)\n    }\n    \n    return tests\n}\n\n","\nfunction generateEmptyGame(a) {\n    if (a < 3) throw new Error('Too small map')\n\n    // map cells: 'b' barrier, 'w' wall, 'u' unvisited 'v' visited\n    let map = Array(2*a+1).fill(true).map( (r,ri) => {\n        return Array(2*a+1).fill('').map( (c,ci) => {\n            if (ri === 0 || ri === 2*a ) return 'b'\n            if (ci === 0 || ci === 2*a ) return 'b'\n            if (ci % 2 === 0) return 'w'\n            if (ri % 2 === 0) return 'w'\n            return 'u'\n        })\n    })\n\n    let startingPoint = {\n        x: 2*randomBetween(0,a) + 1,\n        y: 2*randomBetween(0,a) + 1,\n        iteration: 1\n    }\n\n    map[startingPoint.y][startingPoint.x] = 'v'\n\n    return {\n        map,\n        visited: [startingPoint]\n    }\n}\n\n\nfunction pickOneFrom(...arr) {\n    return arr[ randomBetween(0, arr.length) ]\n}\n\nfunction randomBetween( from, toExcl) {\n    return Math.floor( Math.random() * (toExcl - from) + from)\n}\n\nfunction drawMap(map) {\n    for (let y = 0; y<map.length; y++) {\n        let row = ''\n        for (let x = 0; x<map[0].length; x++) {\n            switch (map[y][x]) {\n                case 'b':\n                    row += '#'\n                    break\n                case 'w':\n                    row += 'O'\n                    break\n                case 'v':\n                    row += ' '\n                    break\n                case 'u':\n                    row += '.'\n                    break\n            }\n            row += ' '\n        }\n        console.log(row)\n    }\n}\n\nfunction getPossibleMoves(game) {\n    let map = game.map\n    let pts = game.visited\n    let moves = [] // { fromX, fromY, toX, toY, iteration (of prev)}\n\n    for (let i = 0; i<pts.length; i++) {\n        let p = pts[i]\n        // up\n        if ( map[p.y-1][p.x] === 'w' && map[p.y-2][p.x] === 'u') {\n            moves.push({ fromX: p.x, fromY: p.y, toX: p.x, toY: p.y-2, iteration: p.iteration })\n        }\n\n        // down\n        if ( map[p.y+1][p.x] === 'w' && map[p.y+2][p.x] === 'u') {\n            moves.push({ fromX: p.x, fromY: p.y, toX: p.x, toY: p.y+2 , iteration: p.iteration})\n        }\n\n        // left\n        if ( map[p.y][p.x-1] === 'w' && map[p.y][p.x-2] === 'u') {\n            moves.push({ fromX: p.x, fromY: p.y, toX: p.x-2, toY: p.y, iteration: p.iteration })\n        }\n\n        // right\n        if ( map[p.y][p.x+1] === 'w' && map[p.y][p.x+2] === 'u') {\n            moves.push({ fromX: p.x, fromY: p.y, toX: p.x+2, toY: p.y, iteration: p.iteration })\n        }\n    }\n\n    return moves\n}\n\nfunction carveWall(game) {\n    let result = {} // successful: bool\n\n    let moves = getPossibleMoves(game)\n    if ( !moves.length ) return { successful: false}\n\n    let selected = moves[ randomBetween(0, moves.length) ]\n\n    let intermPt = {\n        x: selected.fromX + ( selected.toX - selected.fromX ) /2,\n        y: selected.fromY + ( selected.toY - selected.fromY ) /2,\n        iteration: selected.iteration+1\n    }\n\n    game.map[intermPt.y][intermPt.x] = 'v'\n    game.visited.push( intermPt)\n\n    game.map[selected.toY][selected.toX] = 'v'\n    game.visited.push({ x: selected.toX, y: selected.toY, iteration: selected.iteration+2 })\n\n    return {successful: true}\n}\n\nfunction findSolution(game) {\n    let fromStart = [], fromEnd = [] // assuming start always 1,1, end always 2n,2n\n    let a = game.map.length\n\n    let all = game.visited\n\n    // find 1,1\n    for (let i = 0; i<all.length; i++) {\n        if ( all[i].x === 1 && all[i].y === 1) {\n            fromStart.push( all[i] )\n            break\n        }\n    }\n\n    // find 2n,2n\n    for (let i = 0; i<all.length; i++) {\n        if ( all[i].x === a-2 && all[i].y === a-2) {\n            fromEnd.push( all[i] )\n            break\n        }\n    }\n\n    let longerOne = fromStart[0].iteration > fromEnd[0].iteration ? fromStart : fromEnd\n\n    while ( fromStart[ fromStart.length-1 ].iteration !== fromEnd[ fromEnd.length-1 ].iteration ) {\n        longerOne.push( findPrevious(all,\n            longerOne[ longerOne.length-1 ].x,\n            longerOne[ longerOne.length-1 ].y,\n            longerOne[ longerOne.length-1 ].iteration)\n    )\n\n    }\n    \n    \n    while ( fromStart[ fromStart.length-1 ].x !== fromEnd[ fromEnd.length-1 ].x \n        || fromStart[ fromStart.length-1 ].y !== fromEnd[ fromEnd.length-1 ].y ) {\n            \n            fromStart.push(\n                findPrevious(all,\n                    fromStart[ fromStart.length-1 ].x,\n                    fromStart[ fromStart.length-1 ].y,\n                    fromStart[ fromStart.length-1 ].iteration)\n            )\n\n            fromEnd.push(\n                findPrevious(all,\n                    fromEnd[ fromEnd.length-1 ].x,\n                    fromEnd[ fromEnd.length-1 ].y,\n                    fromEnd[ fromEnd.length-1 ].iteration)\n            )\n    \n    }\n\n    fromEnd.pop()\n    fromEnd.reverse()\n\n    return [ ...fromStart, ...fromEnd]\n    \n\n}\n\n\nfunction findPrevious (arr, x, y, iteration) {\n\n    let distance = (x1, x2, y1, y2) => Math.abs(y2-y1) + Math.abs(x2-x1)\n\n    for (let i = 0; i< arr.length; i++) {\n        if ( distance(x, arr[i].x, y, arr[i].y) === 1 && iteration - arr[i].iteration === 1) {\n            return arr[i]\n        }\n    }\n}\n\nfunction generateValidMaze() {\n\n    let game = generateEmptyGame( randomBetween(7, 8) )\n    let result\n    do {\n        result = carveWall(game)\n    } while( result.successful )\n\n    return game\n    \n}\n\nfunction generateInvalidMaze() {\n    let game = generateValidMaze()\n    let solution = findSolution(game)\n\n    let blockedInd = Math.floor( solution.length/2 )\n    if (blockedInd % 2 === 0) blockedInd++\n\n    game.map[ solution[blockedInd].y][solution[blockedInd].x] = 'w'\n    return game\n}\n\n\n\nmodule.exports = function maze() {\n\n    let tests = []\n    let mapSymbolToTapeSymbol = s => {\n        if (s === 'b') return 'O'\n        if (s === 'w') return 'O'\n        else return undefined\n    }\n\n    // valid\n    for (let i = 0; i<50; i++) {\n        let test = { expected: true, tape: {}}\n        let map = generateValidMaze().map\n\n        for (let y = 0; y<map.length; y++) {\n            for (let x = 0; x<map[0].length; x++) {\n                let symbol = mapSymbolToTapeSymbol( map[y][x] )\n\n                if (symbol) {\n                    test.tape[`${x-1} ${y-1}`] = symbol\n                }\n            }\n        }\n\n        test.tape[`${map.length-3} ${map.length-3}`] = 'X'\n\n        tests.push( test )\n    }\n\n    // invalid\n    for (let i = 0; i<50; i++) {\n        let test = { expected: false, tape: {}}\n        let map = generateInvalidMaze().map\n\n        for (let y = 0; y<map.length; y++) {\n            for (let x = 0; x<map[0].length; x++) {\n                let symbol = mapSymbolToTapeSymbol( map[y][x] )\n\n                if (symbol) {\n                    test.tape[`${x-1} ${y-1}`] = symbol\n                }\n            }\n        }\n\n        test.tape[`${map.length-3} ${map.length-3}`] = 'X'\n\n        tests.push( test )\n    }\n\n    return tests\n}\n\n// console.log( module.exports()[0] )","\nconst LOOP_LIMIT = 20\n\nfunction generateInstruction() {\n    let instruction = []\n\n    instruction[0] = pickOneFrom('b','i')\n    instruction[1] = pickOneFrom('_', '0', '1')\n    instruction[2] = pickOneFrom('b', 'i', 'a', 'r')\n    instruction[3] = pickOneFrom('_', '0', '1')\n    instruction[4] = pickOneFrom('R', 'R', 'L')\n\n    return instruction\n}\n\nfunction pickOneFrom(...arr) {\n    return arr[ randomBetween(0, arr.length) ]\n}\n\nfunction randomBetween( from, toExcl) {\n    return Math.floor( Math.random() * (toExcl - from) + from)\n}\n\n\nfunction generateMap( len ) {\n    let generated = 0\n    let map = {}\n    let acceptingStateExists = false\n\n    while (generated !== len) {\n        let instruction = generateInstruction()\n\n        if ( !acceptingStateExists && instruction[2] !== 'a') {\n            continue\n        }\n\n        acceptingStateExists = true\n\n        if ( !map[`${instruction[0]} ${instruction[1]}`] ) {\n            map[`${instruction[0]} ${instruction[1]}`] = instruction\n            generated++\n        }\n        \n    }\n\n    // remove rejecting states\n    Object.values(map).forEach( instruction => {\n        if ( instruction[2] === 'r') {\n            delete map[`${instruction[0]} ${instruction[1]}`]\n        }\n    })\n\n    return map\n}\n\nfunction generateTape( len ) {\n    let tape = {}\n\n    for (let i = 0; i<len; i++ ) {\n        tape[`${i} ${0}`] = pickOneFrom('0', '1')\n    }\n\n    return tape\n}\n\nfunction getNextProduction(tm, prodMap, tape, currentState) {\n    let currentSymbol = tape[`${tm.x} ${tm.y}`] || '_'\n    let nextProd\n    if ( currentState === 'a') {\n        nextProd = ['a', currentSymbol, 'a', currentSymbol, 'R']\n    }\n    else if (prodMap[`${currentState} ${currentSymbol}`]) {\n        nextProd = prodMap[`${currentState} ${currentSymbol}`]\n    }\n    else {\n        nextProd = [currentState, currentSymbol, 'r', currentSymbol, 'R']\n    }\n\n    return nextProd\n}\n\nfunction simulate(prodMap, tape ) {\n\n    let status = 'working' // accepted, rejected\n    let iteration = 0\n    let currentState = 'i'\n    let tm = {x: 0, y: 0}\n\n    while ( iteration !== LOOP_LIMIT) {\n\n        let nextProd = getNextProduction(tm, prodMap, tape, currentState)\n        \n        currentState = nextProd[2]\n    \n        if (currentState === 'a') {\n            status = 'accepted'\n            break\n        }\n\n        if (currentState === 'r') {\n            status = 'rejected'\n            break\n        }\n\n        let key = `${tm.x} ${tm.y}`\n        if (nextProd[3] === '_') {\n            delete tape[key]\n        }\n        else {\n            tape[key] = nextProd[3]\n        }\n        \n        switch( nextProd[4] ) {\n            case 'R':\n                tm.x++\n                break\n            case 'L':\n                tm.x--\n                break\n        }\n\n        iteration++\n    }\n\n    return {status, iteration}\n    \n}\n\nmodule.exports = function turing () {\n\n    let tests = []\n    let acceptedCount = 0\n\n    while ( tests.length !== 100 ) {\n\n        let prodMap = generateMap( randomBetween(1,7) ) // if a-i rand(15,21)\n        let tape = generateTape( randomBetween(4,9) )\n\n        let test = {\n            tape: { ...tape }\n        }\n\n        let status = simulate( prodMap, tape)\n\n        if (status.iteration < 5 || status.iteration >= LOOP_LIMIT-1) {\n            continue\n        }\n\n        test.expected = status.status === 'accepted' ? true : false\n\n        // if rejected and rejectedOnes > 50, restart\n        if ( !test.expected && tests.length - acceptedCount > 50 ) {\n            continue\n        }\n\n        if ( test.expected) {\n            acceptedCount++\n        }\n\n        let currentRow = 1\n        Object.values( prodMap ).forEach( instruction => {\n            for ( let i = 0; i<5; i++) {\n                if ( instruction[i] !== '_') {\n                    test.tape[`${i} ${currentRow}`] = instruction[i]\n                }\n            }\n\n            currentRow++\n        })\n        \n\n        tests.push(test)\n    }\n\n    return tests\n}\n","\n\nfunction pickOneFrom(...arr) {\n\treturn arr[randomBetween(0, arr.length)]\n}\n\nfunction randomBetween(from, toExcl) {\n\treturn Math.floor(Math.random() * (toExcl - from) + from)\n}\n\n\nfunction generate_groups() {\n\n\tconst NODES = ['F', 'W', 'A', 'E']\n\n\tlet groups = Array(NODES.length).fill(true).map(r => [])\n\tlet single = pickOneFrom(true, false)\n\n\tif (single) {\n\t\tgroups[0] = ['F', 'W', 'A', 'E']\n\t}\n\telse {\n\t\tfor (let i = 0; i < NODES.length; i++) {\n\t\t\tgroups[randomBetween(0, NODES.length)].push(NODES[i])\n\t\t}\n\t}\n\n\treturn groups\n}\n\nfunction generate_pairs( groups) {\n\tlet pairs = []\n\n\tfor (let i = 0; i<groups.length; i++) {\n\n\t\tif ( groups[i].length === 0) continue\n\t\t\n\t\tlet usedOnes = Array( groups[i].length ).fill(false)\n\t\tlet generatedFirstOne = false\n\n\t\twhile ( usedOnes.filter( a => a ).length !== usedOnes.length) {\n\t\t\tlet n1 = randomBetween(0, groups[i].length )\n\t\t\tlet n2 = randomBetween(0, groups[i].length )\n\t\t\t\n\t\t\tif (generatedFirstOne) {\n\t\t\t\tif ( !usedOnes[n1] && !usedOnes[n2]) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpairs.push( [ groups[i][n1], groups[i][n2]] )\n\t\t\tusedOnes[n1] = true\n\t\t\tusedOnes[n2] = true\n\t\t\tgeneratedFirstOne = true\n\t\t}\n\t}\n\n\treturn pairs\n}\n\nfunction isSingleGroup( groups ) {\n\tlet isSingle = false\n\n\tfor (let i = 0; i<groups.length; i++) {\n\t\tif ( groups[i].length === groups.length ) {\n\t\t\tisSingle = true\n\t\t\tbreak\n\t\t}\n\t}\n\n\treturn isSingle\n}\n\n\nmodule.exports = function graph() {\n\n\tlet tests = []\n\n\twhile ( tests.length !== 100) {\n\n\t\tlet test = { tape: {} }\n\n\t\tlet groups = generate_groups()\n\t\tlet pairs = generate_pairs(groups)\n\n\t\ttest.expected = isSingleGroup(groups)\n\n\t\tfor (let i = 0; i<pairs.length; i++) {\n\t\t\ttest.tape[`0 ${i}`] = pairs[i][0]\n\t\t\ttest.tape[`1 ${i}`] = pairs[i][1]\n\t\t}\n\n\t\ttests.push( test )\n\t}\n\n\treturn tests\n}","const rps = require(\"./rps\");\nconst palindrom = require(\"./palindrom\");\nconst xox = require(\"./xox\");\nconst battlefield = require(\"./battlefield\");\nconst multiplication = require(\"./multiplication\");\nconst chess = require('./chess')\nconst sudoku = require('./sudoku')\nlet maze = require('./maze')\nlet turing = require('./turing')\nconst graph = require(\"./graph\");\n\n/*\n+ rock scissor paper\n+ general palindrome\n+ nxn xox tie\n+ check\n+ labyrinth solvable?\n+ war who wins\n+ sudoku\n+ n digit multiplication\n+ graph connected?\n+ universal turing machine\n*/\n\nmodule.exports = [\n  rps,\n  palindrom,\n  xox,\n  chess,\n  maze,\n  battlefield,\n  sudoku,\n  multiplication,\n  graph,\n  turing\n];","\nimport {useRef, useEffect} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\n\n\n// Originally written by Dan Abramov on overreacted.io.\n// Component which starts an interval onmount and clears on unmount.\n// signature exactly same as setInterval.\nexport default function Interval ({callback, delay}) {\n    const savedCallback = useRef();\n    \n    // Remember the latest callback.\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n    \n    // Set up the interval.\n    useEffect(() => {\n        function tick() {\n        savedCallback.current();\n        }\n        if (delay !== null) {\n        let id = setInterval(tick, delay);\n        return () => clearInterval(id);\n        }\n    }, [delay]);\n\n    return <> </>\n}\n","\n\nimport {useState, useEffect} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\nimport { produce } from 'immer'\n\n\n// NOTE: this uses the flags-commands convention. For an explanation, see main.js\n// xprev (x previous) and yprev are only needed for visual purposes\n// resetFlag will reset origin back so that (0,0) is the center of the tape.\n// this can be changed by clicking on the tape. it will change the origin.\nexport default function Tape({tape, x, y, xprev, yprev, widthInPixels, resetFlag}) {\n    let [tm, setTm] = useState({\n        w: 0,\n        h: 0,\n        ox: 0, // abr. \"origin x\"\n        oy: 0, // abr. \"origin y\"\n    })\n    // (ox,oy) is the actual index of the cell displayed on top-left corner.\n    // for example, if origin=(-1,-1) and p=(0,-1), p will be top-second-leftmost cell.\n\n    useEffect(() => {\n        reset()\n    }, [resetFlag])\n    // if resetFlag set, reset.\n\n    useEffect(()=> {\n        // for produce, see explanation of the pattern on /utils/productions.js\n        setTm( produce(s => {\n            s.w = Math.floor( widthInPixels / 33 )\n            if (s.w % 2 == 0) s.w-- // width must be odd, so that TM is on the center\n            if (s.w < 0) s.w = 0\n            if (s.w > 25) s.w = 25 // max 25 cell width\n            s.h = Math.ceil( s.w / 2 ) // height must be odd too\n            if (s.h % 2 == 0) s.h++\n\n            s.ox = - Math.floor( s.w / 2) // set origin such that (0,0) is center\n            s.oy = - Math.floor( s.h / 2)\n        }))\n    }, [widthInPixels])\n    // recalc when width changes\n\n    return <table className='Tape'>\n        <tbody>\n            {\n                Array(tm.h).fill(true).map((_,i) => <tr>\n                    {\n                        Array(tm.w).fill(true).map((_,j) => {\n                            let ax = tm.ox+j // abr. \"actual x\"\n                            let ay = tm.oy+i\n                            let key = `${ax} ${ay}`\n                            let val = tape[key]\n\n                            return <td\n                                className={[\n                                    ax === x && ay === y && 'current',\n                                    ax === xprev && ay === yprev && 'previous'\n                                ].join(' ')}\n                                onClick={handleMoveTape.bind(this, ax, ay)}\n                            >\n                                {val}\n                            </td>\n                        })\n                    }\n                </tr>)\n            }\n        </tbody>\n    </table>\n\n    function handleMoveTape (ax, ay, ev) {\n        setTm( produce(s => {\n            s.ox = ax - Math.floor( s.w / 2)\n            s.oy = ay - Math.floor( s.h / 2)\n        }))\n        ev.stopPropagation()\n    }\n\n    function reset() {\n        setTm( produce( s => {\n            s.ox = - Math.floor( s.w / 2)\n            s.oy = - Math.floor( s.h / 2)\n        }))\n    }\n}\n","\n\nimport {useState, useRef, useEffect} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\nimport { produce } from 'immer'\nimport Tape from './Tape'\n\n\n\n// see main.js for interface descriptions\n// see main.js for the pattern of flags-commands\n// onEnd -> onEnd( true/false/undefined )\nexport default function TestInstance ({text, prodMap,initialTape,initialState,expected,number, nextFlag, resetFlag, onEnd}) {\n    let [isExpanded, setExpanded] = useState(false)\n    let [tape, setTape] = useState(initialTape)\n    let [currentState, setCurrentState] = useState(initialState) // ingame state\n    let tapeContainer = useRef(null) // to measure width\n    let [resetCommand, setResetCommand] = useState(false)\n    let [tm, setTm] = useState({x: 0, y: 0, xprev: 0, yprev: 0})\n\n    useEffect(() => {\n        next()\n    }, [nextFlag])\n\n    useEffect(() => {\n        reset()\n    }, [resetFlag])\n\n    // suppress flags\n    useEffect(() => {\n        if (resetCommand) {\n            setResetCommand(false)\n        }\n    }, [resetCommand])\n\n    useEffect(() => {\n        if ( currentState === 'ACCEPT' && expected\n        || currentState === 'REJECT' && !expected ) {\n            onEnd && onEnd(true)\n        }\n        else if ( currentState === 'ACCEPT' && !expected\n        || currentState === 'REJECT' && expected ) {\n            onEnd && onEnd(false)\n        }\n    })\n\n    return <section\n        className='TestInstance'\n        ref={tapeContainer}\n    >    \n        <div\n            className='header'\n            onClick={handleExpand}\n        >\n            <p\n                className={[\n                    ( currentState === 'ACCEPT' && expected\n                    || currentState === 'REJECT' && !expected ) && 'green',\n                    ( currentState === 'ACCEPT' && !expected\n                    || currentState === 'REJECT' && expected ) && 'red',\n                ].join(' ')}\n            >\n                {text[32]} {number}\n            </p>\n        </div>\n        \n        {\n            isExpanded && <>\n            <Tape\n                tape={tape}\n                x={tm.x}\n                y={tm.y}\n                xprev={tm.xprev}\n                yprev={tm.yprev}\n                widthInPixels={tapeContainer.current.clientWidth}\n                resetFlag={resetCommand}\n            />\n\n            <div className=\"status\">\n                <div>\n                    <button onClick={next}>\n                        {text[33]}\n                    </button>\n                </div>\n                <div>\n                    <span>{text[35]}</span>\n                    <span>{currentState}</span>\n                </div>\n                <div>\n                    <span>{text[36]}</span>\n                    <span>\n                        {\n                            getNextProduction(tm, prodMap, tape, currentState).join(' ')\n                        }\n                    </span>\n                </div>\n                <div>\n                    <button onClick={reset}>\n                        {text[34]}\n                    </button>\n                </div>\n                <div>\n                    <span>{text[37]}</span>\n                    <span\n                        className={[\n                            ( currentState === 'ACCEPT' && expected\n                            || currentState === 'REJECT' && !expected ) && 'green',\n                            ( currentState === 'ACCEPT' && !expected\n                            || currentState === 'REJECT' && expected ) && 'red',\n                        ].join(' ')}\n                    >\n                        {\n                            currentState === 'ACCEPT'\n                            ? text[39]\n                            : ( currentState === 'REJECT'\n                            ? text[40]\n                            : text[41]\n                            )\n                        }\n                    </span>\n                </div>\n                <div>\n                    <span>{text[38]}</span>\n                    <span\n                        className={[\n                            ( currentState === 'ACCEPT' && expected\n                            || currentState === 'REJECT' && !expected ) && 'green',\n                            ( currentState === 'ACCEPT' && !expected\n                            || currentState === 'REJECT' && expected ) && 'red',\n                        ].join(' ')}\n                    >\n                        {expected ? text[39] : text[40]}\n                    </span>\n                </div>\n            </div>\n            </>\n        }\n\n    </section>\n\n    function next() {\n\n        let nextProd = getNextProduction(tm, prodMap, tape, currentState)\n        \n        setCurrentState( nextProd[2] )\n\n        setTape( produce(s => {\n            let key = `${tm.x} ${tm.y}`\n            if (nextProd[3] === '_') {\n                delete s[key]\n            }\n            else {\n                s[key] = nextProd[3]\n            }\n        }))\n        \n        switch( nextProd[4] ) {\n            case 'R':\n                setTm({x: tm.x+1, y: tm.y, xprev: tm.x, yprev: tm.y })\n                break\n            case 'L':\n                setTm({x: tm.x-1, y: tm.y, xprev: tm.x, yprev: tm.y })\n                break\n            case 'U':\n                setTm({x: tm.x, y: tm.y-1, xprev: tm.x, yprev: tm.y })\n                break\n            case 'D':\n                setTm({x: tm.x, y: tm.y+1, xprev: tm.x, yprev: tm.y })\n                break  \n            case 'N':\n                setTm({x: tm.x, y: tm.y, xprev: tm.x, yprev: tm.y })\n                break\n        }\n    }\n\n    function reset() {\n        setResetCommand(true)\n        setCurrentState(initialState)\n        setTape(initialTape)\n        setTm({x: 0, y: 0, xprev: 0, yprev: 0})\n        onEnd && onEnd(undefined)\n    }\n\n    function getNextProduction(tm, prodMap, tape, currentState) {\n        let currentSymbol = tape[`${tm.x} ${tm.y}`] || '_'\n        let nextProd\n        if ( currentState === 'ACCEPT') {\n            nextProd = ['ACCEPT', currentSymbol, 'ACCEPT', currentSymbol, 'N']\n        }\n        else if ( currentState === 'REJECT' ) {\n            nextProd = ['REJECT', currentSymbol, 'REJECT', currentSymbol, 'N']\n        }\n        else if (prodMap[`${currentState} ${currentSymbol}`]) {\n            nextProd = prodMap[`${currentState} ${currentSymbol}`]\n        }\n        else {\n            nextProd = [currentState, currentSymbol, 'REJECT', currentSymbol, 'N']\n        }\n\n        return nextProd\n    }\n\n    function handleExpand() {\n        setExpanded( !isExpanded )\n    }\n}","\nimport {useState, useContext, useEffect} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\nimport { produce } from 'immer'\nimport {context} from '../utils/init'\nimport test_functions from '../test_functions/index'\nimport prod from '../utils/productions'\nimport Interval from '../components/Interval'\nimport TestInstance from '../components/TestInstance'\n\n\n\n\nexport default function TestManager({levelNo, onTestsReady}) {\n    let [g,gg] = useContext(context)\n    let [testResults, setTestResults] = useState([]) // signature [Boolean]\n    let [tests, setTests] = useState([]) // signature [Test] (see main.js)\n    let [testerStatus, setTesterStatus] = useState(0) // 0=didnt start 1=running 2=paused 3=ended\n    let [resetAllCommand, setResetAllCommand] = useState(false)\n    let [nextCommand, setNextCommand] = useState(false)\n     \n    // uncomment for debugging\n    // useEffect(() => {\n    //     window._ts = testerStatus\n    //     window._tr = testResults\n    // })\n\n    useEffect(() => {\n        let tests = test_functions[levelNo-1]().shuffle()\n        setTests( tests )\n        onTestsReady( tests[0] )\n    }, [levelNo])\n\n    useEffect(() => {\n        // skip initial condition where tests = []\n        if (!tests.length) return\n\n        let allRight = true\n        let allFinished = true\n        let allUndefined = true\n        for (let i = 0; i<tests.length; i++) {\n            if (testResults[i] === undefined) {\n                allFinished = false\n                allRight = false\n            }\n            else if (testResults[i] === true) {\n                allUndefined = false\n            }\n            else if (testResults[i] === false) {\n                allRight = false\n                allUndefined = false\n            }\n        }\n\n        // level up\n        if (allRight) {\n            gg( prod.levelComplete(levelNo) )\n        }\n\n        // stop interval\n        if (allFinished) {\n            setTesterStatus(3)\n        }\n\n        // reset after automatic tester finishes\n        if (testerStatus === 3 && allUndefined) {\n            setTesterStatus(0)\n        }\n\n    }, [testResults])\n\n    useEffect(() => {\n        setResetAllCommand(true)\n    }, [g.prodMap, levelNo, g.initialState])\n\n\n    // suppress flags\n    useEffect(() => {\n        if (resetAllCommand) {\n            setResetAllCommand(false)\n        }\n        if (nextCommand) {\n            setNextCommand(false)\n        }\n\n    }, [resetAllCommand, nextCommand])\n\n\n    let correctAnswersLen = testResults.filter(t => t === true).length\n    let incorrectAnswersLen = testResults.filter(t => t === false).length\n\n    return g.errorMsgInd\n        ? <span className='TestManager red'>\n            {g.text[24]}\n        </span>\n        : <>\n            <section className='TestManager'>\n                <button\n                    onClick={handleRun}\n                    className={testerStatus === 3 && 'disabled'}\n                >\n                    {\n                        testerStatus === 0 ? g.text[25] : (\n                            testerStatus === 1 ? g.text[26] : g.text[27]\n                        )\n                    }\n                </button>\n                <button onClick={handleReset}>\n                    {g.text[28]}\n                </button>\n                {\n                    testerStatus === 1 && <>\n                        <Interval callback={handleInterval} delay={1} />\n                        <p> {g.text[29]} </p>\n                    </>\n                }\n                <p\n                    className={ correctAnswersLen === tests.length && 'green' }\n                >\n                    {g.text[30]} {correctAnswersLen} / {tests.length}\n                </p>\n                <p\n                    className={ correctAnswersLen === tests.length && 'green' }\n                >\n                    {g.text[31]} {incorrectAnswersLen} / {tests.length}\n                </p>\n            </section>\n            {\n                tests.map((t,i) => <TestInstance\n                    text={g.text}\n                    prodMap={g.prodMap}\n                    initialTape={t.tape}\n                    initialState={g.initialState}\n                    expected={t.expected}\n                    number={i+1}\n                    nextFlag={nextCommand}\n                    resetFlag={resetAllCommand}\n                    onEnd={handleEnd.bind(this, i)}\n                    key={i}\n                />)\n            }\n        </>\n\n    function handleEnd (ind, result) {\n        setTestResults( produce( s => {\n            s[ind] = result // true, false, undefined (test ongoing)\n        }))\n    }\n\n    // Math.random( ) is pretty likely to be different on every call, so command will trigger onEffect on targets\n    function handleInterval() {\n        setNextCommand( Math.random() )\n    }\n\n    function handleRun() {\n        if (testerStatus === 0) setTesterStatus(1)\n        else if (testerStatus === 1) setTesterStatus(2)\n        else if (testerStatus === 2) setTesterStatus(1)\n    }\n\n    function handleReset() {\n        setResetAllCommand(true)\n        if (testerStatus === 1 || testerStatus === 2) setTesterStatus(0)\n    }\n}\n","\nimport {useContext, useEffect, useRef, useState} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\nimport {context, levelCount} from '../utils/init'\nimport InputManager from './InputManager'\nimport Markdown from '../components/Markdown'\nimport TestManager from './TestManager'\nimport Tape from '../components/Tape'\n// import sampleFields from '../utils/sampleInputs'\n\n// +href[1] is the first capturing group of the passed regex, which is the level number\nexport default function LevelPage({href}) {\n    let [g,gg] = useContext(context)\n    let [sampleTest, setSampleTest] = useState( { tape: {}, expected: '...' })\n    let tapeContainer = useRef()\n    let levelNo = +href[1]\n\n    useEffect(() => {\n\n        if( levelNo > levelCount) return\n        document.title = g.text[levelNo]\n        \n    }, [levelNo, g.languageUpdateNeeded])\n\n    if( levelNo > levelCount) {\n        return null\n    }\n\n    return <div className=\"LevelPage\" ref={tapeContainer} >\n        <InputManager levelNo={levelNo} />\n        <Markdown text={g.text[levelNo+74]} />\n\n        <div>\n            <h1> {g.text[49]} </h1>\n            <Tape\n                resetFlag={false}\n                widthInPixels={tapeContainer.current && tapeContainer.current.clientWidth /1.2 || 0}\n                x={0}\n                y={0}\n                xprev={0}\n                yprev={0}\n                // tape={sampleFields[levelNo-1]}\n                tape={sampleTest.tape}\n            />\n            <p> {g.text[38]}: {sampleTest.expected ? g.text[39] : g.text[40]} </p>\n        </div>\n\n        <TestManager\n            levelNo={levelNo}\n            onTestsReady={setSampleTest}\n            />\n    </div>    \n}\n","\n\nimport {useState, useEffect} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\n\n// up arrow used only on HelpPage\nexport default function ScrollToTop () {\n    let [isScrolledDown, setScrolledDown] = useState(pageYOffset ? true : false)\n\n    useEffect(() => {\n        window.addEventListener('scroll', () => {\n            setScrolledDown( pageYOffset ? true : false )\n        })\n    }, [])\n\n    if (isScrolledDown) {\n        return <button className='ScrollToTop' onClick={handleClick}>  </button>\n    }\n    \n    function handleClick() {\n        window.scrollTo(0,0)\n    }\n}\n\n","\nimport {useState, useRef, useEffect, useContext} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\nimport {context} from '../utils/init'\nimport prod from '../utils/productions'\nimport Interval from '../components/Interval'\nimport Markdown from '../components/Markdown'\nimport Input from '../components/Input'\nimport Tape from '../components/Tape'\nimport TestInstance from '../components/TestInstance'\nimport ScrollToTop from '../components/ScrollToTop'\n\n\n\n////////\nexport default function HelpPage() {\n    let [g,gg] = useContext(context)\n    let [counter, setCounter] = useState(0)\n    let tapeContainer = useRef(null)\n    // counter counts from 0 to inf. it is for animating tapes on this page\n\n    useEffect(() => {\n        document.title = g.text[0]\n    }, [g.languageUpdateNeeded])\n\n    return <div\n        className=\"HelpPage\"\n        ref={tapeContainer}\n    >\n        <Interval callback={() => setCounter(counter+1)} delay={1000} />\n        <Markdown text={g.text[50]} />\n        \n        <Input\n            text={g.text}\n            isEditable={false}\n            raw={`\n                i X m X R\n                i _ m X N\n                m X m X R\n                m _ m X R\n                m Y ACCEPT _ N\n            `}\n        />\n\n        <Markdown text={g.text[51]} />\n\n        <section>\n            <Tape\n                resetFlag={false}\n                widthInPixels={tapeContainer.current && tapeContainer.current.clientWidth /1.2 || 0}\n                x={[0,-1,-2,-1,0,1,2,1][counter % 8]}\n                y={0}\n                xprev={[1,0,-1,-2,-1,0,1,2][counter % 8]}\n                yprev={0}\n                tape={{\n                    '2 0' : 'B',\n                    '-2 0' : 'A'\n                }}\n            />\n        </section>\n\n        <Markdown text={g.text[52]} />\n\n        <section>\n            <Tape\n                resetFlag={false}\n                widthInPixels={tapeContainer.current && tapeContainer.current.clientWidth /1.2 || 0}\n                x={[0,-1,-2,-1,0,1,2,1][counter % 8]}\n                y={0}\n                xprev={[1,0,-1,-2,-1,0,1,2][counter % 8]}\n                yprev={0}\n                tape={{\n                    '2 0' : ['B','B','B','B','B','B','B','A','A','A','A','A','A','A','A','B'][counter % 16],\n                    '-2 0' : ['A','A','A','B','B','B','B','B','B','B','B','A','A','A','A','A'][counter % 16]\n                }}\n            />\n        </section>\n\n\n        <Markdown text={g.text[53]} />\n        \n        <section>\n            <Tape\n                resetFlag={false}\n                widthInPixels={tapeContainer.current && tapeContainer.current.clientWidth /1.2 || 0}\n                x={0}\n                y={[-1,0,1,2,2,2,1,0,-1,-2,-2,-2][counter % 12]}\n                xprev={0}\n                yprev={[-2,-1,0,1,2,2,2,1,0,-1,-2,-2][counter % 12]}\n                tape={{\n                    '0 -1' : ['','X','X','X','X','X','X','X','X','','',''][counter % 12],\n                    '0 0' : ['','','X','X','X','X','X','X','','','',''][counter % 12],\n                    '0 1': ['','','','X','X','X','X','','','','',''][counter % 12]\n                }}\n            />\n        </section>\n\n        <Markdown text={g.text[54]} />\n        \n        <Input\n            text={g.text}\n            isEditable={false}\n            raw={`\n                A 0 B 1 R\n            `}\n        />\n\n        <Markdown text={g.text[55]} />\n\n        <Input\n            text={g.text}\n            isEditable={false}\n            raw={`\n                B 1 A 2 R\n                A 2 B 4 U\n                A 3 C 1 L\n            `}\n        />\n\n        <section>\n            <Tape\n                resetFlag={false}\n                widthInPixels={tapeContainer.current && tapeContainer.current.clientWidth /1.2 || 0}\n                x={0}\n                y={0}\n                xprev={0}\n                yprev={0}\n                tape={{\n                    '0 0' : '3',\n                    '-1 0' : '2',\n                    '-2 0' : '1'\n                }}\n            />\n        </section>\n\n        <Markdown text={g.text[56]} />\n\n        <section>\n            <Tape\n                resetFlag={false}\n                widthInPixels={tapeContainer.current && tapeContainer.current.clientWidth /1.2 || 0}\n                x={0}\n                y={0}\n                xprev={0}\n                yprev={0}\n                tape={{\n                    '2 0' : 'X'\n                }}\n            />\n        </section>\n\n        <Markdown text={g.text[57]} />\n\n        <Input\n            text={g.text}\n            isEditable={false}\n            raw={`\n                ${g.text[67]} _ ${g.text[67]} _ R\n            `}\n        />\n\n        <Markdown text={g.text[58]} />\n\n        <Input\n            text={g.text}\n            isEditable={false}\n            raw={`\n                ${g.text[67]} _ ${g.text[67]} _ R\n                ${g.text[67]} X ${g.text[68]} X N\n            `}\n        />\n\n        <Markdown text={g.text[59]} />\n\n        <Input\n            text={g.text}\n            isEditable={false}\n            raw={`\n                ${g.text[67]} _ ${g.text[67]} _ R\n                ${g.text[67]} X ${g.text[68]} X N\n                ${g.text[68]} X ${g.text[68]} X N\n            `}\n        />\n\n        <Markdown text={g.text[60]} />\n\n        <Input\n            text={g.text}\n            isEditable={false}\n            raw={`\n                ${g.text[67]} _ ${g.text[67]} _ R\n                ${g.text[67]} X ${g.text[68]} X N\n                ${g.text[68]} X ${g.text[68]} X N\n            `}\n        />\n\n        <Markdown text={g.text[61]} />\n        \n\n        <section>\n            <Tape\n                resetFlag={false}\n                widthInPixels={tapeContainer.current && tapeContainer.current.clientWidth /1.2 || 0}\n                x={0}\n                y={0}\n                xprev={0}\n                yprev={0}\n                tape={{\n                    '0 0' : '1',\n                    '1 0' : '0',\n                    '2 0' : '0',\n                    '3 0' : '0'\n                }}\n            />\n        </section>\n\n        <Markdown text={g.text[62]} />\n\n        <Input\n            text={g.text}\n            isEditable={false}\n            raw={`\n                ${g.text[69]} ${g.text[72]} ${g.text[69]} ${g.text[72]} R\n                ${g.text[69]} _ ${g.text[70]} _ N\n                ${g.text[70]} _ ${g.text[71]} _ L\n                ${g.text[71]} ${g.text[73]} ACCEPT ${g.text[73]} N\n                ${g.text[71]} ${g.text[74]} REJECT ${g.text[74]} N\n            `}\n        />\n\n\n        <Markdown text={g.text[63]} />\n\n        <Input\n            text={g.text}\n            isEditable={false}\n            raw={`\n                ${g.text[69]} ${g.text[72]} ${g.text[69]} ${g.text[72]} R\n                ${g.text[69]} _ ${g.text[71]} _ L\n                ${g.text[71]} ${g.text[73]} ACCEPT ${g.text[73]} N\n            `}\n        />\n\n\n\n        <Markdown text={g.text[64]} />\n\n        <Input\n            text={g.text}\n            isEditable={false}\n            raw={`\n                ${g.text[69]} 0 ${g.text[69]} 0 R\n                ${g.text[69]} 1 ${g.text[69]} 1 R\n                ${g.text[69]} 2 ${g.text[69]} 2 R\n                ${g.text[69]} 3 ${g.text[69]} 3 R\n                ${g.text[69]} 4 ${g.text[69]} 4 R\n                ${g.text[69]} 5 ${g.text[69]} 5 R\n                ${g.text[69]} 6 ${g.text[69]} 6 R\n                ${g.text[69]} 7 ${g.text[69]} 7 R\n                ${g.text[69]} 8 ${g.text[69]} 8 R\n                ${g.text[69]} 9 ${g.text[69]} 9 R\n                ${g.text[69]} _ ${g.text[71]} _ L\n                ${g.text[71]} 0 ACCEPT 0 N\n                ${g.text[71]} 2 ACCEPT 2 N\n                ${g.text[71]} 4 ACCEPT 4 N\n                ${g.text[71]} 6 ACCEPT 6 N\n                ${g.text[71]} 8 ACCEPT 8 N\n            `}\n        />\n\n\n        <Markdown text={g.text[65]} />\n\n        <TestInstance\n            text={g.text}\n            number={1}\n            expected={false}\n            initialState={`${g.text[69]}`}\n            initialTape={{\n                '0 0' : '9',\n                '1 0' : '9',\n                '2 0' : '9'\n            }}\n            prodMap={{\n                [`${g.text[69]} 1`] : [`${g.text[69]}`, '1', `${g.text[69]}`, '1', 'R'],\n                [`${g.text[69]} 2`] : [`${g.text[69]}`, '2', `${g.text[69]}`, '2', 'R'],\n                [`${g.text[69]} 3`] : [`${g.text[69]}`, '3', `${g.text[69]}`, '3', 'R'],\n                [`${g.text[69]} 4`] : [`${g.text[69]}`, '4', `${g.text[69]}`, '4', 'R'],\n                [`${g.text[69]} 5`] : [`${g.text[69]}`, '5', `${g.text[69]}`, '5', 'R'],\n                [`${g.text[69]} 6`] : [`${g.text[69]}`, '6', `${g.text[69]}`, '6', 'R'],\n                [`${g.text[69]} 7`] : [`${g.text[69]}`, '7', `${g.text[69]}`, '7', 'R'],\n                [`${g.text[69]} 8`] : [`${g.text[69]}`, '8', `${g.text[69]}`, '8', 'R'],\n                [`${g.text[69]} 9`] : [`${g.text[69]}`, '9', `${g.text[69]}`, '9', 'R'],\n                [`${g.text[69]} 0`] : [`${g.text[69]}`, '0', `${g.text[69]}`, '0', 'R'],\n                [`${g.text[69]} _`] : [`${g.text[69]}`, '_', `${g.text[71]}`, '_', 'L'],\n                [`${g.text[71]} 0`] : [`${g.text[71]}`, '0', 'ACCEPT', '0', 'N'],\n                [`${g.text[71]} 2`] : [`${g.text[71]}`, '2', 'ACCEPT', '2', 'N'],\n                [`${g.text[71]} 4`] : [`${g.text[71]}`, '4', 'ACCEPT', '4', 'N'],\n                [`${g.text[71]} 6`] : [`${g.text[71]}`, '6', 'ACCEPT', '6', 'N'],\n                [`${g.text[71]} 8`] : [`${g.text[71]}`, '8', 'ACCEPT', '8', 'N']\n            }}\n        />\n\n        <TestInstance\n            text={g.text}\n            number={2}\n            expected={true}\n            initialState={`${g.text[69]}`}\n            initialTape={{\n                '0 0' : '1',\n                '1 0' : '0',\n                '2 0' : '0',\n                '3 0' : '0'\n            }}\n            prodMap={{\n                [`${g.text[69]} 1`] : [`${g.text[69]}`, '1', `${g.text[69]}`, '1', 'R'],\n                [`${g.text[69]} 2`] : [`${g.text[69]}`, '2', `${g.text[69]}`, '2', 'R'],\n                [`${g.text[69]} 3`] : [`${g.text[69]}`, '3', `${g.text[69]}`, '3', 'R'],\n                [`${g.text[69]} 4`] : [`${g.text[69]}`, '4', `${g.text[69]}`, '4', 'R'],\n                [`${g.text[69]} 5`] : [`${g.text[69]}`, '5', `${g.text[69]}`, '5', 'R'],\n                [`${g.text[69]} 6`] : [`${g.text[69]}`, '6', `${g.text[69]}`, '6', 'R'],\n                [`${g.text[69]} 7`] : [`${g.text[69]}`, '7', `${g.text[69]}`, '7', 'R'],\n                [`${g.text[69]} 8`] : [`${g.text[69]}`, '8', `${g.text[69]}`, '8', 'R'],\n                [`${g.text[69]} 9`] : [`${g.text[69]}`, '9', `${g.text[69]}`, '9', 'R'],\n                [`${g.text[69]} 0`] : [`${g.text[69]}`, '0', `${g.text[69]}`, '0', 'R'],\n                [`${g.text[69]} _`] : [`${g.text[69]}`, '_', `${g.text[71]}`, '_', 'L'],\n                [`${g.text[71]} 0`] : [`${g.text[71]}`, '0', 'ACCEPT', '0', 'N'],\n                [`${g.text[71]} 2`] : [`${g.text[71]}`, '2', 'ACCEPT', '2', 'N'],\n                [`${g.text[71]} 4`] : [`${g.text[71]}`, '4', 'ACCEPT', '4', 'N'],\n                [`${g.text[71]} 6`] : [`${g.text[71]}`, '6', 'ACCEPT', '6', 'N'],\n                [`${g.text[71]} 8`] : [`${g.text[71]}`, '8', 'ACCEPT', '8', 'N']\n            }}\n        />\n\n        <Markdown text={g.text[66]} />\n        \n        <ScrollToTop />\n    </div>\n}\n","\nimport {render, h, Fragment} from 'preact'\n\nexport default function Credits ({version}) {\n    return <div className=\"Credits\">\n        <span>\n            <a href=\"https://github.com/denizbasgoren\" target='_blank'> Deniz Bashgoren </a>\n         2020  v{version}\n        </span>\n    </div>\n}","\nimport {useState, useEffect} from 'preact/hooks'\nimport {render, h, Fragment} from 'preact'\nimport {context, init, urlPrefix, currentAppVersion} from '../utils/init'\nimport prod from '../utils/productions'\nimport Header from './Header'\nimport Route from '../components/Route'\nimport MenuPage from './MenuPage'\nimport LevelPage from './LevelPage'\nimport HelpPage from './HelpPage'\nimport Credits from '../components/Credits'\nimport ScrollToTop from '../components/ScrollToTop'\n\n// topmost component\nexport default function App () {\n\n    let [s,ss] = useState(init)\n    // these are local state and its setter.\n    // by convention, s = local state, ss = setter\n    // these two also happen to be \"global state\" since App is topmost component.\n    // so, they are referenced as g and gg elsewhere (abr. global)\n\n\n    // uncomment to set public for debug purposes\n    // useEffect( () => {\n    //     window._state = s\n    //     window._updatestate = ss\n    //     window._marked = marked\n    //     window._testF = test_functions\n    // })\n\n\n    useEffect( () => {\n        window.onpopstate = ev => {\n            ss( prod.forceUpdate() )\n        }\n        // re-render needed when url changes\n\n        window.onresize = ev => {\n            ss( prod.forceUpdate() )\n        }\n        // also when resized\n    }, [])\n\n\n\n    useEffect( () => {\n        document.body.classList.remove('dark')\n        if (s.lighting === 'dark') {\n            document.body.classList.add('dark')\n        }\n    }, [s.lighting])\n    // css uses the following convention\n    /*\n        someSelector {\n            propsForLightTheme\n        }\n\n        body.dark someSelector {\n            propsForDarkTheme\n        }\n    */\n\n\n    useEffect( () => {\n        if (!s.languageUpdateNeeded) return\n\n        window.localStorage.language = s.language\n\n        fetch(`${urlPrefix}/text/${s.language}.json`)\n        .then( res => res.text() )\n        .then( str => {\n            window.localStorage.text = str\n            ss( prod.updateLanguage( JSON.parse(str), s.language ) )\n        })\n\n    }, [s.languageUpdateNeeded])\n    // when languageUpdateNeeded is set to true, re-render occurs, and then\n    // this effect runs. lang is downloaded from respective folder\n    // saved on localStorage\n    // then languageUpdateNeeded is set to false\n    // re-render occurs, displaying new lang text this time\n    // this effect runs again, but stopped immediately\n    // this is to prevent infinite loop\n\n\n\n    // [s,ss] are passed down the tree. They will be called as [g,gg]\n    \n    return <context.Provider value={[s,ss]}>\n        <div className='App'>\n            <Header />\n            <Route href={/^\\/?(?:index\\.html)?$/i}>\n                <MenuPage />\n            </Route>\n            <Route href={/^\\/?(\\d+)\\/?$/}>\n                <LevelPage />\n            </Route>\n            <Route href={/^\\/?help\\/?$/i}>\n                <HelpPage />\n            </Route>\n            <Credits version={currentAppVersion} />\n            <ScrollToTop />\n        </div>\n    </context.Provider>\n}\n","import './style.css'\nimport { render, h, Fragment } from 'preact'\nimport './utils/std_overrides'\nimport './utils/init'\nimport App from './containers/App'\n\n\n\nrender(<App />, document.body)\n\n\n/*\nThis is a single page webapp project written in HTML,CSS,JS.\nIt uses Babel as transpiler (JSX->ES6->ES5)\nIt uses Parcel as minifier and bundler\nIt uses npm and its config file package.json for dependency management\nIt uses Preact as its main ui library, which is a lightweight clone of React.\nIt uses only functional components, aided with context and hooks.\nIt depends on a few other libraries to get the job done:\n- Marked: takes markdown string and outputs html\n- Immer: the only important function is produce, which takes an object, and a function, which describes what to do on the object. It outputs the same object with the function applied onto it. The key is that the initial object remains untouched, or \"immutable\". It is easier to use produce instead of ... syntax.\n\nProject is divided into 6 folders: \"components\", \"containers\", \"test_functions\", \"utils\", \"text\", \"img\"\n\nComponents vs containers: the difference between these two is actually blurry and subjective. My convention is that to put components which access the global state into containers folder. Read further for the global state.\n\nTestFunctions is a folder of pure js functions, needed for the application to run. These functions might import some other libraries. Though they don't right now.\n\nText: since this app is multilingual, we keep all the languages seperate, and download only as requested.\n\nUtils is a multipurpose folder, it could also be named \"other\". It contains \"init.js\", \"productions.js\", \"std_overrides.js\"\n\nStd_overrides: It is important to make overrides to the standard library as visible as possible.\n\nInit: the first piece of code that runs on startup. It is about setting up initial state, reading localStorage state.\n\nProductions: These are the functions to be passed to immer's produce function. These take a single param s, which is the object, on which the change will be applied. Abbreviated after \"state\".\n\n\n\n\n\n\nIMPORTANT NOTE: This project is designed to run on local, as well as on github pages. It is important to set the environment variables right to get the app working correctly.\n\n- Update the variable urlPrefix, found on 404.html and utils/init.js.\nIf on local, urlPrefix = '', else if on github pages, urlPrefix = '/turing'.\n\n\n\n\n\n\n\nInterfaces:\n\nProdMap: {\n    [`${stateFrom} ${symbol}`] : [stateFrom, symbol, stateTo, symbolTo, move]\n}\n\nNote that xy plane starts at top-left corner and y rises downwards\nTape: {\n    [`${x} ${y}`] : symbol\n}\n\nTest: {\n    tape: Tape,\n    expected: Boolean\n}\n\n\n\n\n\nPattern of flags-commands used throughout the code:\nThis pattern is used when parent component wants to trigger a state change on the child component\nby calling one of its state changing functions. The method is to pass down a \"flag\":\nThis flag will be used in onEffect sensitivity lists. Onmount, flag will trigger.\nWhen parent wants to trigger state change, it passes a different flag, which will trigger onEffect\non the child.\nFor the parent to pass such a flag, it has to keep the current state of the flag on its own state.\nOn parents state, flag is referred to as \"command\". As in \"command is given to the child\".\nWhen the command is issued, parent component will want to \"turn off\" the flag, which is referred to as\n\"suppressing flags\"\n\n\n*/\n"]}